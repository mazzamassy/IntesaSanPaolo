angular.module("guestApp",["ui.bootstrap","ArchBridge","guestArea","ezfb","ngCookies","vcRecaptcha"]),angular.module("ispApp").requires.push("guestApp"),moment.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),moment.locale("it"),angular.module("guestApp").run(["accountService","gaRouterService","vorreiService","PUBLIC","PRIVATE","$q",function(e,i,o,t,a,r){window.top.GUESTAREA||($("body").append($('<div id="galoading" style="z-index:9999;"></div>')),window.top.GUESTAREA={isLogged:e.auth.isLogged,info:e.profile.info,invokeAuth:function(i,o,t,a){return a!==!0&&window.top.GUESTAREA.loading.show(),r(function(r,s){e.invokeAuth(i,o,!0,t).then(function(e){a!==!0&&window.top.GUESTAREA.loading.hide(),r(e)})["catch"](function(e){a!==!0&&window.top.GUESTAREA.loading.hide(),s(e)})})},invokeAuthUpdateToken:function(i,o,t,a){return a!==!0&&window.top.GUESTAREA.loading.show(),r(function(r,s){e.invokeAuthUpdateToken(i,o,!0,t).then(function(e){a!==!0&&window.top.GUESTAREA.loading.hide(),r(e)})["catch"](function(e){a!==!0&&window.top.GUESTAREA.loading.hide(),s(e)})})},logout:i.logout,loading:{show:function(){$("#galoading").show()},hide:function(){$("#galoading").hide()}},wish:{isLiked:function(e,i,t){o.isProductLiked(e,function(e,o,a){a?t&&t():i&&i(o)})},addLike:function(e,i,t){o.addLikedProduct(o.createProd(e.prodId,e.catId,e.prodUrl,e.prodDescr,moment().valueOf()),function(e,o,a){a?t&&t():i&&i()})},delLike:function(e,i,t){o.removeLikedProduct(e,function(e,o,a){a?t&&t():i&&i()})}},pages:{"public":t,"private":a}})}]),angular.module("guestApp").directive("cmbFasce",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{fasce:"=",fasciaselected:"=",arguments:"=",argumentsgalleggiante:"=",fromgalleggiante:"=",dataselected:"=",errors:"=",fasciaselezionata:"=",dataselezionata:"=",istoday:"=",fasciagalleggiante:"="},templateUrl:"app/tools/callmeback/widgets/cmbFasce/cmbFasce.html",controller:["$rootScope","$log","$scope","cmbService","accountService","$window",function(e,i,o,t,a,r){var s=this;this.indiceSx=0,this.indiceDx=1,this.maxIndice=0,this.sottotitoloFasce="Scegli il giorno in cui vuoi  essere richiamato e la fascia oraria fra quelle disponibili",this.device=r.matchMedia("(max-width: 767px)").matches?"mobile":"desktop",this.openAccordion=!1,this.indiceData=0,this.indiceFascia=0,this.hourAvailable=!0,this.today_temp,this.ore=[],this.argumentsgalleggiante&&this.fromgalleggiante?t.getFasceDisp(this.argumentsgalleggiante).then(function(e){s.fasce=e.fasce,(s.fromgalleggiante||_.isEqual(s.device,"mobile"))&&s.initGallegiante()})["catch"](function(e){i.error("response "+e.exitCode+" getFasceDisp")}):this.argumentsgalleggiante=[],this.checkIndex=function(){if(this.dataselezionata&&this.fasciaselezionata)for(var e=0;e<this.fasce.length;e++){var i=this.fasce[e].giorno;if(_.isEqual(this.dataselezionata,i)){for(var o=0;o<this.fasce[e].orari.length;o++){var i=this.fasce[e].orari[o].ora;_.isEqual(this.fasciaselezionata,i)&&(this.hourAvailable=this.fasce[e].orari[o].disp)}e%2>0?(this.indiceDx=e,this.indiceSx=e-1):(this.indiceDx=e+1,this.indiceSx=e)}}else this.indiceSx=0,this.indiceDx=1;this.init()},this.init=function(){if(this.fasce.length>0){if(this.maxIndice=this.fasce.length-1,this.firstColumn=moment(this.fasce[this.indiceSx].giorno).format("dddd D MMMM YYYY"),this.firstColumnSplit=this.firstColumn.split(" "),this.secondColumn=this.indiceDx<=this.maxIndice?moment(this.fasce[this.indiceDx].giorno).format("dddd D MMMM YYYY"):"",this.secondColumnSplit=this.secondColumn.split(" "),this.giorno1=this.fasce[this.indiceSx],this.giorno2=this.fasce[this.indiceDx],this.orari1=[],this.orari2=[],!this.istoday)for(var e=0;e<this.fasce.length;e++)if(moment().startOf("day").valueOf()==moment(this.fasce[e].giorno)){this.today_temp=this.fasce[e].giorno;break}for(var e=0;e<this.giorno1.orari.length;e++){var i=this.giorno1.orari[e].ora,o=this.giorno1.orari[e].disp,t=(this.firstColumn,this.checkPreselected(this.giorno1.giorno,i));this.ore=i.split(" - "),this.ore.push(o),this.ore.push(this.fasce[this.indiceSx].giorno),this.ore.push(t),this.orari1.push(this.ore),_.isEqual(t,!0)&&(this.fasciaselected=this.ore,this.dataselected=this.fasce[this.indiceSx].giorno)}if(this.indiceDx<=this.maxIndice)for(var a=0;a<this.giorno2.orari.length;a++){var i=this.giorno2.orari[a].ora,o=this.giorno2.orari[a].disp,t=(this.secondColumn,this.checkPreselected(this.giorno2.giorno,i));this.ore=i.split(" - "),this.ore.push(o),this.ore.push(this.fasce[this.indiceDx].giorno),this.ore.push(t),this.orari2.push(this.ore),_.isEqual(t,!0)&&(this.fasciaselected=this.ore,this.dataselected=this.fasce[this.indiceSx].giorno)}this.giorniScrollAutomaticaRiga1=[],this.giorniScrollAutomaticaRiga2=[],this.giorniScrollAutomaticaRiga3=[];for(var a=0,e=0;e<this.fasce.length;e++){var r="";moment().startOf("day").valueOf()==moment(this.fasce[e].giorno)?(r="OGGI",this.istoday||this.fasce[e].giorno!=this.ore[3]||(this.today_temp=this.fasce[e].giorno)):r=moment(this.fasce[e].giorno).format("D MMM"),a<=7?this.giorniScrollAutomaticaRiga1.push(r):a>7&&a<=16?this.giorniScrollAutomaticaRiga2.push(r):this.giorniScrollAutomaticaRiga3.push(r),a++}}},this.checkPreselected=function(e,i){this.istoday||this.dataselezionata!=this.today_temp||(e==this.today_temp?this.istoday=!0:this.istoday=!1);var o=e;if(_.isEqual(this.dataselezionata,o)){var o=i;return!!_.isEqual(this.fasciaselezionata,o)}return!1},this.checkFascia=function(e,i){e[3]==this.today_temp?this.istoday=!0:this.istoday=!1;for(var o=0;o<this.orari2.length;o++)if(_.isEqual(this.orari2[o][4],!0)){this.orari2[o][4]=!1;break}for(var t=0;t<this.orari1.length;t++)if(_.isEqual(this.orari1[t][4],!0)){this.orari1[t][4]=!1;break}this.fasciaselected="",this.fasciaselected=e,this.fasciaselezionata=e[0]+" - "+e[1],this.dataselezionata=e[3],this.errors.fasceVuoto=!1,this.errors.fasciaNonDisponibile=!1,this.hourAvailable=!0},this.setPrevDays=function(){this.indiceSx>0&&(this.indiceSx=this.indiceSx-2,this.indiceDx=this.indiceDx-2,this.init())},this.setNextDays=function(){this.indiceDx<=this.maxIndice&&(this.indiceSx=this.indiceSx+2,this.indiceDx=this.indiceDx+2,this.init())},this.showClickedDays=function(e,i){var o=e,t=i;o%2>0?(this.indiceDx=o+t,this.indiceSx=o-1+t):(this.indiceDx=o+1+t,this.indiceSx=o+t),this.init()},this.initGallegiante=function(){this.giorniFasceGallegiante=[];for(var e=0;e<this.fasce.length;e++){var i="";moment().startOf("day").valueOf()==moment(this.fasce[e].giorno)?(i="OGGI",this.today_temp=this.fasce[e].giorno):i=moment(this.fasce[e].giorno).format("dddd D MMMM YYYY"),this.giorniFasceGallegiante.push(i),this.dataselezionata?this.giornoSelezionato=moment(this.dataselezionata).format("dddd D MMMM YYYY"):this.giornoSelezionato=moment(this.fasce[0].giorno).format("dddd D MMMM YYYY"),moment().startOf("day").valueOf()==moment(this.giornoSelezionato,"dddd D MMMM YYYY").valueOf()&&(this.giornoSelezionato="OGGI")}this.setDisponibilitaFasce()},this.setGiorniFasce=function(e){this.giornoSelezionato=this.giorniFasceGallegiante[e],this.setDisponibilitaFasce(e)},this.checkFasciaGalleggiante=function(e){moment(e[3],"dddd D MMMM YYYY").valueOf()==this.today_temp?this.istoday=!0:this.istoday=!1;for(var i=0;i<this.informazioniOrari.length;i++){if(this.informazioniOrari[i][4]){this.informazioniOrari[i][4]=!1;break}e==this.informazioniOrari[i]&&this.fromgalleggiante&&(this.informazioniOrari[i][4]=!0)}_.isEqual(s.device,"mobile")?this.fasciaselected[3]=moment(e[3],"dddd D MMMM YYYY").valueOf():this.dataselezionata=moment(e[3],"dddd D MMMM YYYY").valueOf(),this.fasciagalleggiante=e,this.fasciaselezionata=e[0]+" - "+e[1],this.dataselezionata=moment(e[3],"dddd D MMMM YYYY").valueOf(),this.errors.fasceVuoto=!1,this.errors.fasciaNonDisponibile=!1,this.hourAvailable=!0},this.setDisponibilitaFasce=function(e){if(this.informazioniOrari=[],e>=0)this.valoreSelezionato=this.fasce[e];else if(this.dataselezionata){for(var i=0;i<this.fasce.length;i++)if(_.isEqual(this.fasce[i].giorno,this.dataselezionata)){this.valoreSelezionato=this.fasce[i];for(var o=0;o<this.fasce[i].orari.length;o++){var t=this.fasce[i].orari[o].ora;_.isEqual(this.fasciaselezionata,t)&&(this.hourAvailable=this.fasce[i].orari[o].disp)}break}}else this.valoreSelezionato=this.fasce[0];if(this.valoreSelezionato)for(var i=0;i<this.valoreSelezionato.orari.length;i++){var a=this.valoreSelezionato.orari[i].ora,r=this.valoreSelezionato.orari[i].disp,s=moment(this.valoreSelezionato.giorno).format("dddd D MMMM YYYY"),n=this.checkPreselected(this.valoreSelezionato.giorno,a);this.oreGallegiante=a.split(" - "),this.oreGallegiante.push(r),this.oreGallegiante.push(s),this.oreGallegiante.push(n),this.informazioniOrari.push(this.oreGallegiante),n&&(this.fasciagalleggiante=this.oreGallegiante,this.fasciaselected=this.oreGallegiante)}},e.$on("step4",function(e){"step4"===e.name&&(_.isUndefined(s.fasciagalleggiante)||_.isEmpty(s.fasciagalleggiante)?s.errors.fasceVuoto=!0:s.errors.fasceVuoto=!1,s.hourAvailable?s.errors.fasciaNonDisponibile=!1:s.errors.fasciaNonDisponibile=!0)}),this.openAccordionFunction=function(){_.isEqual(this.openAccordion,!0)?this.openAccordion=!1:this.openAccordion=!0},e.$on("checkForErrors",function(e){"checkForErrors"===e.name&&(_.isEqual(s.device,"mobile")?_.isUndefined(s.fasciagalleggiante)||_.isEmpty(s.fasciagalleggiante)?s.errors.fasceVuoto=!0:s.errors.fasceVuoto=!1:_.isUndefined(s.fasciaselected)||_.isEmpty(s.fasciaselected)?s.errors.fasceVuoto=!0:s.errors.fasceVuoto=!1,s.hourAvailable?s.errors.fasciaNonDisponibile=!1:s.errors.fasciaNonDisponibile=!0)}),e.$on("checkArguments",function(e,o){"checkArguments"===e.name&&t.getFasceDisp(o).then(function(e){0==o.length?s.fasce=[]:(s.fasce=e.fasce,_.isEqual(s.device,"mobile")?s.initGallegiante():s.checkIndex())})["catch"](function(e){i.error("response "+e.exitCode+" getFasceDisp")})}),e.$on("valorizzazioneCampi",function(e,i){"valorizzazioneCampi"===e.name&&("CMB"==i.tipoServizio&&(s.dataselezionata=i.dataSel,s.fasciaselezionata=i.fasciaSel),_.isEqual(s.device,"mobile")?s.initGallegiante():s.checkIndex())})}]}}),angular.module("guestApp").directive("cmbEsito",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{esitook:"=",showesito:"=",arguments:"=",argumentsgalleggiante:"=",argomentiformat:"=",fasciaselected:"=",dataselected:"=",cellulare:"=",nome:"=",flagsms:"=",flagemail:"=",fromgalleggiante:"=",riepilogo:"@",disabilitabtn:"=",email:"=",istoday:"=",fasciagalleggiante:"=",callmebackpersonal:"=",errstorico:"=",errelimina:"=",errhouravailable:"=",riprovaCb:"&"},templateUrl:"app/tools/callmeback/widgets/cmbEsito/cmbEsito.html",controller:["$rootScope","$window","$scope","$log","gaRouterService",function(e,i,o,t,a){this.txtEsito=this.nome+", il tuo appuntamento telefonico è confermato!",this.fasciaselected&&(this.fasciaselectedParsed=this.fasciaselected[3].slice(0,-4)),this.fasciagalleggiante&&(this.fasciagalleggiante[3]=moment(this.fasciagalleggiante[3],"dddd D MMMM YYYY").format("D MMMM YYYY")),this.btnAppuntamenti=function(){a.ricordamidi()},this.btnRiprova=function(){this.showesito=!1,this.disabilitabtn=!1},this.btnEditAppt=function(){this.showesito=!1,this.disabilitabtn=!1},this.btnHomePage=function(){a.landing()}}]}}),angular.module("guestApp").directive("cmbPhoneNumber",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{cellulare:"=",cellulareVuoto:"=",errors:"=",fromgalleggiante:"=",argumentsgalleggiante:"=",callmebackpersonal:"=",modalpersonalclient:"="},templateUrl:"app/tools/callmeback/widgets/cmbPhoneNumber/cmbPhoneNumber.html",controller:["$rootScope","$scope","utilsService","accountService",function(e,i,o,t){var a=this;this.textPhone="Indica il cellulare su cui vuoi ricevere la nostra chiamata",this.numberWrong="Il numero di cellulare deve essere composto da 9 a 10 caratteri numerici. Per favore, verifica e riprova. ",this.numberEmpty="Campo obbligatorio: compila per proseguire",""==this.cellulare?this.modificaNumero=!1:this.modificaNumero=!1,this.checkError=function(){this.cellulare?o.isValidCellPhone(this.cellulare)?(this.errors.cellulareVuoto=!1,this.errors.cellulare=!1):(this.errors.cellulareVuoto=!1,this.errors.cellulare=!0):(this.errors.cellulareVuoto=!0,this.errors.cellulare=!1)},this.changeStyle=function(){this.errors.cellulareVuoto=!1,this.errors.cellulare=!1},this.clientPersonalEvManager=function(i){e.$emit("isPersonalClient",i)},e.$on("step3",function(e){"step3"===e.name&&a.checkError()})}]}}),angular.module("guestApp").directive("cmbContacts",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{nome:"=",cognome:"=",cellulare:"=",email:"=",flagsms:"=",flagemail:"=",privacy:"=",istoday:"=",disabilitabtn:"=",fromgalleggiante:"=",argumentsgalleggiante:"=",errors:"="},templateUrl:"app/tools/callmeback/widgets/cmbContacts/cmbContacts.html",controller:["$rootScope","$scope","utilsService","accountService","cmbService","$window",function(e,i,o,t,a,r){var s=this;this.email_truncate="",this.email_tip="",this.email_tip_truncate="",this.cellulare_tip="",this.cellulare_truncate="",this.sottotitoloGalleggiante="Vuoi essere sicuro di non dimenticare l'appuntamento? Scegli come ricevere il tuo promemoria",r.matchMedia("(max-width: 424px)").matches?this.deviceResolution="smallmobile":r.matchMedia("(max-width: 767px)").matches?this.deviceResolution="mobile":r.matchMedia("(max-width: 1023px)").matches?this.deviceResolution="tablet":this.deviceResolution="desktop",this.checkNome=function(){this.nome?o.isValidNomeCognome(this.nome)?(this.errors.nomeVuoto=!1,this.errors.nome=!1):(this.errors.nomeVuoto=!1,this.errors.nome=!0):(this.errors.nomeVuoto=!0,this.errors.nome=!1)},this.checkCognome=function(){this.cognome?o.isValidNomeCognome(this.cognome)?(this.errors.cognomeVuoto=!1,this.errors.cognome=!1):(this.errors.cognomeVuoto=!1,this.errors.cognome=!0):(this.errors.cognomeVuoto=!0,this.errors.cognome=!1)},this.checkCellulare=function(){this.cellulare?o.isValidCellPhone(this.cellulare)?(this.errors.cellulareVuoto=!1,this.errors.cellulare=!1):(this.errors.cellulareVuoto=!1,this.errors.cellulare=!0):(this.errors.cellulareVuoto=!0,this.errors.cellulare=!1)},this.checkEmail=function(){this.email?o.isValidEmail(this.email)?this.errors.email=!1:this.errors.email=!0:this.errors.email=!1},this.checkFlagSmsEmail=function(){this.flagsms=document.getElementById("flagSmsId").checked,this.flagemail=document.getElementById("flagEmailId").checked,this.flagsms||this.flagemail?this.errors.flagSmsEmail=!1:this.errors.flagSmsEmail=!0},this.checkPrivacy=function(){privacy=document.getElementById("flagPrivacyId").checked,privacy?(this.privacy=!0,this.disabilitabtn=!1,this.errors.privacy=!1):(this.privacy=!1,this.disabilitabtn=!0,this.errors.privacy=!0)},this.checkStringLength=function(){this.email.length>25?this.email_truncate=this.email.substr(0,25)+"...":this.email_truncate=this.email,this.email_tip="Tramite email "+this.email,this.fromgalleggiante?this.email_tip.length>35?this.email_tip_truncate=this.email_tip.substr(0,35)+"...":this.email_tip_truncate=this.email_tip:"smallmobile"==this.deviceResolution?this.email_tip.length>28?this.email_tip_truncate=this.email_tip.substr(0,28)+"...":this.email_tip_truncate=this.email_tip:"mobile"==this.deviceResolution?this.email_tip.length>35?this.email_tip_truncate=this.email_tip.substr(0,35)+"...":this.email_tip_truncate=this.email_tip:"tablet"==this.deviceResolution?this.email_tip.length>20?this.email_tip_truncate=this.email_tip.substr(0,20)+"...":this.email_tip_truncate=this.email_tip:"desktop"==this.deviceResolution&&(this.email_tip.length>27?this.email_tip_truncate=this.email_tip.substr(0,27)+"...":this.email_tip_truncate=this.email_tip),this.cellulare_tip="Via SMS al numero "+this.cellulare,this.fromgalleggiante?this.cellulare_tip.length>30?this.cellulare_truncate=this.cellulare_tip.substr(0,30)+"...":this.cellulare_truncate=this.cellulare_tip:"smallmobile"==this.deviceResolution||"mobile"==this.deviceResolution||"desktop"==this.deviceResolution?this.cellulare_tip.length>30?this.cellulare_truncate=this.cellulare_tip.substr(0,30)+"...":this.cellulare_truncate=this.cellulare_tip:"tablet"==this.deviceResolution&&(this.cellulare_tip.length>24?this.cellulare_truncate=this.cellulare_tip.substr(0,24)+"...":this.cellulare_truncate=this.cellulare_tip)},e.$on("checkForErrors",function(e){"checkForErrors"===e.name&&(s.checkNome(),s.checkCognome(),s.checkCellulare(),s.checkEmail(),s.checkPrivacy())}),e.$on("step5",function(e){"step5"===e.name}),e.$on("valorizzazioneCampi",function(e,i,o){"valorizzazioneCampi"===e.name&&(s.flagsms=i.flagSMS,s.flagemail=i.flagEmail,s.privacy=o,$("#flagPrivacyId").prop("checked",s.privacy),s.privacy&&(s.privacy=!0,s.disabilitabtn=!1,s.errors.privacy=!1))})}]}}),angular.module("guestApp").directive("cmbButton",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{esitook:"=",arguments:"=",argumentsgalleggiante:"=",fasciagalleggiante:"=",fasciaselected:"=",cellulare:"=",flagsms:"=",flagemail:"=",fromgalleggiante:"=",email:"=",appuntamento:"=",logged:"=",orariovisualizzatoappt:"="},templateUrl:"app/tools/callmeback/widgets/cmbButton/cmbButton.html",controller:["$uibModal","cmbService","accountService","gaRouterService","$rootScope",function(e,i,o,t,a){var r=this;this.disabled=!1,this.date="",this.hour="",this.modalElimina=!1,this.showCmbButton=!0,this.editable=!1,this.removable=!1,this.riepilogo="",this.isCMB=!1,this.callmeback=function(){o.auth.isLogged()?t.callMeBack():t.loginFromCMB()},this.modifica=function(){t.callMeBack()},this.gestioneUtente=function(e){_.isEqual(e,"accedi")?t.loginFromCMB():t.signupFromCMB()},this.gestioneAppuntamento=function(e){_.isEqual(e,"modAppt")||_.isEqual(e,"delAppt")?a.$emit("gestioneAppuntamento",{btnCliccato:e}):_.isEqual(e,"openModal")?this.modalElimina=!0:_.isEqual(e,"richiamiamoNoi")?a.$emit("gestioneAppuntamento",{btnCliccato:e}):this.modalElimina=!1},$("#modal-phone button.closeModal").click(function(){window.setTimeout(function(){r.showBlock()},300)}),this.hideBlock=function(){r.disabled||(r.logged=o.auth.isLogged(),r.logged?(r.disabled=!0,i.getAppuntamentoAttivo(!1).then(function(e){if(e){if(a.$emit("reloadAppuntamento",e),r.removable=i.isEditable(e),"CMB"==e.tipoServizio){r.date=moment(e.dataSel).format("D MMMM");var o=e.fasciaSel.split(" - ");r.hour=o[0],r.isCMB=!0,r.editable=i.isEditable(e)}else r.editable=!1,r.isCMB=!1,r.date=moment().format("D MMMM"),r.hour=moment().format("HH:mm");for(var t=e.argomenti.length,s=0;s<t;s++){var n=e.argomenti[s];"CEC"==n?r.riepilogo+="Conti e carte":"OEP"==n?r.riepilogo+="Operazioni e pagamenti":"INV"==n?r.riepilogo+="Investimenti":"FIN"==n?r.riepilogo+="Finanziamenti":"ASS"==n?r.riepilogo+="Assicurazioni":r.riepilogo+="Informazioni varie",s<t-1&&(r.riepilogo+=", ")}r.disabled=!1,r.showCmbButton=!1,$("#modal-phone .modal-body > div").hide()}else a.$emit("reloadAppuntamento",null),r.riepilogo="",r.disabled=!1,r.editable=!1,r.removable=!1,r.showCmbButton=!1,$("#modal-phone .modal-body > div").hide()})["catch"](function(e){a.$emit("erroreStorico"),r.riepilogo="",r.disabled=!1,r.editable=!1,r.removable=!1,r.showCmbButton=!1,$("#modal-phone .modal-body > div").hide()})):(a.$emit("reloadAppuntamento",null),r.riepilogo="",r.disabled=!1,r.editable=!1,r.removable=!1,r.showCmbButton=!1,$("#modal-phone .modal-body > div").hide()))},this.showBlock=function(){r.showCmbButton=!0,$("#modal-phone .modal-body > div").show()},this.elimina=function(){var i=r.appuntamento.idAppt;e.open({animation:!0,templateUrl:"app/tools/callmeback/widgets/cmbButton/eliminaAppt.html",controllerAs:"eliminaApptCtrl",bindToController:!0,controller:["accountService","cmbService","$rootScope",function(e,o,t){var a=this;this.error=!1,this.firstStep=!0,this.eliminaAppt=function(){o.removeAppuntamento(i).then(function(){a.firstStep=!1})["catch"](function(){a.error=!0,a.firstStep=!1})},this.logout=function(){t.$broadcast("ga-navigation","logout")}}]})},this.entraIB=function(){t.loginIBFromCMB()}}]}}),angular.module("guestApp").directive("cmbArguments",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{arguments:"=",argumentsgalleggiante:"=",notaargomenti:"=",fromgalleggiante:"=",errors:"="},templateUrl:"app/tools/callmeback/widgets/cmbArguments/cmbArguments.html",controller:["$rootScope","$scope","cmbService","accountService",function(e,i,o,t){var a=this;if(this.maxNumArguments=this.fromgalleggiante?0:this.arguments.length,this.maxNumArgumentsGalleggiante=this.fromgalleggiante?this.argumentsgalleggiante.length:0,this.argomenti=[{argomento:"Conti e carte",selezionato:!1,acronimo:"CEC"},{argomento:"Assicurazioni",selezionato:!1,acronimo:"ASS"},{argomento:"Finanziamenti",selezionato:!1,acronimo:"FIN"},{argomento:"Investimenti",selezionato:!1,acronimo:"INV"},{argomento:"Operazioni e pagamenti",selezionato:!1,acronimo:"OEP"},{argomento:"Informazioni varie",selezionato:!1,acronimo:"INF"}],this.galleggianteArguments=[{right:this.argomenti[0],left:this.argomenti[1]},{right:this.argomenti[2],left:this.argomenti[3]},{right:this.argomenti[4],left:this.argomenti[5]}],this.toSelectGalleggiante=function(e){return this.errors.argumentsVuotoGalleggiante=!1,_.isEqual(e.selezionato,!1)?(this.maxNumArgumentsGalleggiante++,e.selezionato=!0):(this.maxNumArgumentsGalleggiante--,e.selezionato=!1)},this.fromgalleggiante&&this.argumentsgalleggiante){for(var r=0;r<this.argumentsgalleggiante.length;r++)for(var s=this.argumentsgalleggiante[r],n=0;n<this.argomenti.length;n++)if(this.argomenti[n].acronimo==s){this.argomenti[n].selezionato=!0;break}this.argumentsgalleggiante=[]}this.checkArgomenti=function(){var e=!1;this.arguments=[];for(var i=0;i<this.argomenti.length;i++)_.isEqual(this.argomenti[i].selezionato,!0)&&(this.arguments.push(this.argomenti[i].acronimo),e=!0);e?this.errors.argumentsVuoto=!1:this.errors.argumentsVuoto=!0},this.checkArgomentiGalleggiante=function(e){var i=!1;e||(this.argumentsgalleggiante=[]);for(var o=0;o<this.argomenti.length;o++)_.isEqual(this.argomenti[o].selezionato,!0)&&(this.argumentsgalleggiante.push(this.argomenti[o].acronimo),i=!0);i?this.errors.argumentsVuotoGalleggiante=!1:this.errors.argumentsVuotoGalleggiante=!0},this.toSelect=function(i){_.isEqual(this.argomenti[i].selezionato,!1)?(this.argomenti[i].selezionato=!0,this.maxNumArguments++):(this.argomenti[i].selezionato=!1,this.maxNumArguments--),this.maxNumArguments<6?this.errors.argumentsMaxNumber=!1:this.errors.argumentsMaxNumber=!0,this.checkArgomenti(),e.$broadcast("checkArguments",this.arguments)},e.$on("checkForErrors",function(e){"checkForErrors"===e.name&&a.checkArgomenti()}),e.$on("step2",function(e){"step2"===e.name&&(a.maxNumArgumentsGalleggiante<6?(a.errors.argumentsMaxNumber=!1,a.argumentsgalleggiante?a.checkArgomentiGalleggiante("appt"):a.checkArgomentiGalleggiante()):a.errors.argumentsMaxNumber=!0)}),this.editArguments=function(){if(!_.isUndefined(this.arguments)){for(var i=0;i<this.arguments.length;i++)for(var o=this.arguments[i],t=0;t<this.argomenti.length;t++)if(this.argomenti[t].acronimo==o){this.argomenti[t].selezionato=!0;break}this.checkArgomenti(),e.$broadcast("checkArguments",this.arguments)}},e.$on("valorizzazioneCampi",function(e,i){"valorizzazioneCampi"===e.name&&(a.arguments=i.argomenti,a.maxNumArguments=a.arguments.length,a.editArguments())})}]}}),angular.module("guestApp").directive("toastMessage",["$rootScope",function(e){return{restrict:"E",templateUrl:"app/tools/carrello/widgets/toastmessage/html/toastMessageTemplate.html",scope:{toastMsg:"=",toastMsgDuration:"=",toastName:"="},link:function(i,o,t){e.$on("SHOW_TOAST_MESSAGES",function(e,o){if(console.log("opening toast message"),!i.toastName||""==o.name||i.toastName&&o.name==i.toastName){var t="15000",a="";a=i.toastMsg?i.toastMsg:o.message?o.message:"",i.toastMsgDuration&&(t=i.toastMsgDuration);var r=document.getElementById("snackbar");r.innerHTML=a,r.className="show",r.style.top=document.getElementsByTagName("footer")[0].getBoundingClientRect().y-tooltip.getBoundingClientRect().height+"px",setTimeout(function(){r.className=r.className.replace("show","")},t)}})}}}]),angular.module("guestApp").factory("cmbService",["$window","$log","$q","accountService",function(e,i,o,t){var a={GET_APPUNTAMENTO_BYID:"app/token/CMB_getAppuntamentoById",GET_APPUNTAMENTI:"app/token/CMB_getAppuntamenti",REM_APPUNTAMENTO:"app/token/CMB_removeAppuntamento",GET_FASCE:"app/token/CMB_getFasceDisp",REQ_APPUNTAMENTO:"app/token/CMB_richiediAppuntamento"},r=function(e,i){var o=t.profile.info(),a={utente:{idProspect:o?o.idProspect:null,indirizzoEmail:o?o.email.toLowerCase():null,segmento:"NI"}};return e&&(a.idAppuntamento=e),i&&(a.argomenti=i),a.canale="SG",a.sorgenteRichiesta="GA",a.tipoServizio="CMB",a},s=function(e){var i={};if(i.idAppt=e.idAppuntamento,i.argomenti=e.argomenti,i.notaArgomenti="",i.tipoServizio=e.tipoServizio,i.nome=e.nome,i.cognome=e.cognome,i.numero="0039"==e.telefono.substring(0,4)?e.telefono.substring(4):e.telefono,i.email=e.indirizzoEmail,i.flagSMS="1"==e.memoSMS,i.flagEmail="1"==e.memoEmail,"CMB"==i.tipoServizio){i.dataSel=moment(e.dataAppuntamento,"DD-MM-YYYY").valueOf();var o=e.fasciaOraria,t=Number(o)+1;i.fasciaSel=(o<10?"0"+o:o)+":00 - "+(t<10?"0"+t:t)+":00"}return i.stato=e.stato.toUpperCase(),i},n=function(e){var i=r(e.idAppt,e.argomenti);return i.tipoServizio=e.tipoServizio,i.utente.nome=e.nome,i.utente.cognome=e.cognome,i.utente.telefono="00"==e.numero.substring(0,2)?e.numero:"0039"+e.numero,"CMB"==i.tipoServizio&&(i.dataAppuntamento=moment(e.dataSel).format("DD-MM-YYYY"),i.fasciaOraria=""+Number(e.fasciaSel.substring(0,2)),i.memoSMS=e.flagSMS?"1":"0",i.memoEmail=e.flagEmail?"1":"0"),i},l=function(e){return e&&e.stato&&"DG"===e.stato.toUpperCase()},c=function(e){return e&&e.stato&&("DG"===e.stato.toUpperCase()||"IG"===e.stato.toUpperCase()||"RS"===e.stato.toUpperCase()||"RP"===e.stato.toUpperCase())},d=function(e){return o(function(o,t){window.top.GUESTAREA.invokeAuth(a.GET_APPUNTAMENTO_BYID,r(e),null,!1).then(function(e){var i={};e.listaAppuntamenti.length>0&&(i=s(e.listaAppuntamenti[0])),o(i)})["catch"](function(e){i.error("error in getAppuntamentoById",e),t(e)})})},p=function(){return o(function(e,o){window.top.GUESTAREA.invokeAuth(a.GET_APPUNTAMENTI,r(),null,!1).then(function(i){for(var o=[],t=i.listaAppuntamenti.length,a=0;a<t;a++)o.push(s(i.listaAppuntamenti[a]));e(o)})["catch"](function(e){i.error("error in getAppuntamenti",e),o(e)})})},m=function(e){return o(function(o,t){window.top.GUESTAREA.invokeAuth(a.GET_APPUNTAMENTI,r(),null,e).then(function(e){var i=null;if(e&&e.listaAppuntamenti)for(var t=e.listaAppuntamenti.length,a=0;a<t;a++){var r=e.listaAppuntamenti[a];if(c(r)){i=s(r);break}}o(i)})["catch"](function(e){i.error("error in getAppuntamentoAttivo",e),t(e)})})},u=function(e){return window.top.GUESTAREA.invokeAuth(a.REM_APPUNTAMENTO,r(e),null,!1)},g=function(e){return o(function(o,t){window.top.GUESTAREA.invokeAuth(a.GET_FASCE,r(null,e),null,!1).then(function(e){for(var i={fasce:[]},t=e.listaDisponibilita.length,a=0;a<t;a++){var r=e.listaDisponibilita[a],s=Number(r.fasciaOraria),n=Number(s)+1,l=moment(r.data,"DD-MM-YYYY").valueOf(),c=(s<10?"0"+s:s)+":00 - "+(n<10?"0"+n:n)+":00",d=moment().format("DD-MM-YYYY"),p=Number(moment().format("H")),m=(d!=r.data||d==r.data&&p<s)&&r.slotLiberi>0,u=_.find(i.fasce,function(e){return e.giorno==l});u?u.orari.push({ora:c,disp:m}):(u={giorno:l,orari:[{ora:c,disp:m}]},i.fasce.push(u))}i.fasce=_.orderBy(i.fasce,"giorno","asc"),o(i)})["catch"](function(e){i.error("error in getFasceDisp",e),t(e)})})},v=function(e){return e.tipoServizio="CMB",window.top.GUESTAREA.invokeAuth(a.REQ_APPUNTAMENTO,n(e),null,!1)},h=function(e){return e.tipoServizio="CMN",e.dataSel=null,e.fasciaSel=null,e.flagSMS=null,e.flagEmail=null,window.top.GUESTAREA.invokeAuth(a.REQ_APPUNTAMENTO,n(e),null,!1)},f=function(e){return o(function(i,o){var t=r(null,e.argomenti);t.tipoServizio="CMN",window.top.GUESTAREA.invokeAuth(a.GET_FASCE,t,null,!1).then(function(e){i(e)})["catch"](function(e){o(e)})})};return{isEditable:l,isVisible:c,getAppuntamentoById:d,getAppuntamenti:p,getAppuntamentoAttivo:m,removeAppuntamento:u,getFasceDisp:g,callMeBack:v,callMeNow:h,checkHourAvailable:f}}]),angular.module("guestApp").directive("wish",function(){return{restrict:"E",templateUrl:"app/vorrei/wish/wish.html",controllerAs:"wishCtrl",bindToController:!0,scope:{dettaglio:"=",modifica:"=",onPreRemove:"&",onPostRemove:"="},controller:["$uibModal","$window","$sce","vorreiService","utilsService","gaRouterService","accountService",function(e,i,o,t,a,r,s){var n=this;if(this.showConfirm=this.modifica,this.eraseable=!this.dettaglio.isSimulazione||this.dettaglio.isSimulazione&&this.dettaglio.superpratica.eraseable,this.detailLoaded=!1,this.showError=!1,this.goToProduct=function(){if(this.dettaglio.isSimulazione){if(this.dettaglio.isPrestito)r.prestito(this.dettaglio.codSaup);else if(this.dettaglio.isConto)if(this.dettaglio.superpratica.codCategoriaProdotto==t.categorieProd.minori)r.ccselfConfiguratoreMinori(this.dettaglio.superpratica.idSuperPratica);else if(this.detailLoaded){this.showError=!1;var e=_.find(this.dettaglio.superpratica.pratiche,function(e){return"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()});r.ccselfConfiguratore(e.idPratica,e.idSuperPratica)}else{var o=this.dettaglio.superpratica;this.showError=!1,window.top.GUESTAREA.loading.show(),t.getDettaglioPratiche({idSuperPratica:o.idSuperPratica,codSaup:o.codSaup,stato:o.stato,descStato:o.descStato,codProposta:o.codProposta,scadenza:o.scadenza,codSaupOriginario:o.codSaupOriginario,codAreaOperativa:o.codAreaOperativa,tipologia:o.tipologia,codTipoProposta:o.codTipoProposta,pratiche:o.pratiche}).then(function(e){n.detailLoaded=!0,o.pratiche=e.listaPratiche;var i=_.find(o.pratiche,function(e){return"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()});window.top.GUESTAREA.loading.hide(),r.ccselfConfiguratore(i.idPratica,i.idSuperPratica)})["catch"](function(e){n.showError=!0,window.top.GUESTAREA.loading.hide()})}}else{var a=_.endsWith(this.dettaglio.prodUrl,".html")?"":".html";i.location.href=this.dettaglio.prodUrl+a}},this.category=function(){return n.dettaglio.isSimulazione?o.trustAsHtml(n.dettaglio.catId):o.trustAsHtml(n.dettaglio.catId.toUpperCase())}(),this.description=function(){return o.trustAsHtml(n.dettaglio.prodDescr)}(),n.dettaglio.isConto||n.dettaglio.isPrestito)var l=0;else var l=10;this.expireThings=a.calculateExpiringDateAndOtherLittleThings(this.dettaglio.lastMod,l),this.expireThings.remainingDaysString=function(){return 0==n.expireThings.remainingDays?"OGGI":n.expireThings.remainingDays>0?"SCADUTA":n.expireThings.remainingDays==-1?"-1 GIORNO":n.expireThings.remainingDays+" GIORNI"}(),this.expireThings.alarm=this.expireThings.remainingDays>=-5,this.expireThings.expirationDateString=(this.expireThings.remainingDays<=0?"Scade":"Scaduta")+" il "+this.expireThings.expireDateFormatted,this.clickOnRow=function(){this.modifica&&this.eraseable?this.askConfirm():this.goToProduct();
},this.askConfirm=function(){this.showConfirm=!0},this.cancelRemove=function(){this.showConfirm=!1},this.confirmRemove=function(){if(this.showConfirm=!1,this.onPreRemove(),this.dettaglio.isSimulazione)s.invokeAuth("app/token/GA_eliminaSuperpratica",{superpratica:{idSuperPratica:n.dettaglio.superpratica.idSuperPratica,codSaup:n.dettaglio.superpratica.codSaup,stato:n.dettaglio.superpratica.stato,descStato:n.dettaglio.superpratica.descStato,codProposta:n.dettaglio.superpratica.codProposta,scadenza:n.dettaglio.superpratica.scadenza,codSaupOriginario:n.dettaglio.superpratica.codSaupOriginario,codAreaOperativa:n.dettaglio.superpratica.codAreaOperativa,codCategoriaProdotto:n.dettaglio.superpratica.codCategoriaProdotto,tipologia:n.dettaglio.superpratica.tipologia,codTipoProposta:n.dettaglio.superpratica.codTipoProposta}},!1).then(function(e){e.esitoEliminazione?n.onPostRemove({prodId:n.dettaglio.prodId}):(n.onPostRemove(null),n.openModalEliminaSimulazioneMiPiace("isSimulazione"))})["catch"](function(e){n.onPostRemove(null),n.openModalEliminaSimulazioneMiPiace("isSimulazione")});else{var e=t.createProd(this.dettaglio.prodId,this.dettaglio.catId,this.dettaglio.prodUrl,this.dettaglio.prodDescr);t.removeLikedProduct(e,function(i,o,t){t?(n.onPostRemove(null),n.openModalEliminaSimulazioneMiPiace("isLike")):n.onPostRemove(e)})}},this.showAskConfirm=function(){return this.modifica||(this.showConfirm=!1),this.modifica&&this.showConfirm},this.icon=function(){return n.dettaglio.isSimulazione?n.dettaglio.isPrestito?"icona icon ico-vorrei-c-finanziamenti-n":n.dettaglio.isConto?"icona icon ico-mioprofilo-c-conto-n":"icona icon ico-vorrei-c-carte-n":"icona icon ico-vorrei-c-carte-n"}(),this.openModalEliminaSimulazioneMiPiace=function(i){e.open({animation:!0,templateUrl:"app/vorrei/wish/wish-modal-elimina.html",controllerAs:"wishModalEliminaCtrl",bindToController:!0,controller:["vorreiService","$rootScope",function(e,o){var t=this;t.item=i,t.titolo="isSimulazione"==t.item?"ELIMINA SIMULAZIONE":"ELIMINA MI PIACE",t.testo="isSimulazione"==t.item?"la simulazione":"il mi piace"}]})}}]}}),angular.module("guestApp").directive("timeoutSessione",[function(){return{restrict:"E",controllerAs:"timeoutSessioneCtrl",bindToController:!0,templateUrl:"app/vorrei/timeoutSessione/timeoutSessione.html",controller:["$scope",function(e){}]}}]),angular.module("guestApp").directive("carrello",function(){return{restrict:"E",templateUrl:"app/vorrei/carrello/carrello.html",controllerAs:"carrelloCtrl",bindToController:!0,scope:{dettaglio:"=",modifica:"=",onPreRemove:"&",onPostRemove:"="},controller:["$uibModal","$scope","$rootScope","vorreiService","utilsService","gaRouterService","accountService",function(e,i,o,t,a,r,s){var n=this;this.showConfirm=this.modifica,this.showError=!1,this.showDetail=!1,this.isConto=n.dettaglio.codAreaOperativa==t.areeOperative.conto,this.isPrestito=n.dettaglio.codAreaOperativa==t.areeOperative.prestito,this.isPerMeUp=n.dettaglio.codCategoriaProdotto==t.categorieProd.minori,this.popOverStato=!1,this.statiBloccanti=[{stato:"405",tooltip:"<span>Per concludere l&apos;apertura del conto procedi con l&apos;accesso in APP seguendo le istruzioni che ti abbiamo mandato via e-mail.</span>",text:"ESEGUI L'ACCESSO IN APP"},{stato:"827",tooltip:"<span>Per procedere con l&apos;apertura del conto esegui il bonifico seguendo le istruzioni che ti abbiamo inviato via e-mail.</span>",text:"IN ATTESA DI BONIFICO"},{stato:"410",tooltip:"<span>Ti contatteremo telefonicamente per concludere l&apos;identificazione a distanza.</span>",text:"IN CARICO ALLA BANCA"},{stato:"369",tooltip:"<span>Stiamo verificando la tua richiesta. Ti manderemo un&apos;e-mail non appena avremo concluso.</span>",text:"IN CARICO ALLA BANCA"},{stato:"972",tooltip:"<span>Stiamo verificando la tua richiesta. Ti manderemo un&apos;e-mail non appena avremo concluso.</span>",text:"IN CARICO ALLA BANCA"},{stato:"499",tooltip:"<span>Per concludere l&apos;apertura del conto procedi con l&apos;accesso in APP seguendo le istruzioni che ti abbiamo mandato via e-mail.</span>",text:"ESEGUI L'ACCESSO IN APP"},{stato:"975",tooltip:"<span>Stiamo verificando la tua richiesta. Ti manderemo un&apos;e-mail non appena avremo concluso.</span>",text:"IN CARICO ALLA BANCA"}];var l=function(e){var i=[];return _.forOwn(e,function(e,o){i.push(encodeURIComponent(o)+"="+encodeURIComponent(e))}),i.join("&")};this.getCategoryData=function(){switch(n.dettaglio.codCategoriaProdotto){case"27":return"XME Conto"}},this.getCategoryType=function(){switch(n.dettaglio.codCategoriaProdotto){case"27":return"Offerta"}},this.categoryAndProposal=function(){return n.getCategoryData()+" n. "+n.dettaglio.codProposta}(),this.category=function(){return n.getCategoryData()}(),this.typology=function(){switch(n.dettaglio.tipologia){case"CONTO":return"RICHIESTA"}}(),this.from=function(){return n.dettaglio.codSaupOriginario&&""!==n.dettaglio.codSaupOriginario?"PROVENIENTE DA CONFIGURAZIIONE N."+n.dettaglio.codSaupOriginario:""}(),this.numPratiche=function(){var e=n.dettaglio.pratiche?n.dettaglio.pratiche.length:0,i=n.dettaglio.pratiche.find(function(e){return"MyKey"===e.descrizione});return i||(e+=1),1==e?"1 Prodotto: ":e+" Prodotti: "},this.expireThings=a.calculateExpiringDateAndOtherLittleThings(n.dettaglio.scadenza),this.expireThings.remainingDaysString=function(){return 0==n.expireThings.remainingDays?"OGGI":n.expireThings.remainingDays>0?"SCADUTA":n.expireThings.remainingDays==-1?"-1 GIORNO":n.expireThings.remainingDays+" GIORNI"}(),this.expireThings.alarm=this.expireThings.remainingDays>=-5,this.expireThings.expirationDateString=(this.expireThings.remainingDays<=0?"Scade":"Scaduta")+" il "+this.expireThings.expireDateFormatted,this.status="IN CORSO",this.findStatiBloccanti=function(){return _.find(n.statiBloccanti,function(e){var i=_.find(n.dettaglio.pratiche,function(i){return e.stato===i.stato});return!!i})},this.getStatusLabel=function(){var e=n.findStatiBloccanti();return e?e.text:""}(),this.getPopoverStatusText=function(){var e=n.findStatiBloccanti();return e?e.tooltip:""}(),this.changePopOverState=function(){this.popOverStato=!this.popOverStato,this.popOverStato&&setTimeout(function(){document.getElementsByClassName("popover")[0].style.zIndex=1e9},100)},this.icon=function(){return n.dettaglio.codAreaOperativa==t.areeOperative.prestito?"icona icon ico-vorrei-c-finanziamenti-n":n.dettaglio.codAreaOperativa==t.areeOperative.conto?"icona icon ico-mioprofilo-c-conto-n":"icona icon ico-vorrei-c-carte-n"}(),this.getProducts=function(){return n.dettaglio.descrizioneProdottoBase},this.clickOnRow=function(){this.modifica&&this.dettaglio.eraseable?this.askConfirm():this.isPrestito?this.concludiPrestito():this.isConto&&(n.dettaglio.descrizioneProdottoBase?n.showDetail=!n.showDetail:(this.showError=!1,window.top.GUESTAREA.loading.show(),t.getDettaglioPratiche({idSuperPratica:n.dettaglio.idSuperPratica,codSaup:n.dettaglio.codSaup,stato:n.dettaglio.stato,descStato:n.dettaglio.descStato,codProposta:n.dettaglio.codProposta,scadenza:n.dettaglio.scadenza,codSaupOriginario:n.dettaglio.codSaupOriginario,codAreaOperativa:n.dettaglio.codAreaOperativa,tipologia:n.dettaglio.tipologia,codTipoProposta:n.dettaglio.codTipoProposta,pratiche:n.dettaglio.pratiche}).then(function(e){e&&e.listaPratiche&&e.listaPratiche.length>0?(n.dettaglio.pratiche=e.listaPratiche,_.forOwn(n.dettaglio.pratiche,function(e){var i=function(e,i){return""===i?i+=e.descrizione:"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()?i=e.descrizione+", "+i:i+=", "+e.descrizione,i};e.contrattoQuadro&&"S"===e.contrattoQuadro.toUpperCase()?(n.dettaglio.prodottiBase.push(e),n.dettaglio.descrizioneProdottoBase=i(e,n.dettaglio.descrizioneProdottoBase)):e.modAttivazione&&"O"===e.modAttivazione.toUpperCase()?n.dettaglio.online.push(e):e.modAttivazione&&"F"===e.modAttivazione.toUpperCase()?n.dettaglio.filiale.push(e):(n.dettaglio.prodottiBase.push(e),n.dettaglio.descrizioneProdottoBase=i(e,n.dettaglio.descrizioneProdottoBase))}),n.dettaglio.descrizioneProdottoBase.includes("MyKey")||(n.dettaglio.descrizioneProdottoBase="MyKey, "+n.dettaglio.descrizioneProdottoBase),n.showDetail=!n.showDetail):(n.showError=!0,n.showDetail=!1),window.top.GUESTAREA.loading.hide()})["catch"](function(e){n.showError=!0,n.showDetail=!1,window.top.GUESTAREA.loading.hide()})))},this.prendiAppuntamento=function(){r.appt()},this.concludiPrestito=function(){r.prestito(n.dettaglio.codSaup)},this.completaPratica=function(){utag.view({nomepagina:"guestarea",faseprocesso:"riprendiOffertaCarrello",tipoEvento:"CTA"});var e=_.find(n.dettaglio.prodottiBase,function(e){return"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()}),i=s.profile.info(),t=i.cell?i.cell:null;s.statusguest(t,"01025",i.email,e.idSuperPratica,"XMC_GA").then(function(i){if(i.cellVerified)window.top.GUESTAREA.loading.show(),s.updateUserInfo().then(function(){sp=n.dettaglio,o.$emit("checkOts",sp,e)});else{var t=l({ISFROMCARRELLO:"TRUE",IDSUPERPRATICA:e.idSuperPratica});"APPL"===a.whereami()?window.location.href="/content/vetrina/it/test/registration.html#?"+t:window.location.href="/content/vetrina/it/area-ospiti/privata/certificazione-cellulare.html#?"+t}})["catch"](function(e){$log.error("DBProspect error! ",e),console.log("errore check certificazione")})},this.askConfirm=function(){this.showConfirm=!0},this.showAskConfirm=function(){return this.modifica||(this.showConfirm=!1),this.modifica&&this.showConfirm},this.cancelRemove=function(){this.showConfirm=!1},this.showAlertRemove=function(){utag.view({nomepagina:"guestarea",faseprocesso:"eliminaOffertaCarrello",tipoEvento:"CTA"}),this.openModalAlertEliminaPratica()},this.confirmRemove=function(){this.showConfirm=!1,this.onPreRemove(),this.dettaglio&&s.invokeAuth("app/token/GA_eliminaSuperpratica",{superpratica:{idSuperPratica:n.dettaglio.idSuperPratica,codSaup:n.dettaglio.codSaup,stato:n.dettaglio.stato,descStato:n.dettaglio.descStato,codProposta:n.dettaglio.codProposta,scadenza:n.dettaglio.scadenza,codSaupOriginario:n.dettaglio.codSaupOriginario,codAreaOperativa:n.dettaglio.codAreaOperativa,codCategoriaProdotto:n.dettaglio.codCategoriaProdotto,tipologia:n.dettaglio.tipologia,codTipoProposta:n.dettaglio.codTipoProposta}},!1).then(function(e){e.esitoEliminazione?(n.onPostRemove({idSuperPratica:n.dettaglio.idSuperPratica}),o.$broadcast("SHOW_TOAST_MESSAGES",{name:"carrelloToast",message:"La richiesta di "+n.category+" &egrave; stata eliminata"})):(n.onPostRemove(null),n.openModalEliminaPratica(e))})["catch"](function(e){n.onPostRemove(null),n.openModalEliminaPratica(null)})},this.openModalAlertEliminaPratica=function(){e.open({animation:!0,me:this,templateUrl:"app/vorrei/carrello/carrello-modal-alert-elimina.html",controllerAs:"carrelloModalAlertEliminaCtrl",bindToController:!0,controller:["$scope",function(e){this.elimina=function(){n.confirmRemove()},this.getCategory=function(){return n.getCategoryData()}()}]})},this.openModalEliminaPratica=function(i){e.open({animation:!0,templateUrl:"app/vorrei/carrello/carrello-modal-elimina.html",controllerAs:"carrelloModalEliminaCtrl",bindToController:!0,controller:["vorreiService","$rootScope",function(e,o){var t=this;t.item=i}]})},this.clickOnRow()}]}}),angular.module("guestApp").directive("appuntamento",function(){return{restrict:"E",controllerAs:"appt",bindToController:!0,templateUrl:"app/ricordamidi/appuntamento/appuntamento.html",scope:{dettaglio:"=",modifica:"="},controller:["$uibModal","ricordamidiService","utilsService","gaRouterService","cmbService",function(e,i,o,t,a){function r(){var e=s.appuntamento.dettaglioAppuntamento;return"CMB"==e.tipoServizio||"CMN"==e.tipoServizio?{cognome:e.cognome,dataSel:e.dataSel,descNote:e.descNote,email:e.email.toLowerCase(),fasciaSel:e.fasciaSel,flagEmail:e.flagEmail,flagSMS:e.flagSMS,idAppt:e.idAppt,nome:e.nome,numero:e.numero,tipoServizio:e.tipoServizio}:{cliente:{nome:e.cliente.nome,cognome:e.cliente.cognome,codiceFiscale:e.cliente.codiceFiscale,email:e.cliente.email.toLowerCase(),cell:e.cliente.cell},filiale:{abiFiliale:e.filiale.abi,codiceFiliale:e.filiale.codice,gestoreFiliale:e.filiale.gestore,codPort:e.filiale.codPort,nsg:e.filiale.nsg,gestoreNome:e.filiale.gestoreNome},descArgomento:e.descArgomento,descNote:e.descNote,flagSms:0,flagEmail:0,dataInizioAppuntamento:moment(e.dataInizio).format("YYYY-MM-DD HH:mm"),dataFineAppuntamento:moment(e.dataFine).format("YYYY-MM-DD HH:mm"),token:e.token,dataMacro:e.dataMacro,fasciaOraria:e.fasciaOraria}}var s=this;this.eliminaSelect=!0,this.showDiv=!1,this.ready=!1,this.appuntamento={dettaglioAppuntamento:this.dettaglio,dettaglioFiliale:{}},this.isApptCMB="CMB"==this.appuntamento.dettaglioAppuntamento.tipoServizio,this.isApptCMN="CMN"==this.appuntamento.dettaglioAppuntamento.tipoServizio,this.isTelefonico=this.isApptCMB||this.isApptCMN,this.isEditable=this.isApptCMB&&a.isEditable(this.appuntamento.dettaglioAppuntamento)||!this.isTelefonico,this.isRemovable=this.isTelefonico&&a.isEditable(this.appuntamento.dettaglioAppuntamento)||!this.isTelefonico,this.isTelefonico?(this.tipo="APPUNTAMENTO TELEFONICO",this.isApptCMB&&(this.oraInizio=this.appuntamento.dettaglioAppuntamento.fasciaSel.split(" - ")[0],this.oraFine=this.appuntamento.dettaglioAppuntamento.fasciaSel.split(" - ")[1],this.dettaglio.dataInizio=this.appuntamento.dettaglioAppuntamento.dataSel),this.ready=!0):(this.tipo="APPUNTAMENTO IN FILIALE",i.getFilialeByKey({abi:s.appuntamento.dettaglioAppuntamento.filiale.abi,codiceFiliale:s.appuntamento.dettaglioAppuntamento.filiale.codice}).then(function(e){s.appuntamento.dettaglioFiliale=e,s.ready=!0})["catch"](function(){s.ready=!0})),this.expireThings=o.calculateRemainingDaysAndOtherLittleThings(this.dettaglio.dataInizio),this.expireThings.remainingDaysString=function(){return 0==s.expireThings.remainingDays?"OGGI":s.expireThings.remainingDays>0?"SCADUTA":s.expireThings.remainingDays==-1?"-1 GIORNO":s.expireThings.remainingDays+" GIORNI"}(),this.expireThings.alarm=this.expireThings.remainingDays>=-5,this.expireThings.expirationDateString=(this.expireThings.remainingDays<=0?"Scade":"Scaduta")+" il "+this.expireThings.expireDateFormatted,s.eliminaAppt=function(){this.isApptCMB||this.isApptCMN?a.removeAppuntamento(this.appuntamento.dettaglioAppuntamento.idAppt).then(function(){window.location.reload()})["catch"](function(){s.openModalEliminaAppt(appuntamento)}):i.eliminaAppuntamento(r()).then(function(){window.location.reload()})["catch"](function(){s.openModalEliminaAppt(appuntamento)})},this.openModalAppt=function(e){0==this.modifica&&(this.showDiv=!1,this.open(e))},this.showAskConfirm=function(){return this.modifica||(this.showDiv=!1),this.modifica&&this.showDiv},this.open=function(i){e.open({animation:!0,templateUrl:"app/ricordamidi/appuntamento/appuntamento-modal.html",controllerAs:"appuntamentoModalCtrl",bindToController:!0,controller:["ricordamidiService","$rootScope",function(e,o){if(this.appuntamento=i,this.erroreEliminaApt=!1,this.firstStep=!0,this.blocked=!1,this.argomentiformat="",this.isCMB="CMB"==this.appuntamento.dettaglioAppuntamento.tipoServizio,this.isCMN="CMN"==this.appuntamento.dettaglioAppuntamento.tipoServizio,this.isTelefonico=this.isCMB||this.isCMN,this.isEditable=this.isCMB&&a.isEditable(this.appuntamento.dettaglioAppuntamento)||!this.isTelefonico,this.isRemovable=this.isTelefonico&&a.isEditable(this.appuntamento.dettaglioAppuntamento)||!this.isTelefonico,this.titoloModale=this.isTelefonico?"APPUNTAMENTO TELEFONICO":"APPUNTAMENTO IN FILIALE",this.argomenti=[{argomento:"Conti e carte",acronimo:"CEC"},{argomento:"Investimenti",acronimo:"INV"},{argomento:"Operazioni e pagamenti",acronimo:"OEP"},{argomento:"Assicurazioni",acronimo:"ASS"},{argomento:"Finanziamenti",acronimo:"FIN"},{argomento:"Informazioni varie",acronimo:"INF"}],this.isTelefonico)if(this.numero=this.appuntamento.dettaglioAppuntamento.numero,this.isCMB&&(this.oraInizio=this.appuntamento.dettaglioAppuntamento.fasciaSel.split(" - ")[0],this.oraFine=this.appuntamento.dettaglioAppuntamento.fasciaSel.split(" - ")[1],this.data=moment.unix(this.appuntamento.dettaglioAppuntamento.dataSel/1e3).format("DD.MM.YYYY")),this.descNote=this.appuntamento.dettaglioAppuntamento.descNote,this.arguments=this.appuntamento.dettaglioAppuntamento.argomenti,this.arguments.length>0)for(var s=0;s<this.arguments.length;s++)for(var n=this.arguments[s],l=0;l<this.argomenti.length;l++)this.argomenti[l].acronimo==n&&(""==this.argomentiformat?this.argomentiformat=this.argomentiformat.concat(this.argomenti[l].argomento):this.argomentiformat=this.argomentiformat.concat(", "+this.argomenti[l].argomento));else this.argomentiformat=this.arguments[0];var c=this;this.modifica=function(){e.apptEdit(r())},this.modificaApptTel=function(){t.callMeBack()},this.elimina=function(){this.firstStep=!1},this.eliminaAppt=function(){this.blocked=!0,this.isCMB||this.isCMN?a.removeAppuntamento(this.appuntamento.dettaglioAppuntamento.idAppt).then(function(e){c.$dismiss(),o.$broadcast("ga-navigation","ricordamidi"),c.blocked=!1})["catch"](function(){c.erroreEliminaApt=!0,c.blocked=!1}):e.eliminaAppuntamento(r()).then(function(e){c.$dismiss(),o.$broadcast("ga-navigation","ricordamidi"),c.blocked=!1})["catch"](function(){c.erroreEliminaApt=!0,c.blocked=!1})}}]})},this.openModalEliminaAppt=function(i){e.open({animation:!0,templateUrl:"app/ricordamidi/appuntamento/appuntamento-modal-elimina-appt.html",controllerAs:"appuntamentoModalEliminaApptCtrl",bindToController:!0,controller:["ricordamidiService","$rootScope",function(e,o){var t=this;t.item=i}]})}}]}}),angular.module("guestApp").directive("callmeback",function(){return{restrict:"E",controllerAs:"cmb",bindToController:!0,templateUrl:"app/tools/callmeback/cmb.html",scope:{galleggiante:"="},controller:["$rootScope","$window","$log","cmbService","gaRouterService","utilsService","accountService",function(e,i,o,t,a,r,s){var n=this,l=e;if(this.enableCMB=r.enableCMB(),this.enableCMB){this.initCmb=function(){this.fromgalleggiante=!!this.galleggiante,this.step=1,this.labelBtnContinua="CONTINUA",this.labelBtnAnnullaIndietro="ANNULLA",this.verticalButton=!1,this.showButtonEsito=!1,this.horizontalButton=!1,this.callmebackpersonal=!1,this.modalpersonalclient=!1,this.arguments=[],this.idAppt=null,this.fasce=[],this.fasciaselected="",this.dataselected="",this.nome="",this.cognome="",this.cellulare="",this.email="",this.flagsms=!1,this.flagemail=!1,this.privacy=!1,this.esitook=!0,this.showesito=!1,this.eliminaAppuntamento=!1,this.disabilitabtn=!0,this.btnCliccato="",this.logged=!1;this.argumentsgalleggiante=[],this.datiappuntamento=[],this.appuntamento=!1,this.showappt=!0,this.objAppuntamento=[],this.fasciaselezionata="",this.dataselezionata="",this.fasciagalleggiante="",this.orariovisualizzatoappt=[],this.erroreStorico=!1,this.erroreElimina=!1,this.errhouravailable=!1,this.riepilogo="",this.istoday=!0},this.initCmb(),this.close=function(){n.emptyObject(this.errors),n.step=1,n.verticalButton=!1,n.showesito=!1,n.showButtonEsito=!1,n.appuntamento=!0,n.modalpersonalclient=!1,$("#modal-phone .modal-body > div").show(),$("#modal-phone button.closeModal").click()},$("#modal-phone button.closeModal").click(function(){window.setTimeout(function(){n.initCmb(),n.authGalleggiante()},300)}),this.manageSuspect=function(){var e=s.auth&&s.auth.isLogged();e||a.loginFromCMB()},this.errors={argumentsVuoto:!1,argumentsMaxNumber:!1,argumentsVuotoGalleggiante:!1,arguments:!1,fasceVuoto:!1,fasciaNonDisponibile:!1,fasce:!1,nomeVuoto:!1,nome:!1,cognomeVuoto:!1,cognome:!1,cellulareVuoto:!1,cellulare:!1,email:!1,flagSmsEmail:!1,privacy:!1},this.argomenti=[{argomento:"Conti e carte",selezionato:!1,acronimo:"CEC"},{argomento:"Investimenti",selezionato:!1,acronimo:"INV"},{argomento:"Operazioni e pagamenti",selezionato:!1,acronimo:"OEP"},{argomento:"Assicurazioni",selezionato:!1,acronimo:"ASS"},{argomento:"Finanziamenti",selezionato:!1,acronimo:"FIN"},{argomento:"Informazioni varie",selezionato:!1,acronimo:"INF"}],this.InitAppointment=function(e){n.idAppt=e.idAppt?e.idAppt:null,n.argumentsgalleggiante=e.argomenti?e.argomenti:"",n.email=e.email?e.email:"",n.fasciaselezionata=e.fasciaSel?e.fasciaSel:"",n.dataselezionata=e.dataSel?e.dataSel:"",n.cellulare=e.numero?e.numero:"",n.flagsms=e.flagSMS?e.flagSMS:"",n.flagemail=e.flagEmail?e.flagEmail:""},this.authGalleggiante=function(){if(this.logged=s.auth.isLogged(),this.callmebackpersonal=r.isPurchaseProcess(),this.logged){var e=s.profile.info();this.cellulare=e.cell?e.cell:"",this.cellulare="00"==this.cellulare.substring(0,2)?this.cellulare.substring(4):this.cellulare,this.email=e.email?e.email:"",this.cognome=e.cognome?e.cognome:"",this.nome=e.nome?e.nome:""}else!this.logged&&this.fromgalleggiante?(this.step=1,this.horizontalButton=!1,this.verticalButton=!1,this.showButtonEsito=!1):this.initCmb()},this.authGalleggiante(),e.$on("isPersonalClient",function(e,i){"isPersonalClient"===e.name&&n.isPersonalClient(i)}),this.isPersonalClient=function(e){switch(this.modalpersonalclient=!!this.callmebackpersonal,this.modificaNumero=!1,e){case!0:this.modalpersonalclient=!0,this.horizontalButton=!1,this.verticalButton=!1;break;case"next":var i={};i.idAppt=this.idAppt?this.idAppt:null,i.nome=this.nome?this.nome:"",i.cognome=this.cognome?this.cognome:"",i.argomenti=this.argumentsgalleggiante?this.argumentsgalleggiante:"",i.numero=this.cellulare?this.cellulare:"",i.email=this.email?this.email:"",i.flagSMS=this.flagsms?this.flagsms:"",i.flagEmail=this.flagemail?this.flagemail:"",t.checkHourAvailable(i).then(function(e){t.callMeNow(i).then(function(e){n.step=6,n.horizontalButton=!1,n.verticalButton=!1,n.showesito=!0,n.esitook=!0,n.labelBtnContinua="OK",n.showButtonEsito=!0,n.modalpersonalclient=!1})["catch"](function(e){setTimeout(function(){n.step=6,n.horizontalButton=!1,n.verticalButton=!1,n.showesito=!0,n.esitook=!1,n.labelBtnContinua="RIPROVA",n.showButtonEsito=!0,n.modalpersonalclient=!1},500)})})["catch"](function(e){setTimeout(function(){window.scrollTo(0,0)},500),n.step=6,n.horizontalButton=!0,n.verticalButton=!1,n.showesito=!0,n.esitook=!1,n.errhouravailable=!0,n.erroreStorico=!1,n.erroreElimina=!1});break;case"back":this.modalpersonalclient=!1,this.horizontalButton=!0,this.verticalButton=!1,this.labelBtnContinua="SCEGLI DATA E ORA",this.labelBtnAnnullaIndietro="INDIETRO",this.modificaNumero=!!this.cellulare}},!this.fromgalleggiante&&s.auth.isLogged()&&t.getAppuntamentoAttivo(!0).then(function(e){if(e){n.datiappuntamento=e,n.idAppt=e.idAppt,n.nome=e.nome,n.cognome=e.cognome,n.cellulare=e.numero,n.flagsms=!0,n.flagemail=!1;var i=!0;n.istoday=moment(e.dataSel).isSame(moment().startOf("day"))}else{n.datiappuntamento=[],n.idAppt=null;var i=!1;n.istoday=!0}l.$emit("valorizzazioneCampi",n.datiappuntamento,i)})["catch"](function(e){n.datiappuntamento=[],n.idAppt=null,l.$emit("valorizzazioneCampi",n.datiappuntamento,privacy)}),this.emptyObject=function(e){for(var i in e)_.isEqual(e[i],!0)&&(e[i]=!1)},this.btnContinua=function(){l.$emit("checkForErrors");var e=!1;if(_.forOwn(n.errors,function(i){if(i)return e=!0,!1}),e)setTimeout(function(){window.scrollTo(0,0)},500),this.disabilitabtn=!1;else{this.disabilitabtn=!0;var i={};if(i.idAppt=this.idAppt?this.idAppt:null,i.argomenti=this.arguments,this.argomentiformat="",this.arguments.length>0)for(var o=0;o<this.arguments.length;o++)for(var a=this.arguments[o],r=0;r<this.argomenti.length;r++)this.argomenti[r].acronimo==a&&(""==this.argomentiformat?this.argomentiformat=this.argomentiformat.concat(this.argomenti[r].argomento):this.argomentiformat=this.argomentiformat.concat(", "+this.argomenti[r].argomento));else this.argomentiformat=this.arguments[0];i.dataSel=this.fasciaselected[3],i.fasciaSel=this.fasciaselected[0]+" - "+this.fasciaselected[1],i.nome=this.nome,i.cognome=this.cognome,i.numero=this.cellulare,i.email=this.email,i.flagSMS=!this.istoday,i.flagEmail=!1,this.dataselected=moment(i.dataSel).format("dddd D MMMM YYYY"),t.callMeBack(i).then(function(){setTimeout(function(){window.scrollTo(0,0)},500),n.disabilitabtn=!1,n.showesito=!0,n.esitook=!0})["catch"](function(e){setTimeout(function(){window.scrollTo(0,0)},500),n.disabilitabtn=!1,n.showesito=!0,n.esitook=!1})}},l.$on("gestioneAppuntamento",function(e,i){"gestioneAppuntamento"===e.name&&(n.btnCliccato=i.btnCliccato,_.isEqual(n.btnCliccato,"delAppt")?t.removeAppuntamento(n.idAppt).then(function(){n.initCmb(),n.authGalleggiante(),setTimeout(function(){n.close()},100)})["catch"](function(e){n.showappt=!1,n.step=6,n.verticalButton=!1,n.showButtonEsito=!0,n.labelBtnContinua="RIPROVA",n.showesito=!0,n.esitook=!1,n.erroreElimina=!0}):_.isEqual(n.btnCliccato,"richiamiamoNoi")?(n.showappt=!1,n.emptyObject(n.errors),n.btnContinuaGalleggiante()):(n.step=1,n.btnContinuaGalleggiante()))}),this.parseFasciaSelected=function(e){if(_.isObject(e)){if("CMB"==e.tipoServizio){var i=moment(e.dataSel).format("D MMMM"),o=e.fasciaSel;o=o.split(" - ")}else{var i=moment().format("D MMMM"),o=[];o[0]=moment().format("HH"),o[1]=moment().add(1,"hours").format("HH")}return this.informazione=[],this.informazione.ora=o,this.informazione.giorno=i,this.informazione}},e.$on("reloadAppuntamento",function(e,i){"reloadAppuntamento"===e.name&&(i?(n.appuntamento=!0,n.showappt=!0,n.idAppt=i.idAppt,n.argumentsgalleggiante=i.argomenti,n.email=i.email,n.orariovisualizzatoappt=n.parseFasciaSelected(i),n.fasciaselezionata=i.fasciaSel,n.dataselezionata=i.dataSel,n.cellulare=i.numero,n.flagsms=!0,n.flagemail=!1,n.objAppuntamento=i):(n.appuntamento=!1,n.showappt=!1,n.argumentsgalleggiante=[],n.objAppuntamento=null),n.verticalButton=!1)}),e.$on("erroreStorico",function(e){"erroreStorico"===e.name&&(n.appuntamento=!1,n.showappt=!1,n.argumentsgalleggiante=[],n.objAppuntamento=null,n.step=6,n.verticalButton=!1,n.showButtonEsito=!0,n.labelBtnContinua="RIPROVA",n.showesito=!0,n.esitook=!1,n.erroreStorico=!0)});var c=function(e){for(var i=e.argomenti.length,o=0;o<i;o++){var t=e.argomenti[o];"CEC"==t?n.riepilogo+="Conti e carte":"OEP"==t?n.riepilogo+="Operazioni e pagamenti":"INV"==t?n.riepilogo+="Investimenti":"FIN"==t?n.riepilogo+="Finanziamenti":"ASS"==t?n.riepilogo+="Assicurazioni":n.riepilogo+="Informazioni varie",o<i-1&&(n.riepilogo+=", ")}};this.btnContinuaGalleggiante=function(){l.$emit("step"+this.step);var e=!1;if(_.forOwn(n.errors,function(i){if(i)return e=!0,!1}),!e){var i={};i.idAppt=this.idAppt?this.idAppt:null,i.argomenti=this.argumentsgalleggiante,i.dataSel=this.dataselezionata?this.dataselezionata:this.fasciagalleggiante[3],i.fasciaSel=this.fasciagalleggiante[0]+" - "+this.fasciagalleggiante[1],i.nome=this.nome,i.cognome=this.cognome,i.numero=this.cellulare,i.email=this.email,i.flagSMS=!this.istoday,i.flagEmail=!1,this.esitook?_.isEqual(this.step,5)?setTimeout(function(){o.info(i),n.close()},500):4==this.step?t.callMeBack(i).then(function(){n.callmebackpersonal=!1,n.showesito=!0,n.esitook=!0,n.showButtonEsito=!0,n.labelBtnContinua="OK",c(i),n.step++,n.nextStepGalleggiante(n.step,i)})["catch"](function(e){n.callmebackpersonal=!1,n.showesito=!0,n.esitook=!1,n.showButtonEsito=!0,n.labelBtnContinua="RIPROVA",n.riepilogo="",n.step++,n.nextStepGalleggiante(n.step,i)}):(this.step++,this.nextStepGalleggiante(this.step,i)):(this.step=2,this.esitook=!0,this.showesito=!1,this.showButtonEsito=!1,this.nextStepGalleggiante(this.step,i))}},this.btnAnnulla=function(){a.ricordamidi()},this.nextStepGalleggiante=function(e,i){switch(this.step){case 1:break;case 2:this.verticalButton=!0,this.labelBtnContinua="CONTINUA",this.labelBtnAnnullaIndietro="ANNULLA";break;case 3:this.horizontalButton=!0,this.verticalButton=!1,this.labelBtnContinua="SCEGLI DATA E ORA",this.labelBtnAnnullaIndietro="INDIETRO";break;case 4:this.horizontalButton=!1,this.verticalButton=!0,this.labelBtnContinua="CONTINUA",this.labelBtnAnnullaIndietro="INDIETRO";break;case 5:this.horizontalButton=!1,this.verticalButton=!1}},this.btnAnnullaIndietroGalleggiante=function(){switch(this.step){case 1:$("#modal-phone .modal-body > div").show();break;case 2:this.emptyObject(this.errors),this.authGalleggiante(),this.appuntamento=!!this.showappt,this.InitAppointment(this.objAppuntamento),this.verticalButton=!1,this.step--,$("#modal-phone .modal-body > div").show();break;case 3:this.emptyObject(this.errors),this.horizontalButton=!1,this.verticalButton=!0,this.labelBtnAnnullaIndietro="ANNULLA",this.labelBtnContinua="CONTINUA",this.step--;break;case 4:this.emptyObject(this.errors),this.horizontalButton=!0,this.verticalButton=!1,this.labelBtnAnnullaIndietro="INDIETRO",this.labelBtnContinua="SCEGLI DATA E ORA",this.step--;break;case 5:this.dataselezionata=this.fasciagalleggiante?moment(this.fasciagalleggiante[3],"dddd D MMMM YYYY").valueOf():"",this.fasciaselezionata=this.fasciagalleggiante?this.fasciagalleggiante[0]+" - "+this.fasciagalleggiante[1]:"",this.emptyObject(this.errors),this.horizontalButton=!1,this.verticalButton=!0,this.labelBtnAnnullaIndietro="ANNULLA",this.labelBtnContinua="CONTINUA",this.step--}},this.btnNewAppt=function(){this.emptyObject(this.errors),this.showesito=!1,this.esitook=!0,this.errhouravailable=!1,this.step=3,this.modalpersonalclient=!1,this.horizontalButton=!0,this.verticalButton=!1,this.labelBtnContinua="SCEGLI DATA E ORA",this.labelBtnAnnullaIndietro="INDIETRO"}}}]}}),angular.module("guestApp").directive("ripresaDeeplink",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{idPratica:"@",idSuperpratica:"@",tokenJwt:"@"},templateUrl:"app/cms_components/ripresaDeeplink/ripresaDeeplink.html",controller:["utilsService","accountService","vorreiService","$window",function(e,i,o,t){var a=this;this.disabledButton=!0,this.maskedCell="",this.prefisso="",this.listaPratiche=[],this.superpratica={pratiche:[{idSuperPratica:a.idSuperpratica,idPratica:a.idPratica}]},this.pageLoaded=!1,this.erroreGenerico=!1,this.errore5=!1,this.errore6=!1,this.erroreCodiceOts=!1,this.erroreCodiceOtsNonValido=!1,this.codiceOts="",this.statiPraticheValide=["100","377","379","397","400","401","422","424","429","430","431","1585","1586","974"],this.statoErrore6=["827","371","369","410","408","405"],this.captchaKey;var r=function(e){return e.replace(/[^\d\*]/g,"").substr(0,3).replace(/\d/g,"*")+" "+e.replace(/[^\d\*]/g,"").substr(3,4).replace(/\d/g,"*")+e.substr(7)};this.createNewToken=function(){window.top.GUESTAREA.loading.show(),grecaptcha.ready(function(){window.location.host.toUpperCase().indexOf("LOCALHOST")>=0?this.captchaKey="6LdbLMcUAAAAABaZng0rq1hH5exrhIteQRgii6hE":this.captchaKey="6LeayMgUAAAAAF6WZOe49B1YNngogGTQJktqCxTk",grecaptcha.execute(this.captchaKey,{action:"area_login"}).then(function(e){window.sessionStorage.setItem("token",JSON.stringify(e)),s(e)})})};var s=function(e){console.debug("calling switchToken"),i.switchToken(a.tokenJwt,e).then(function(e){console.log(e),a.checkPratiche()})["catch"](function(e){"SESSION_EXPIRED"==e?(a.errore5=!0,l("linkNonValido"),n()):(a.erroreGenerico=!0,l("problemaTecnico"),n()),window.top.GUESTAREA.loading.hide()})};this.checkPratiche=function(){o.getDettaglioPratiche(a.superpratica).then(function(e){a.listaPratiche=e.listaPratiche;var o=a.listaPratiche[0].stato;a.statoErrore6.includes(o)?(a.errore6=!0,l("richiestaGiaAperta"),i.logout(),window.top.GUESTAREA.loading.hide(),n()):a.statiPraticheValide.includes(o)?a.inviaOts():(a.errore5=!0,l("linkNonValido"),i.logout(),window.top.GUESTAREA.loading.hide(),n())})["catch"](function(e){console.debug("getPraticheDeeplink failed",e),i.logout(),window.top.GUESTAREA.loading.hide(),a.erroreGenerico=!0,l("problemaTecnico"),n()})},i.auth.isLogged()?(window.top.GUESTAREA.loading.show(),a.checkPratiche()):this.createNewToken(),this.inviaOts=function(){t.localStorage.setItem("isFromDem","true");var e=i.profile.info();a.maskedCell=e.cell?r(e.cell):"",a.prefisso=e.prefisso?e.prefisso:"+39",i.OTS.invia().then(function(){a.pageLoaded=!0,l("riprendiIlProcesso"),window.top.GUESTAREA.loading.hide(),n()})["catch"](function(e){console.debug("send ots code ERROR",e),a.pageLoaded=!0,l("riprendiIlProcesso"),window.top.GUESTAREA.loading.hide(),
n()})},this.resetOtsErrors=function(){console.debug("DEEPLINK -  resetOtsErrors CALLED"),this.erroreCodiceOts=!1,this.erroreCodiceOtsNonValido=!1},this.checkOtsFunction=function(){console.debug("DEEPLINK -  checkOtsFunction CALLED"),a.disabledButton=!0,e.isValidOts(this.codiceOts)?(this.erroreCodiceOts=!1,a.disabledButton=!1):(this.erroreCodiceOts=!0,n()),this.erroreCodiceOtsNonValido=!1},this.checkOtsFunctionChange=function(){a.disabledButton=!0,e.isValidOts(this.codiceOts)&&(this.erroreCodiceOts=!1,a.disabledButton=!1),this.erroreCodiceOtsNonValido=!1},this.bottoneConferma=function(){console.debug("DEEPLINK -  bottoneConferma CLICKED"),this.erroreCodiceOtsNonValido=!1,console.debug("DEEPLINK -  VERIFICA CALLED..."),i.OTS.verifica(this.codiceOts).then(function(){console.debug("DEEPLINK -  VERIFICA CALLED OK"),a.goToAnagrafica()})["catch"](function(e){a.erroreCodiceOtsNonValido=!0,n(),console.debug("verify ots code ERROR",e)})},this.goToAnagrafica=function(){window.top.location.href="/it/persone-e-famiglie/prodotti/conti-e-libretti/conto-perme/contocorrenteself.html#?ID_PRATICA="+a.idPratica+"&ID_SUPERPRATICA="+a.idSuperpratica+"&OTS=S"};var n=function(){setTimeout(function(){var e=document.querySelector("#ripresaDeeplink").offsetHeight+90;window.top.document.querySelector(".ifrmAreaFull").style.height=e+"px"},100)},l=function(e){setTimeout(function(){utag.view({nomepagina:"ccsccontoxmeripr",faseprocesso:e,tipoEvento:"NAVIGAZIONE"})},300)}}]}}),angular.module("guestApp").directive("guestareaToolbar",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{page:"@",badgeCount:"="},templateUrl:"app/cms_components/toolbar/toolbar.html",controller:["accountService","$rootScope","$scope",function(e,i,o){this.buttonSelected=this.page,this.ricordamidi=function(){i.$broadcast("ga-navigation","ricordamidi")},this.vorrei=function(){i.$broadcast("ga-navigation","vorrei")},this.manageMouseHover=function(e){0==e?(angular.element("#ga_ricordami_icon").removeClass("icona"),angular.element("#ga_ricordami_icon").addClass("icona-attiva")):1==e&&(angular.element("#ga_vorrei_icon").removeClass("icona"),angular.element("#ga_vorrei_icon").addClass("icona-attiva"))},this.manageMouseLeave=function(e){0==e&&"ricordamidi"!=this.buttonSelected?(angular.element("#ga_ricordami_icon").removeClass("icona-attiva"),angular.element("#ga_ricordami_icon").addClass("icona")):1==e&&"vorrei"!=this.buttonSelected&&(angular.element("#ga_vorrei_icon").removeClass("icona-attiva"),angular.element("#ga_vorrei_icon").addClass("icona"))}}]}}),angular.module("guestApp").directive("xmeGaRegistrazione",function(){return{restrict:"E",controllerAs:"ctrl",scope:{},bindToController:{tipoOpe:"@",uuid:"@"},templateUrl:"app/cms_components/xmeGaRegistrazione/xmeGaRegistrazione.html",controller:["$q","$timeout","$window","accountService","$uibModal","utilsService","gaRouterService","$location","$log","$rootScope","vcRecaptchaService",function(e,i,o,t,a,r,s,n,l,c,d){var p=this;this.from="CJCONTI",this.currentStep=-1,this.emailClienteStep1="",this.bottoneDisabilitatoStep1=!1,this.bottoneDisabilitatoStep2=!1,this.privacy=0,this.savedPrivacy=!1,this.erroreEmail=!1,this.erroreEmailVuota=!1,this.erroreNome=!1,this.erroreCognome=!1,this.erroreNomeVuoto=!1,this.erroreCognomeVuoto=!1,this.erroreCF=!1,this.erroreCFVuoto=!1,this.erroreRadioConsenso=!1,this.erroreCodiceInvalidKey=!1,this.erroreCodiceLogin5=!1,this.erroreCodiceLogin4=!1,this.erroreCodiceMaxTry=!1,this.erroreCodiceLogin9=!1,this.genericErrorExecution=!1,this.genericErrorSimulation=!1,this.errorReCaptcha=!1,this.errorCaptchaTimeout=!1,this.flagAccettoConsenso=0,this.flagNegoConsenso=0,this.captchaKey,this.recaptcha,this.widgetID,this.gRecaptchaResponse="",this.erroregRecaptchaResponse=!1,this.giaRegistrato=!1,this.giaCliente=!1,this.otsId="",this.trxots="",this.nome="",this.cognome="",this.email="",this.cf="",this.disableContinua=!1,this.position="top",this.erroreCodConferma=!1,this.erroreCodConfermaVuoto=!1,this.showPopover=!1,this.disableStep1=!0,this.disableStep2=!0,this.erroreMancatoConsenso=!1,this.showPwd=!1,this.ariaLabelPassword="MOSTRA PASSWORD",this.pswMessageAriaLabel="mostra codice inserito",this.erroreCheckUser=!1,this.erroreSalvaProposta=!1;var m="token";this.visible=!0,this.goBackToOfferPage=!1,this.campiValidi=!1,this.disableStep3=!0,this.visualizzaInviaDiNuovo=!1,this.disableContinua2=!1,this.codiceFiscale="",this.codiceFiscaleFromInfo="",this.erroreCodiceFiscale=!1,this.erroreCodiceFiscaleVuoto=!1,this.erroreCodiceFiscaleLunghezza=!1,this.erroreCodiceFiscaleMinore=!1,this.codiceFiscaleOk=!1,this.cellulare="",this.erroreCellulare=!1,this.erroreCellulareVuoto=!1,this.cellulareOk=!1,this.erroreCellulareText="Il numero di cellulare deve essere composto da 9 a 10 caratteri numerici. Per favore, verifica e riprova.",this.codiceSms="",this.erroreCodiceSmsVuoto=!1,this.erroreCodiceSmsLunghezza=!1,this.cancellaCell=!1,this.lengthCell=10,this.disableApri=!0,this.openDropdown=!1,this.idSuperPratica="",this.tokenId="",this.eseguito="",this.cellVerified="",this.emailVerified="",this.previouslyCellVerified="",this.isLogged=t.auth.isLogged(),this.errorGeneric=!1,this.errorFaccinaGialla=!1,this.error401OTSErrato=!1,this.errorFrodatore=!1,this.errore3OTS=!1,this.errorCFWrong=!1,this.errorUpdateGeneric=!1,this.codiceOK=!1,this.isFromCarrello=!1,this.maskedCellulare="",this.checkPopover1=!1,this.checkPopover2=!1,this.error429=!1,this.error504=!1,this.error409=!1,this.nazioni=[],this.prefissiInternazionali=[],this.prefissiInternazionaliTemp=[],this.selectedPrefisso="+39",this.showAlertBannerCellEstero=!1,this.originUpdateGuest={registraExecution:"registraExecution",certify:"certify",modifyUser:"modifyUser"},this.disableEmailField=!1,this.disableUserField=!1,this.checkOts=!1,this.richiestaCodice=!1,this.erroreCodiceOtsVuoto=!1,this.erroreCodiceOts=!1,this.erroreCodiceOtsNonValido=!1,this.bottoneDisabilitato=!1,this.superPratica="",this.pratica="",this.CMS={},angular.element(o).on("resize",function(){c.$broadcast("xme_ga_currentStep")}),$(window).resize(function(){c.$broadcast("xme_ga_currentStep")}),this.cmsText={},t.signup.getCmsContent({placeholder:"contocorrenteselfdisp"},"GA_INCAPSULATA").then(function(e){this.cmsText||(this.cmsText={}),this.cmsText.certificaCellulare=e&&e.CMS_CERTIFICA_CELLULARE&&e.CMS_CERTIFICA_CELLULARE.messages?e.CMS_CERTIFICA_CELLULARE.messages[0].value:"",this.cmsText.inserisciCodiceSms=e&&e.CMS_INSERISCI_CODICE_SMS&&e.CMS_INSERISCI_CODICE_SMS.messages?e.CMS_INSERISCI_CODICE_SMS.messages[0].value:""})["catch"](function(e){l.error("CMS ERRORE",e),console.debug("XME TARGET FLOW -  resendCode CALLED KO")}),this.resetOts=function(){console.debug("XME TARGET FLOW -  resetOts CALLED"),this.resetOtsErrors(),this.codiceOts=""},this.resetOtsErrors=function(){console.debug("XME TARGET FLOW -  resetOtsErrors CALLED"),this.erroreCodiceOtsVuoto=!1,this.erroreCodiceOts=!1},this.checkOtsFunction=function(){console.debug("XME TARGET FLOW -  checkOtsFunction CALLED"),this.resetOtsErrors(),this.codiceOts?r.isValidOts(this.codiceOts)?(this.erroreCodiceOts=!1,this.erroreCodiceOtsVuoto=!1):(this.erroreCodiceOts=!0,this.erroreCodiceOtsVuoto=!1):(this.erroreCodiceOtsVuoto=!0,this.erroreCodiceOts=!1),p.changeStep(),this.erroreCodiceOtsNonValido=!1},this.verificaPraticheInvolo=function(){var e=this,i=t.profile.info(),o={codAbi:"01025",idSuperpratica:"0",codFiliale:"",cf:e.codiceFiscale,idProspect:i.idProspect||i.ndgProspect||""};return t.verificaSuperpratica(o,"GA_INCAPSULATA")},this.bottoneConferma=function(){console.debug("XME TARGET FLOW -  bottoneConferma CLICKED"),this.checkOtsFunction(),this.erroreCodiceOts===!1&&this.erroreCodiceOtsVuoto===!1&&(this.bottoneDisabilitato=!0,this.erroreCodiceOtsNonValido=!1,console.debug("XME TARGET FLOW -  VERIFICA CALLED..."),t.OTS.verifica(this.codiceOts).then(function(){if(p.checkOts=!1,p.bottoneDisabilitato=!1,console.debug("XME TARGET FLOW -  VERIFICA CALLED OK"),console.debug("XME TARGET FLOW -  CALLING SALVA PROPOSTA TARGET"),p.isFromCarrello&&p.idSuperPratica)console.debug("XME TARGET FLOW - FROM CARRELLO changing to step 2 with idSuperpratica: ",p.idSuperPratica),p.goToAnagrafica(p.idSuperPratica);else{console.debug("XME TARGET FLOW - NOT FROM CARRELLO --> CALLING SALVA PROPOSTA TARGET");var e=t.profile.info(),i=e.idProspect||e.ndgProspect||"",a={};a.idProspect=e.idProspect||e.ndgProspect||"",a.cf=p.codiceFiscale,a.nome=p.nome,a.cognome=p.cognome,a.email=p.email,p.verificaPraticheInvolo().then(function(e){e.idSuperpratica?o&&o.parent&&o.parent.openPraticheInvolo?o.parent.openPraticheInvolo(e.idSuperpratica,e.codStato,a):o&&o.parent&&o.parent.parent&&o.parent.parent.openPraticheInvolo&&o.parent.parent.openPraticheInvolo(e.idSuperpratica,e.codStato,a):p.salvaProposta(i,p.codiceFiscale,p.cellulare,p.nome,p.cognome,p.email,p.selectedPrefisso)})["catch"](function(e){l.error("error calling recuperaSuperpratica",e),p.salvaProposta(i,p.codiceFiscale,p.cellulare,p.nome,p.cognome,p.email,p.selectedPrefisso)})}})["catch"](function(e){p.erroreCodiceOtsNonValido=!0,p.bottoneDisabilitato=!1,p.erroreCodiceOtsVuoto=!1,l.error("verify ots code ERROR",e),console.debug("XME TARGET FLOW -  VERIFICA CALLED KO"),p.changeStep()}))},window.onmessage=function(e){if("salvaSuperPratica"==e.data){var i=t.profile.info(),o=i.idProspect||i.ndgProspect||"";p.salvaProposta(o,p.codiceFiscale,p.cellulare,p.nome,p.cognome,p.email,p.selectedPrefisso)}},this.resendCode=function(){console.debug("XME TARGET FLOW -  resendCode CALLED"),w("ccscconfiguratore","certificaCellulareNuovoOts","CTA"),this.richiestaCodice=!0,t.OTS.invia().then(function(){p.richiestaCodice=!1,console.debug("XME TARGET FLOW -  resendCode CALLED OK")})["catch"](function(e){p.richiestaCodice=!1,p.erroreCodiceOts=!0,p.erroreCodiceOtsVuoto=!1,l.error("send ots code ERROR",e),console.debug("XME TARGET FLOW -  resendCode CALLED KO")})},this.bottoneAnnulla=function(){this.bottoneDisabilitato=!1,this.checkOts=!1,window.top.location.href="/it/area-ospiti/privata/landing-ga.html"},c.$on("checkOtsXme",function(e){console.debug("XME TARGET FLOW -  checkOtsXme FLOW START"),"checkOtsXme"===e.name&&0==p.checkOts&&(console.debug("XME TARGET FLOW -  checkOtsXme FLOW - INVIO OTS..."),i(function(){t.OTS.invia().then(function(){p.richiestaCodice=!1,window.top.GUESTAREA.loading.hide(),setTimeout(function(){window.top.scrollTo(0,0),p.changeStep(-1)},1e3),p.checkOts=!0,w("ccscconfiguratore","verificaCellulare","NAVIGAZIONE"),console.debug("XME TARGET FLOW -  checkOtsXme FLOW - INVIO OTS OK")})["catch"](function(e){p.richiestaCodice=!1,window.top.GUESTAREA.loading.hide(),p.checkOts=!0,setTimeout(function(){p.changeStep()},1e3),l.error("send ots code ERROR",e),console.debug("XME TARGET FLOW -  checkOtsXme FLOW - INVIO OTS KO")})},400))});var u=function(e){var i={};return window.top.location.hash.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,o,t){i[o]=t}),e?i[e]:i};if(i(function(){p.changeStep(0)},400),c.$on("xme_ga_goToStep",function(e,i){"xme_ga_goToStep"===e.name&&null!=i&&c.$apply(function(){p.changeStep(i)})}),c.$on("xme_ga_currentStep",function(e,i){p.goBackToOfferPage=!1,"xme_ga_currentStep"===e.name&&null!=i&&(0===i&&p.currentStep>0&&(p.goBackToOfferPage=!0,p.gRecaptchaResponse=null),p.currentStep=i)}),this.changeStep=function(e,i,o){c.$broadcast("xme_ga_currentStep",e,i,o),this.setShowPopover(!1)},this.step2={title:"Ti abbiamo inviato una password al tuo indirizzo e-mail",text1:"Controlla la tua casella di posta ",text2:" ed inserisci la password che ti abbiamo inviato."},this.info={titolo:"Consenso dell'interessato al trattamento dei dati personali",intestazione:"Abbiamo aggiornato i Termini di Servizio e l'informativa sulla Privacy di Intesa Sanpaolo per fornirti maggiore trasparenza sui dati che raccogliamo su di te e su come vengono usati, nonché sui diritti che puoi esercitare sui tuoi dati personali.",presaVisione:"Dichiaro di aver preso visione del documento",visDocumento:"Informativa privacy",corpoP1:"Tenuto conto dell'Informativa resami ai sensi dell'art. 13 e 14 del GDPR, prendo atto del trattamento dei miei dati personali effettuato per le finalità descritte in informativa, alle lettere b), c) e d) della Sezione 7 “Su quali basi si fondano i trattamenti che effettuiamo? Per quali finalità trattiamo i tuoi dati?”.Inoltre, con riferimento al trattamento per la finalità di marketing diretto ed indiretto, di cui alla lettera a) della Sezione 7 dell'informativa,",corpoP2:"al trattamento dei dati personali a fini di informazione commerciale, offerte dirette, indagini di mercato o di customer satisfaction relative a prodotti e servizi della Banca e di società del Gruppo Intesa Sanpaolo. Con riferimento agli interessati già clienti, la presente espressione di consenso non sostituisce i consensi precedentemente espressi in forza dei rapporti intercorrenti con la Banca. Detti consensi possono essere modificati presso qualunque Filiale o sul sito internet. ",consenso:"Presto il consenso",dissenso:"Nego il consenso",errore:"Campo obbligatorio: seleziona la casella per proseguire",valoreConsenso:"Si",valoreDissenso:"No",popover:"Compila i campi obbligatori per proseguire",popoverVerifica:"Inserisci il codice per proseguire",mancatoConsenso:"Dichiara di aver preso visione del documento per procedere",erroreTecnico:"Ci scusiamo, a causa di un problema tecnico la tua richiesta non è andata a buon fine. Riprova più tardi.",erroreRecaptcha:"Non siamo riusciti a salvare le tue informazioni.\n Ti invitiamo a riprovare.",popoverCell:"E' il numero di telefono che useremo come contatto per inviarti il codice di sicurezza per proseguire con l'apertura del conto",popoverCodice:"E' il codice di sicurezza di 6 cifre che hai ricevuto al numero di cellulare appena inserito",errore3OTS:"Il codice inserito non è corretto e al momento non puoi proseguire con l'apertura online del conto.\n Per maggiori informazioni contattaci al numero verde 800.303.303.",errorFrodatore:"Siamo spiacenti ma, in base alle informazioni in nostro possesso, sembra che il tuo profilo non soddisfi tutte le condizioni necessarie per proseguire con la richiesta di apertura del XME Conto online.",errorUpdateGeneric:"Si è verificato un errore. Riprova più tardi.",errore504:"Si è verificato un errore durante la richiesta del codice. Per favore, clicca nuovamente su RICHIEDI CODICE VIA SMS per proseguire con la certificazione del numero di cellulare.",erroreFaccinaGiallaTitle:"Sessione scaduta",erroreFaccinaGiallaSubTitle:"La sessione si è interrotta per inattività. \n Ricarica la pagina per continuare."},this.isLogged){var g=angular.element(document.getElementsByName("radio_consenso"))[0],v=angular.element(document.getElementsByName("radio_dissenso"))[0],h=u();p.isFromCarrello="TRUE"===h.ISFROMCARRELLO,h.IDSUPERPRATICA&&(p.idSuperPratica=h.IDSUPERPRATICA),h.UUID&&(p.uuid=h.UUID);var f=t.profile.info();f.email&&""!=f.email&&(this.disableEmailField=!0),f.nome&&""!=f.nome&&f.cognome&&""!=f.cognome&&f.codiceFiscale&&""!=f.codiceFiscale&&(this.disableUserField=!0),f.nome&&(p.nome=f.nome.charAt(0).toUpperCase()+f.nome.slice(1).toLowerCase()),f.cognome&&(p.cognome=f.cognome.charAt(0).toUpperCase()+f.cognome.slice(1).toLowerCase()),p.email=f.email,p.cellulare=f.cell,p.codiceFiscaleFromInfo=f.codiceFiscale,p.codiceFiscale=f.codiceFiscale;var b=null;try{b=window.localStorage.getItem("CODICE_FISCALE_GA")}catch(C){b=null}if((!p.codiceFiscaleFromInfo||""==p.codiceFiscaleFromInfo)&&b){p.codiceFiscaleFromInfo=b,p.codiceFiscale=b;try{window.localStorage.removeItem("CODICE_FISCALE_GA")}catch(C){}}p.prefisso=f.prefisso,p.selectedPrefisso=f.prefisso?f.prefisso:"+39",p.savedPrivacy=f.flagPrivacy,f&&f.flagPrivacy&&g&&(1==f.flagPrivacy?(p.privacy=1,p.flagAccettoConsenso=1,g.checked=!0,p.flagNegoConsenso=0,v.checked=!1):(p.flagAccettoConsenso=0,g.checked=!1,p.flagNegoConsenso=1,v.checked=!0,p.privacy=2)),o&&o.parent&&o.parent.showDocumentiTrasparenza?o.parent.showDocumentiTrasparenza(!0):o&&o.parent&&o.parent.parent&&o.parent.parent.showDocumentiTrasparenza&&o.parent.parent.showDocumentiTrasparenza(!0),p.maskedCellulare=f.cell?f.cell.substring(7):"",f.cell?p.cellulareOK=!0:"",f.codiceFiscale?p.codiceFiscaleOk=!0:"",p.isFromCarrello&&i(function(){p.statusguest(),p.callAnagraficaPaesi(),console.log("statusGuest ST "+this.currentStep)},400)}this.encodeQueryData=function(e){var i=[];return _.forOwn(e,function(e,o){i.push(encodeURIComponent(o)+"="+encodeURIComponent(e))}),i.join("&")},this.goToAnagrafica=function(e){window.top.location.href="/it/persone-e-famiglie/prodotti/conti-e-libretti/conto-perme/contocorrenteself.html#?ID_SUPERPRATICA="+e},this.bottoneIndietro=function(e,i){var a=this;i&&"certificazioneCellulare"==i&&!a.isLogged?t.logout().then(function(){e||0==e?a.changeStep(e):o&&o.parent&&o.parent.goBack?o.parent.goBack():o&&o.parent&&o.parent.parent&&o.parent.parent.goBack&&o.parent.parent.goBack()}):e||0==e?a.changeStep(e):o&&o.parent&&o.parent.goBack?o.parent.goBack():o&&o.parent&&o.parent.parent&&o.parent.parent.goBack&&o.parent.parent.goBack()},this.runService=function(){p.codiceFiscale&&(p.codiceFiscale=p.codiceFiscale.toUpperCase()),0===this.currentStep&&this.checkStep1()&&(1==p.privacy?w("ccscconfiguratore","privacyGuestSi","CTA"):2==p.privacy&&w("ccscconfiguratore","privacyGuestNo","CTA"),this.callCheckOfferta()),1===this.currentStep&&this.checkStep2()&&(this.registraguestexecution(),this.callAnagraficaPaesi()),2===this.currentStep&&(this.callAnagraficaPaesi(),this.checkCellulare(),this.checkCodiceSms(),this.cleanCheckErrors(),p.changeStep(),this.checkStep3()&&this.verifyguest())},this.checkStep1=function(){x();var e=!this.erroreNome&&!this.erroreNomeVuoto&&!this.erroreCognome&&!this.erroreCognomeVuoto&&!this.erroreEmail&&!this.erroreEmailVuota&&!this.erroreCF&&!this.erroreCFVuoto&&!this.erroregRecaptchaResponse&&r.isValidEmail(this.email);return!!e},this.checkStep2=function(){this.checkCodConferma();var e=!this.erroreCodConfermaVuoto&&!this.erroreCodConferma;if(this.codConferma&&e)return this.erroreCodConferma=!1,!0},this.cleanCheckErrors=function(){try{console.debug("log cleanCheckErrors"),console.debug("errorGeneric: "+this.errorGeneric),console.debug("errorFrodatore: "+this.errorFrodatore),console.debug("error401OTSErrato: "+this.error401OTSErrato),console.debug("errorCFWrong: "+this.errorCFWrong),console.debug("errorUpdateGeneric: "+this.errorUpdateGeneric),console.debug("errore3OTS: "+this.errore3OTS)}catch(e){console.debug("Debug errori checleanCheckErrors")}this.errorGeneric=!1,this.errorFrodatore=!1,this.error401OTSErrato=!1,this.errorCFWrong=!1,this.errorUpdateGeneric=!1,this.errore3OTS=!1},this.checkStep3=function(){try{console.debug("log checkStep3"),console.debug("erroreCodiceFiscaleVuoto: "+this.erroreCodiceFiscaleVuoto),console.debug("erroreCodiceFiscale: "+this.erroreCodiceFiscale),console.debug("erroreCodiceFiscaleLunghezza: "+this.erroreCodiceFiscaleLunghezza),console.debug("erroreCodiceFiscaleMinore: "+this.erroreCodiceFiscaleMinore),console.debug("isValidCodiceFiscale: "+r.isValidCodiceFiscale(this.codiceFiscale)),console.debug("erroreCellulareVuoto: "+this.erroreCellulareVuoto),console.debug("erroreCellulare: "+this.erroreCellulare),console.debug("isValidCellPhone: "+r.isValidCellPhone(this.cellulare)),console.debug("erroreCodiceSmsVuoto: "+this.erroreCodiceSmsVuoto),console.debug("erroreCodiceSmsLunghezza: "+this.erroreCodiceSmsLunghezza)}catch(e){console.debug("Debug errori checkstep3")}var i=!this.erroreCodiceFiscaleVuoto&&!this.erroreCodiceFiscale&&!this.erroreCodiceFiscaleLunghezza&&!this.erroreCodiceFiscaleMinore&&r.isValidCodiceFiscale(this.codiceFiscale)&&!this.erroreCellulareVuoto&&!this.erroreCellulare&&r.isValidCellPhone(this.cellulare)&&!this.erroreCodiceSmsVuoto&&!this.erroreCodiceSmsLunghezza;return!!i},this.disableContinua=function(){var e=!0;return this.nome&&r.isValidNomeCognome(this.nome)&&r.isValidNrNomeCognome(this.nome)||(e=!1),this.cognome&&r.isValidNomeCognome(this.cognome)&&r.isValidNrNomeCognome(this.cognome)||(e=!1),this.email&&r.isValidEmail(this.email)||(e=!1),this.codiceFiscale&&!this.erroreCodiceFiscaleMinore&&r.isValidCodiceFiscale(this.codiceFiscale)||(e=!1),this.disableStep1=!e,e},this.openInformativa=function(){console.log("INFORMATIVA")},this.setShowPopover=function(e){0===this.currentStep?this.disableContinua()||(this.showPopover=e):1===this.currentStep&&this.disableStep2&&(this.showPopover=e)},this.setCheckPopover1=function(e){this.checkPopover1=e},this.setCheckPopover2=function(e){this.checkPopover2=e},this.dataNascitaFromCf=function(e){var i={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"},o=e.substring(6,8),t=i[e.charAt(8)],a=e.substring(9,11);return a>40&&(a-=40,a="0"+a),(o<20?"20":"19")+o+"-"+t+"-"+a},this.calculateAge=function(e){var i=Date.parse(e),o=(new Date).getTime(),t=(o-i)/31536e6,a=parseInt(t,10);return a},this.checkCodiceFiscale=function(){var e=this,i=e.codiceFiscale?e.dataNascitaFromCf(e.codiceFiscale):null;this.codiceFiscaleOk=!1,this.codiceFiscale&&r.isValidCodiceFiscale(this.codiceFiscale)&&(this.erroreCodiceFiscale=!1,this.erroreCodiceFiscaleVuoto=!1,this.erroreCodiceFiscaleLunghezza=!1,this.erroreCodiceFiscaleMinore=!1,this.codiceFiscaleOk=!0),this.codiceFiscale||(this.erroreCodiceFiscaleVuoto=!0,this.erroreCodiceFiscale=!1,this.erroreCodiceFiscaleLunghezza=!1,this.erroreCodiceFiscaleMinore=!1),this.codiceFiscale&&!r.isValidCodiceFiscale(this.codiceFiscale)&&(this.erroreCodiceFiscaleVuoto=!1,this.erroreCodiceFiscale=!0,this.erroreCodiceFiscaleLunghezza=!1,this.erroreCodiceFiscaleMinore=!1),this.codiceFiscale&&this.codiceFiscale.length<16&&(this.erroreCodiceFiscale=!1,this.erroreCodiceFiscaleVuoto=!1,this.erroreCodiceFiscaleLunghezza=!0,this.erroreCodiceFiscaleMinore=!1),this.codiceFiscale&&i&&e.calculateAge(i)<18&&(this.erroreCodiceFiscaleVuoto=!1,this.erroreCodiceFiscale=!1,this.erroreCodiceFiscaleMinore=!0,this.erroreCodiceFiscaleLunghezza=!1),e.disableContinua()},this.checkCellulare=function(){this.cellulareOK=!1,this.cellulare?r.isValidCellPhone(this.cellulare)?(this.erroreCellulareVuoto=!1,this.erroreCellulare=!1,this.cellulareOK=!0):(this.erroreCellulareVuoto=!1,this.erroreCellulare=!0):(this.erroreCellulareVuoto=!0,this.erroreCellulare=!1)},this.checkCancellaCell=function(){this.cellulare&&this.cellulare.length>0?(this.cancellaCell=!0,this.cellulare.length>this.lengthCell?(this.cellulare=this.cellulare.substring(0,this.lengthCell),this.erroreCellulare=!0):this.erroreCellulare=!1):this.cancellaCell=!1},this.reset=function(){this.cellulare="",this.cancellaCell=!1,this.erroreCellulare=!1},this.checkOpenDropdown=function(){this.openDropdown===!1?this.openDropdown=!1:this.openDropdown===!0&&(this.openDropdown=!1)},this.maxLengthCheck=function(){var e=this;e.cellulare>e.lengthCell&&(e.cellulare=e.cellulare.slice(0,e.lengthCell))},this.setPrefisso=function(e){var i=this;e&&e.value&&(i.selectedPrefisso=e.text,"+39"===e.value||"0039"===e.value?(this.erroreCellulareText="Il numero di cellulare deve essere composto da 9 a 10 caratteri numerici. Per favore, verifica e riprova.",i.lengthCell=10,this.showAlertBannerCellEstero=!1):(i.lengthCell=50,this.showAlertBannerCellEstero=!0),i.checkCancellaCell()),c.$broadcast("xme_ga_currentStep")},this.checkCodiceSms=function(){this.codiceOK=!1,this.erroreCodiceSmsLunghezza=!1,this.erroreCodiceSmsVuoto=!1,this.codiceSms||(this.erroreCodiceSmsVuoto=!0),this.codiceSms&&this.codiceSms.length<6&&(this.erroreCodiceSmsLunghezza=!0),this.codiceSms&&6==this.codiceSms.length&&(this.erroreCodiceSmsLunghezza=!1,this.erroreCodiceSmsVuoto=!1,this.codiceOK=!0)},this.openBottoneSms=function(){window.top.GUESTAREA.loading.show(),this.checkCellulare(),this.cellulareOK?this.updateGuest(this.originUpdateGuest.certify):this.erroreCellulareVuoto?(p.changeStep(),this.openModalCodiceSms(),window.top.GUESTAREA.loading.hide()):(p.changeStep(),window.top.GUESTAREA.loading.hide())},this.stepCell=function(){try{var e=!1;o&&o.parent&&o.parent.showBoxOffer?o.parent.showBoxOffer(e):o&&o.parent&&o.parent.parent&&o.parent.parent.showBoxOffer&&o.parent.parent.showBoxOffer(e)}catch(i){console.log(i)}p.callAnagraficaPaesi(),p.currentStep=2,setTimeout(function(){window.top.scrollTo(0,0)},1e3),t.signup.getCmsContent({placeholder:"contocorrenteselfdisp"},"GA_INCAPSULATA").then(function(e){p.cmsText||(p.cmsText={}),p.cmsText.certificaCellulare=e&&e.CMS_CERTIFICA_CELLULARE&&e.CMS_CERTIFICA_CELLULARE.messages?e.CMS_CERTIFICA_CELLULARE.messages[0].value:"",p.cmsText.inserisciCodiceSms=e&&e.CMS_INSERISCI_CODICE_SMS&&e.CMS_INSERISCI_CODICE_SMS.messages?e.CMS_INSERISCI_CODICE_SMS.messages[0].value:"",p.changeStep(2)})["catch"](function(e){l.error("CMS ERRORE",e),console.debug("XME TARGET FLOW -  resendCode CALLED KO"),p.changeStep()}),w("ccscconfiguratore","certificaCellulare","NAVIGAZIONE"),w("ccscconfiguratore","certificaCellulareFrame","NAVIGAZIONE")},this.home=function(){window.top.location.href="/it/persone-e-famiglie.html"},this.refresh=function(){o&&o.parent&&o.parent.refresh?o.parent.refresh():o&&o.parent&&o.parent.parent&&o.parent.parent.refresh&&o.parent.parent.refresh()},this.updateGuest=function(e){var i=this,o={utente:{cell:i.selectedPrefisso?i.selectedPrefisso+" "+i.cellulare:i.cellulare,codiceFiscale:i.codiceFiscale,nome:i.nome,cognome:i.cognome,flagPrivacy:1==i.privacy}};i.codiceFiscale&&(o.utente.dataNascita=i.dataNascitaFromCf(i.codiceFiscale)),this.errorCFWrong=!1,this.errorUpdateGeneric=!1,t.profile.edit(o).then(function(o){t.updateUserInfo("GA_INCAPSULATA").then(function(){console.log(a)}),console.log("response updateGuest"),console.log(o);var a=t.profile.info();console.log(a),e==i.originUpdateGuest.registraExecution?i.stepCell():e==i.originUpdateGuest.modifyUser?i.statusguest():(e=i.originUpdateGuest.certify)&&i.certifyguest(!1)})["catch"](function(e){"0000204"==e?i.errorCFWrong=!0:"0000201"==e?window.top.location.href="/content/vetrina/it/area-ospiti/pubblica/ripresa-configurazione-conto-email-gia-registrata.html":i.errorUpdateGeneric=!0,this.disableUserField=!1,window.top.GUESTAREA.loading.hide(),l.error("Prospect update ERROR",e),i.errorCFWrong?i.changeStep(0):i.changeStep()})},this.certifyguest=function(e){e?w("ccscconfiguratore","certificaCellulareNuovoOts","CTA"):w("ccscconfiguratore","verificaCellulare","NAVIGAZIONE"),window.top.GUESTAREA.loading.show();var i=p.selectedPrefisso,o=p.cellulare,a="XMC_GA";this.errorGeneric=!1,this.error429=!1,this.error504=!1,this.error409=!1,t.certifyguest(i,o,a,"GA_INCAPSULATA").then(function(e){p.eseguito=e.eseguito,p.tokenId=e.tokenId,p.visualizzaInviaDiNuovo=!0,window.top.GUESTAREA.loading.hide(),p.changeStep()})["catch"](function(e){"429"===e?(p.error429=!0,p.openModalErrore429()):"504"===e?p.error504=!0:"409"===e?(p.error409=!0,p.openModalErrore409()):p.errorGeneric=!0,window.top.GUESTAREA.loading.hide(),l.error("Registration certify ERROR",e),p.changeStep()})},this.statusguest=function(){window.top.GUESTAREA.loading.show();var e="01025",a="XMC_GA",r=f.cell?f.cell:null,s=f.prefisso?f.prefisso:"0039";p.errorGeneric=!1,p.codiceFiscale&&""!=p.codiceFiscale?t.statusguest(r,e,p.email,p.idSuperPratica,a,s).then(function(e){window.top.GUESTAREA.loading.hide(),console.log("status guest called"),console.log(p.idSuperPratica+e.cellVerified),p.cellVerified=e.cellVerified,p.emailVerified=e.emailVerified,p.previouslyCellVerified=e.previouslyCellVerified,e.cellVerified?i(function(){console.debug("XME TARGET FLOW");try{var e=!1;o&&o.parent&&o.parent.showBoxOffer?o.parent.showBoxOffer(e):o&&o.parent&&o.parent.parent&&o.parent.parent.showBoxOffer&&o.parent.parent.showBoxOffer(e)}catch(i){console.log(i)}c.$emit("checkOtsXme"),console.debug("XME TARGET FLOW - EMIT checkOtsXme")},400):i(function(){console.log("status guest not certified "+p.currentStep),window.top.GUESTAREA.loading.hide(),p.currentStep=2,p.stepCell()},400)})["catch"](function(e){p.errorGeneric=!0,window.top.GUESTAREA.loading.hide(),l.error("Check certificazione ERROR",e),p.currentStep=2,p.stepCell()}):i(function(){window.top.GUESTAREA.loading.hide(),p.currentStep=0,p.changeStep(0)},400)},this.verifyguest=function(){window.top.GUESTAREA.loading.show();var e="01025",i="00350",a="01",r=p.codiceSms;this.errorFrodatore=!1,this.error401OTSErrato=!1,this.errore3OTS=!1,this.errorGeneric=!1,this.errore504=!1;var s=u();p.isFromCarrello="TRUE"===s.ISFROMCARRELLO,t.verifyguest(void 0,e,i,a,r,p.tokenId,"GA_INCAPSULATA").then(function(e){if(p.eseguito=e.eseguito,p.isFromCarrello)p.idSuperPratica||(p.idSuperPratica=s.IDSUPERPRATICA),window.top.GUESTAREA.loading.hide(),p.goToAnagrafica(p.idSuperPratica);else{var i=t.profile.info(),a=i.idProspect||i.ndgProspect||"",r={};r.idProspect=i.idProspect||i.ndgProspect||"",r.cf=p.codiceFiscale,r.nome=p.nome,r.cognome=p.cognome,r.email=p.email,p.verificaPraticheInvolo().then(function(e){e.idSuperpratica?o&&o.parent&&o.parent.openPraticheInvolo?o.parent.openPraticheInvolo(e.idSuperpratica,e.codStato,r):o&&o.parent&&o.parent.parent&&o.parent.parent.openPraticheInvolo&&o.parent.parent.openPraticheInvolo(e.idSuperpratica,e.codStato,r):p.salvaProposta(a,p.codiceFiscale,p.cellulare,p.nome,p.cognome,p.email,p.selectedPrefisso)})["catch"](function(e){l.error("error calling recuperaSuperpratica",e),p.salvaProposta(a,p.codiceFiscale,p.cellulare,p.nome,p.cognome,p.email,p.selectedPrefisso)})}})["catch"](function(e){"Response 423"==e?p.errorFrodatore=!0:"401"==e?p.error401OTSErrato=!0:"Response 429"==e?p.errore3OTS=!0:"504"==e?p.errore504=!0:p.errorGeneric=!0,window.top.GUESTAREA.loading.hide(),l.error("Registration verify ERROR",e),p.changeStep()})},this.setConsenso=function(){var e=angular.element(document.getElementsByName("radio_consenso"))[0],i=angular.element(document.getElementsByName("radio_dissenso"))[0],o=(1==this.privacy,2==this.privacy,function(){p.flagAccettoConsenso=0,e.checked=!1,p.flagNegoConsenso=0,i.checked=!1,p.privacy=0}),t=function(){p.flagAccettoConsenso=1,e.checked=!0,p.flagNegoConsenso=0,i.checked=!1,p.privacy=1},a=function(){p.flagAccettoConsenso=0,e.checked=!1,p.flagNegoConsenso=1,i.checked=!0,p.privacy=2};0==this.privacy&&e.checked?t():0==this.privacy&&i.checked?a():1==this.privacy&&i.checked?a():1==this.privacy&&e.checked?o():2==this.privacy&&e.checked?t():(2==this.privacy&&i.checked,o())},this.richiediCodice=function(){w("ccscconfiguratore","verificaEmailInviaNuovoOts","CTA"),p.erroreCodiceInvalidKey=!1,p.erroreCodiceLogin5=!1,p.erroreCodiceLogin4=!1,p.erroreCodiceMaxTry=!1,p.erroreCodiceLogin9=!1,p.genericErrorExecution=!1,window.top.GUESTAREA.loading.show(),t.richiediOts(p.trxots).then(function(){window.top.GUESTAREA.loading.hide()})["catch"](function(e){"BLOCKED_OTS"==e.message?p.erroreCodiceConfermaMaxOts=!0:p.signupError=!0,l.error("richiedi codice ERROR",e),window.top.GUESTAREA.loading.hide(),p.changeStep()})},this.registraguestsimulation=function(){p.erroreCodiceConfermaMaxOts=!1,window.top.GUESTAREA.loading.show(),p.createNewToken().then(function(){t.registraguestsimulation(p.email,p.gRecaptchaResponse).then(function(e){p.otsId=e.otsId,p.trxots=e.trxots,setTimeout(function(){window.top.scrollTo(0,0)},1e3),p.changeStep(1),w("ccscconfiguratore","verificaEmail","NAVIGAZIONE"),w("ccscconfiguratore","verificaEmailFrame","NAVIGAZIONE"),window.top.GUESTAREA.loading.hide()})["catch"](function(e){"BLOCKED_OTS"==e?(p.erroreCodiceConfermaMaxOts=!0,p.changeStep()):"BLOCKED_MAX_TRY"===e?(p.erroreCodiceMaxTry=!0,p.changeStep()):"ERROR_RECAPTCHA"==e?(p.errorReCaptcha=!0,p.changeStep()):"CAPTCHA_TIMEOUT_ERROR"==e?(p.errorCaptchaTimeout=!0,p.changeStep()):(p.genericErrorSimulation=!0,p.changeStep(1)),window.top.GUESTAREA.loading.hide(),l.error("Registration simulation ERROR",e)})})},this.registraguestexecution=function(){p.erroreCodiceInvalidKey=!1,p.erroreCodiceLogin5=!1,p.erroreCodiceLogin4=!1,p.erroreCodiceMaxTry=!1,p.erroreCodiceLogin9=!1,p.genericErrorExecution=!1;var e=1==p.privacy;window.top.GUESTAREA.loading.show(),
t.registraguestexecution(p.nome,p.cognome,p.email,e,p.trxots,p.codConferma,p.codiceFiscale).then(function(){window.top.GUESTAREA.loading.hide(),p.stepCell()})["catch"](function(e){l.error("Registration execution ERROR",e),"INVALID_CP_KEY"==e?p.erroreCodiceInvalidKey=!0:"LOGIN_ERROR_4"===e?p.erroreCodiceLogin4=!0:"LOGIN_ERROR_5"===e?p.erroreCodiceLogin5=!0:"BLOCKED_MAX_TRY"===e?p.erroreCodiceMaxTry=!0:"LOGIN_ERROR_9"===e?p.erroreCodiceLogin9=!0:p.genericErrorExecution=!0,p.errorOts=p.erroreCodConferma||p.erroreCodConfermaVuoto||p.erroreCodiceInvalidKey||p.erroreCodiceLogin4||p.erroreCodiceLogin5||p.erroreCodiceConfermaMaxOts||p.erroreCodiceMaxTry||p.erroreCodiceLogin9,window.top.GUESTAREA.loading.hide(),p.changeStep()})},this.salvaProposta=function(e,i,o,a,r,s,n){if(window.top.GUESTAREA.loading.show(),console.log("calling proposta"),!this.tipoOpe&&!this.uuid){var c=u();this.tipoOpe=c.TIPOOPE,this.uuid=c.UUID}var d="ACQUISTA"===this.tipoOpe;t.salvaProposta(e,i,o,s,a,r,d,this.uuid,"GA_INCAPSULATA",n).then(function(e){e&&e.proposta?(window.top.GUESTAREA.loading.hide(),p.idSuperPratica=e.proposta.idSuperPratica,console.log("idSuperPratica data "+e.proposta.idSuperPratica),console.log("idSuperPratica me "+p.idSuperPratica),p.erroreSalvaProposta=!1,console.debug("XME TARGET FLOW -  CHANGING STEP"),p.goToAnagrafica(p.idSuperPratica)):(l.error("error calling salvaProposta",err),p.errorGeneric=!0,window.top.GUESTAREA.loading.hide(),window.top.GUESTAREA.loading.hide(),p.currentStep=2,p.stepCell())})["catch"](function(e){l.error("error calling salvaProposta",e),p.errorGeneric=!0,window.top.GUESTAREA.loading.hide(),window.top.GUESTAREA.loading.hide(),p.currentStep=2,p.stepCell()})},this.riprova=function(){this.erroreSalvaProposta=!1,this.erroreCheckUser=!1,this.genericErrorSimulation=!1,this.genericErrorExecution=!1,this.errorCaptchaTimeout=!1,this.codConferma="";var e={showConfig:!0},i=new CustomEvent("ARCH_RECEIVE_INFO_CHECK_OFFERTA",{detail:e});window.parent.document.dispatchEvent(i),this.changeStep(0),o.sessionStorage.removeItem(m),this.createNewToken()},this.createNewToken=function(){return new Promise(function(e,i){grecaptcha.ready(function(){window.location.host.toUpperCase().indexOf("LOCALHOST")>=0?this.captchaKey="6LdbLMcUAAAAABaZng0rq1hH5exrhIteQRgii6hE":this.captchaKey="6LeayMgUAAAAAF6WZOe49B1YNngogGTQJktqCxTk",grecaptcha.execute(this.captchaKey,{action:"area_login"}).then(function(i){window.sessionStorage.setItem("token",JSON.stringify(i)),p.gRecaptchaResponse=i,e()})["catch"](function(){i()})})})},this.sort_by=function(e,i,o){const t=o?function(i){return o(i[e])}:function(i){return i[e]};return i=i?-1:1,function(e,o){return e=t(e),o=t(o),i*((e>o)-(o>e))}},this.callAnagraficaPaesi=function(){var e=this,i=[];e.prefissiInternazionali=[],e.prefissiInternazionaliTemp=[],t.signup.anagPaesi().then(function(o){i=o,e.nazioni=o,angular.forEach(e.nazioni,function(i,o){i.prefisso&&e.prefissiInternazionaliTemp.push({text:i.prefisso.prefissoInternazionale.replace(/^0+/,"+"),value:i.prefisso.prefissoInternazionale})}),e.prefissiInternazionali=e.prefissiInternazionaliTemp.reduce(function(e,i){return e.some(function(e){return e.text===i.text})||e.push(i),e},[]),e.prefissiInternazionali.sort(e.sort_by("text",!1,parseInt));var t=[];e.prefissiInternazionali=e.prefissiInternazionali.filter(function(e){return e.text.indexOf("-")>-1&&t.push(e),e.text.indexOf("-")==-1}),t.sort(function(e,i){return e.text.localeCompare(i.text)}),angular.forEach(e.prefissiInternazionali,function(i,o){"+39"===i.text&&(e.prefissiInternazionali.splice(o,1),e.prefissiInternazionali.unshift(i))}),e.prefissiInternazionali=e.prefissiInternazionali.concat(t)})["catch"](function(){e.nazioni=[],e.prefissiInternazionali=[]})},this.callIsClienteGa=function(){var e=this,i={};i.codiceFiscale=e.codiceFiscale,i["g-recaptcha-response"]=e.gRecaptchaResponse,t.signup.isClienteGA(i,"GA_INCAPSULATA").then(function(i){window.top.GUESTAREA.loading.hide(),i.isCliente===!0&&i.goToLogin===!0?(w("ccscconfiguratore","paginaFeedback","NAVIGAZIONE"),w("ccscconfiguratore","feedbackGiaCliente","NAVIGAZIONE"),e.giaCliente=!0,e.giaRegistrato=!1,e.changeStep(1)):i.isCliente===!0&&i.goToLogin===!1?e.changeStep(3):i.isCliente===!1&&(e.isLogged?e.codiceFiscale!==e.codiceFiscaleFromInfo?e.updateGuest(e.originUpdateGuest.modifyUser):e.statusguest():e.createNewToken().then(function(){e.callCheckUser()})["catch"](function(e){l.error("grecaptcha",e)}))})["catch"](function(i){console.log(i),window.top.GUESTAREA.loading.hide(),l.error("Check certificazione ERROR",i),e.currentStep=2,e.stepCell()})},this.callCheckOfferta=function(){var e=this;try{window.localStorage.setItem("CODICE_FISCALE_GA",e.codiceFiscale)}catch(i){}window.top.GUESTAREA.loading.show();var o=u();o.UUID&&(e.uuid=o.UUID);var a={uuid:e.uuid,codAbiChiamante:"01025",codFilialeChiamante:"02481",codAziendaChiamante:"01",codiceFiscale:e.codiceFiscale};t.signup.checkOfferta(a,"GA_INCAPSULATA").then(function(i){if(i.segnalazioni&&i.segnalazioni.length>0&&i.segnalazioni.indexOf("CHECKOFFERTAOK")>-1)e.createNewToken().then(function(){e.callIsClienteGa()})["catch"](function(e){l.error("grecaptcha",e)});else if(i.segnalazioni&&i.segnalazioni.length>0){window.top.GUESTAREA.loading.hide();var o={};if(i.segnalazioni.indexOf("ERRORE-CFNONVALIDO")>-1){var t=angular.element('input[name="codiceFiscale"]');window.innerWidth<1007?top.scrollTo(0,$(t).offset().top+500):top.scrollTo(0,$(t).offset().top),e.erroreCodiceFiscale=!0}else o={reCalculateOffer:!0,segnalazioni:i.segnalazioni,codiceFiscale:e.codiceFiscale,codiceFiscaleValido:!0};var a=new CustomEvent("ARCH_RECEIVE_INFO_CHECK_OFFERTA",{detail:o});window.parent.document.dispatchEvent(a)}})["catch"](function(i){i&&"KO"==i.exitCode&&i.returnMessages&&i.returnMessages.ERROR&&i.returnMessages.ERROR.length>0&&i.returnMessages.ERROR[0]&&i.returnMessages.ERROR[0].errorCode&&"XMC02400"==i.returnMessages.ERROR[0].errorCode?(e.errorFaccinaGialla=!0,e.info.erroreFaccinaGialla="La sessione si è interrotta per inattività. \n Ricarica la pagina per continuare."):e.errorGeneric=!0,window.top.GUESTAREA.loading.hide(),l.error("Check certificazione ERROR",i),e.currentStep=2,e.stepCell()})},this.redirectCheckUser=function(){this.giaCliente&&(this.tipoOpe="CONFIGURA",s.loginOnlyIBNew(this.from,this.tipoOpe,this.uuid)),this.giaRegistrato&&(o&&o.parent&&o.parent.showDocumentiTrasparenza?o.parent.showDocumentiTrasparenza(!1):o&&o.parent&&o.parent.parent&&o.parent.parent.showDocumentiTrasparenza&&o.parent.parent.showDocumentiTrasparenza(!1),s.loginOnlyGuest(this.from,this.tipoOpe,this.uuid))},this.redirectCheckUserGiaCliente=function(){window.top.GUESTAREA.loading.show(),t.logout().then(function(){window.top.GUESTAREA.loading.hide(),this.tipoOpe="CONFIGURA",w("ccscconfiguratore","feedbackGiaCliente","NAVIGAZIONE"),s.loginOnlyIBNew(this.from,this.tipoOpe,this.uuid)})},this.callCheckUser=function(){var e=this;window.top.GUESTAREA.loading.show(),t.signup.checkUser(e.email,e.nome,e.cognome,e.gRecaptchaResponse,"GA_INCAPSULATA").then(function(){window.top.GUESTAREA.loading.hide(),e.erroreCheckUser=!1,e.registraguestsimulation()})["catch"](function(i){i?(e.giaRegistrato=i.censito,e.giaCliente=i.cliente,e.erroreCheckUser=!1,e.giaRegistrato&&(w("ccscconfiguratore","paginaFeedback","NAVIGAZIONE"),w("ccscconfiguratore","feedbackGiaRegistrato","NAVIGAZIONE"))):e.erroreCheckUser=!0;var o={showConfig:!1},t=new CustomEvent("ARCH_RECEIVE_INFO_CHECK_OFFERTA",{detail:o});window.parent.document.dispatchEvent(t),e.changeStep(1),window.top.GUESTAREA.loading.hide()})},this.checkEmail=function(){this.passwordMatch=!0,this.email?r.isValidEmail(this.email)?(this.erroreEmail=!1,this.erroreEmailVuota=!1):(this.erroreEmail=!0,this.erroreEmailVuota=!1):(this.erroreEmailVuota=!0,this.erroreEmail=!1),this.changeStep()},this.setCeckedInformativa=function(){var e=angular.element(document.getElementsByName("checkConsenso"))[0].checked;e?this.flagCheckConsenso=!0:this.flagCheckConsenso=!1,e?this.erroreCheckConsenso=!1:this.erroreCheckConsenso=!0,this.changeStep()},this.checkNome=function(){this.nome?r.isValidNomeCognome(this.nome)?(this.nome=this.nome.charAt(0).toUpperCase()+this.nome.slice(1),this.erroreNome=!1,this.erroreNomeVuoto=!1):(this.erroreNomeVuoto=!1,this.erroreNome=!0):(this.erroreNomeVuoto=!0,this.erroreNome=!1),this.changeStep()},this.checkCognome=function(){this.cognome?r.isValidNomeCognome(this.cognome)?(this.cognome=this.cognome.charAt(0).toUpperCase()+this.cognome.slice(1),this.erroreCognome=!1,this.erroreCognomeVuoto=!1):(this.erroreCognomeVuoto=!1,this.erroreCognome=!0):(this.erroreCognomeVuoto=!0,this.erroreCognome=!1),this.changeStep()},this.checkCF=function(){this.cf?r.isValidCodiceFiscale(this.cf)?(this.erroreCF=!1,this.erroreCFVuoto=!1):(this.erroreCFVuoto=!1,this.erroreCF=!0):(this.erroreCFVuoto=!0,this.erroreCF=!1),this.changeStep()},this.checkCodConferma=function(){this.disableStep2=!0,this.erroreCodiceInvalidKey=!1,this.erroreCodiceLogin5=!1,this.erroreCodiceLogin4=!1,this.erroreCodiceMaxTry=!1,this.erroreCodiceLogin9=!1,this.genericErrorExecution=!1,this.codConferma?r.isValidPassword(this.codConferma)?(this.erroreCodConfermaVuoto=!1,this.erroreCodConferma=!1,this.disableStep2=!1):(this.erroreCodConfermaVuoto=!1,this.erroreCodConferma=!0):(this.erroreCodConfermaVuoto=!0,this.erroreCodConferma=!1),this.errorOts=this.erroreCodConferma||this.erroreCodConfermaVuoto||this.erroreCodiceInvalidKey||this.erroreCodiceLogin4||this.erroreCodiceLogin5||this.erroreCodiceConfermaMaxOts||this.erroreCodiceMaxTry||this.erroreCodiceLogin9,this.changeStep()},this.viewPassword=function(){var e=document.getElementById("codConferma");"password"==e.type?(e.type="text",this.showPwd=!0,this.ariaLabelPassword="NASCONDI PASSWORD",this.pswMessageAriaLabel="nascondi codice inserito"):(e.type="password",this.showPwd=!1,this.ariaLabelPassword="MOSTRA PASSWORD",this.pswMessageAriaLabel="mostra codice inserito")},this.openPrivacyModal=function(){var e="";e="SYST"===r.whereami()?"/ib/public/login/js/lib/pdfjs-1.1.3.2-dist/web/viewer.html?file=https://scdil0.syssede.systest.sanpaoloimi.com/content/dam/vetrina/documenti/privacy/03069/informativa_consensi_iniziative_commerciali_clienti_prospect.pdf":"BFIX"===r.whereami()?"/ib/public/login/js/lib/pdfjs-1.1.3.2-dist/web/viewer.html?file=https://ecdil0.syssede.systest.sanpaoloimi.com/content/dam/vetrina/documenti/privacy/03069/informativa_consensi_iniziative_commerciali_clienti_prospect.pdf":"/ib/public/login/js/lib/pdfjs-1.1.3.2-dist/web/viewer.html?file=https://www.intesasanpaolo.com/content/dam/vetrina/documenti/privacy/03069/informativa_consensi_iniziative_commerciali_clienti_prospect.pdf";var i=996,o=700,t=screen.width/2-i/2,a=screen.height/2-o/2,s="toolbar=no,status=no,menubar=no,titlebar=yes,scrollbars=yes,resizable=yes,width="+i+",height="+o+",top="+a+",left="+t;window.open(e,"Privacy document",s)},this.openModalCodiceSms=function(){a.open({animation:!0,templateUrl:"app/cms_components/xmeGaRegistrazione/xmeGaRegistrazione-modal.html",controllerAs:"ctrl",bindToController:!0,controller:function(){this.info={title:"CERTIFICAZIONE DEL CELLULARE",message:"Per richiedere il codice tramite SMS è<br>necessario indicare il tuo codice fiscale<br>e il numero di cellulare."}}})},this.openModalErrore429=function(){a.open({animation:!0,templateUrl:"app/cms_components/xmeGaRegistrazione/xmeGaRegistrazione-modal.html",controllerAs:"ctrl",bindToController:!0,controller:function(){this.info={title:"CERTIFICAZIONE DEL CELLULARE",message:"Oggi hai chiesto troppe volte il codice via SMS. Se ti serve supporto contattaci al 800.303.303."}}})},this.openModalErrore409=function(){a.open({animation:!0,templateUrl:"app/cms_components/xmeGaRegistrazione/xmeGaRegistrazione-modal.html",controllerAs:"ctrl",bindToController:!0,controller:function(){this.info={title:"UNIVOCITA' NUMERO DI CELLULARE",message:"Il numero di cellulare che hai inserito è già associato al profilo di un altro cliente. Per favore, inserisci <b>un altro numero di cellulare</b> o contattaci al 800.303.303."}}})};var x=function(){p.nome?r.isValidNomeCognome(p.nome)?(p.erroreNome=!1,p.erroreNomeVuoto=!1):(p.erroreNomeVuoto=!1,p.erroreNome=!0):(p.erroreNomeVuoto=!0,p.erroreNome=!1),p.cognome?r.isValidNomeCognome(p.cognome)?(p.erroreCognome=!1,p.erroreCognomeVuoto=!1):(p.erroreCognomeVuoto=!1,p.erroreCognome=!0):(p.erroreCognomeVuoto=!0,p.erroreCognome=!1),p.email?r.isValidEmail(p.email)?(p.erroreEmail=!1,p.erroreEmailVuota=!1):(p.erroreEmailVuota=!1,p.erroreEmail=!0):(p.erroreEmailVuota=!0,p.erroreEmail=!1),p.changeStep()};$(window).click(function(){var e=this;e.checkPopover2&&e.setCheckPopover2(!1),e.checkPopover1&&e.setCheckPopover1(!1)}),o.matchMedia("(max-width: 767px)").matches?this.changeStep():o.matchMedia("(max-width: 1024px)").matches?this.changeStep():this.changeStep();var w=function(e,i,o){setTimeout(function(){utag.view({nomepagina:e,faseprocesso:i,tipoEvento:o})},300)};this.isLogged||setTimeout(function(){0===p.currentStep},1e3)}]}}),angular.module("guestApp").directive("guestareaMipiace",function(){return{restrict:"E",scope:{prodId:"@",catId:"@",prodUrl:"@",prodDescr:"@",prodPage:"="},templateUrl:"app/cms_components/miPiace/miPiace.html",controller:["$scope","$window","$sce","vorreiService","gaRouterService","utilsService",function(e,i,o,t,a){e.position="top",e.isToOpen=!1,e.isVisible=e.prodId&&e.catId&&e.prodUrl&&e.prodDescr&&!0||!1,e.hLayout=e.prodPage===!0;var r=!1,s=!1,n=!1,l=!1,c=!1,d=function(o,t,a){var d=function(o){e.htmlPopover=o,e.isToOpen=!0,e.hLayout?i.matchMedia("(max-width: 767px)").matches?e.position="bottom-right":i.matchMedia("(max-width: 1024px)").matches?e.position="left":e.position="top":e.position="right",i.setTimeout(function(){var e=$(".mipiace_popover_hLayout.popover").offset();if(e&&e.left<0&&e.left>-200){var i=$(".mipiace_popover_hLayout.popover.bottom > .arrow").css("right"),o=Number(i.substring(0,i.length-2))-e.left+2;$(".mipiace_popover_hLayout.popover").css({left:"2px",marginLeft:"0px"}),$(".mipiace_popover_hLayout.popover.bottom > .arrow").css("right",o+"px")}},100),i.setTimeout(function(){e.isToOpen=!1},3e3)};n=!0,l=o,null!=t&&(s=t),null!=a&&(c=a),!l&&r?d("app/cms_components/miPiace/miPiacePopover.html"):c?d("app/cms_components/miPiace/miPiacePopoverError.html"):e.isToOpen=!1,r&&(r=!1)};t.isProductLiked(t.createProd(e.prodId,e.catId,e.prodUrl,e.prodDescr),d),e.toggleSelected=function(){c=!1,e.isToOpen=!1,r=!0,n=!1,s?t.removeLikedProduct(t.createProd(e.prodId,e.catId,e.prodUrl,e.prodDescr),d):t.addLikedProduct(t.createProd(e.prodId,e.catId,e.prodUrl,e.prodDescr,moment().valueOf()),d)},e.accedi=function(){l?a.vorrei():a.homelogin()},e.isSelected=function(){return s},e.isEnabled=function(){return n},e.isLogged=function(){return l},e.getDescription=function(){return o.trustAsHtml(e.prodDescr)}}]}}),angular.module("guestApp").directive("guestareaLogin",function(){return{restrict:"E",controllerAs:"homeLoginCtrl",bindToController:!0,templateUrl:"app/cms_components/homeLogin/homeLogin.html",controller:["accountService","utilsService","$uibModal","$log","gaRouterService","gaExtToolsService","$window",function(e,i,o,t,a,r,s){var n=this;this.email=e.getRememberMeEmail(),this.cbricordami=!!this.email,this.emailWrong=!1,this.emailEmpty=!1,this.pwdWrong=!1,this.pwdEmpty=!1,this.pwdRequired=!1,this.loginError=!1,this.codeError=0,this.blocked=!1,this.tab=1,this.msgBecameIBClient="",this.isFromDem=!1,this.isLogged=e.auth.isLogged(),this.isLogged?this.nome=e.profile.info().nome:this.nome="","true"===s.localStorage.getItem("isFromDem")&&(n.isFromDem=!0),this.goToRegistrazione=function(){a.signup()},this.goToExpiredPwd=function(){a.changePassword("#?email="+this.email+"&exp=true")},this.entra=function(){this.isLogged&&!this.isFromDem?a.landing():(this.email?i.isValidEmail(this.email)?(this.emailWrong=!1,this.emailEmpty=!1):(this.emailWrong=!0,this.emailEmpty=!1):(this.emailEmpty=!0,this.emailWrong=!1),this.password?i.isValidPassword(this.password)?(this.pwdWrong=!1,this.pwdEmpty=!1):(this.pwdWrong=!0,this.pwdEmpty=!1):(this.pwdEmpty=!0,this.pwdWrong=!1),this.loginError=!1,this.emailWrong||this.emailEmpty||this.pwdWrong||this.pwdEmpty||(n.blocked=!0,n.emailWrong=!1,n.emailEmpty=!1,n.pwdWrong=!1,n.pwdEmpty=!1,"true"===s.localStorage.getItem("isFromDem")&&n.isLogged?e.logout().then(function(){e.login(n.email,n.password,n.cbricordami).then(function(){r.postLogin().then(function(e){e&&e()})["catch"](function(e){n.blocked=!1,n.loginError=!0,n.codeError=e.code,n.msgBecameIBClient=e.msg})})["catch"](function(e){n.blocked=!1,n.loginError=!0,n.codeError=e})}):e.login(n.email,n.password,n.cbricordami).then(function(){r.postLogin().then(function(e){e&&e()})["catch"](function(e){n.blocked=!1,n.loginError=!0,n.codeError=e.code,n.msgBecameIBClient=e.msg})})["catch"](function(e){n.blocked=!1,n.loginError=!0,n.codeError=e})))},this.esci=function(){a.logout()},this.help=function(){},this.checkKeyCodeTab=function(e,i){var o=e.which||e.keyCode;13!==o&&32!==o||(this.tab=i)},this.checkKeyCodeRecuperaPwd=function(e){var i=e.which||e.keyCode;13!==i&&32!==i||this.open()},this.checkKeyCodeRegistrati=function(e){var i=e.which||e.keyCode;13!==i&&32!==i||this.goToRegistrazione()},this.open=function(){o.open({animation:!0,templateUrl:"app/cms_components/homeLogin/homeLogin-modal.html",controllerAs:"homeLoginModalCtrl",bindToController:!0,controller:["utilsService",function(i){var o=this;this.lostEmail="",this.firstStep=!0,this.lostEmailWrong=!1,this.lostEmailDifferent=!1,this.resetPwdError=!1,this.blocked=!1,this.checkEmail=function(){this.lostEmail&&i.isValidEmail(this.lostEmail)?(this.lostEmailWrong=!1,this.lostEmailDifferent=!1):(this.lostEmailWrong=!0,this.lostEmailDifferent=!1)},this.resetPwd=function(){o.lostEmail&&i.isValidEmail(o.lostEmail)?(this.blocked=!0,e.resetPassword(o.lostEmail).then(function(){o.firstStep=!1})["catch"](function(e){"8 Psoid inesistente"===e.message?(o.blocked=!1,o.lostEmailWrong=!1,o.lostEmailDifferent=!0,o.resetPwdError=!1,o.firstStep=!0):(o.blocked=!1,o.lostEmailWrong=!1,o.lostEmailDifferent=!1,o.resetPwdError=!0,o.firstStep=!1)})):(o.lostEmailWrong=!0,o.lostEmailDifferent=!1,o.resetPwdError=!1)}}]})}}]}}),angular.module("guestApp").directive("guestareaMenu",function(){return{restrict:"E",controllerAs:"ctrl",bindToController:!0,templateUrl:"app/cms_components/menuGuest/menuGuest-button.html",controller:["accountService","$rootScope","gaRouterService","$uibModal","$window",function(e,i,o,t,a){var r=this;this.nomeTizio=null,this.opened=!1,e.auth.isLogged()&&("true"===a.localStorage.getItem("isFromDem")?r.nomeTizio=null:(r.nomeTizio=e.profile.info().nome,r.isLoggedViaFB=e.auth.isFB())),this.toggle=function(){r.opened=!r.opened,i.$broadcast("GAEVENT-MENU",r.opened)},this.logout=function(){o.logout()},this.areaOspiti=function(){o.landing()},this.modifica=function(){o.changePassword()},this.open=function(){t.open({animation:!0,templateUrl:"app/cms_components/menuGuest/menuGuest-modal.html",controllerAs:"menuGuestModalCtrl",bindToController:!0,backdrop:!0,controller:["accountService","$scope",function(e,i){var t=this;this.resetProfileError=!1,this.firstStep=!0,this.buttonDisabled=!1,i.$on("modal.closing",function(e,i,a){t.firstStep||o.logout()}),this.eliminaProfilo=function(){t.buttonDisabled=!0,e.profile["delete"]().then(function(){t.firstStep=!1})["catch"](function(){t.resetProfileError=!0,t.firstStep=!1})},this.logout=function(){o.logout()}}]})}}]}}),angular.module("guestApp").directive("guestareaMenuCollapsed",function(){return{restrict:"E",controllerAs:"menuGuestCtrl",bindToController:!0,templateUrl:"app/cms_components/menuGuest/menuGuest-collapse.html",controller:["accountService","utilsService","$scope","$uibModal","$log","gaRouterService",function(e,i,o,t,a,r){var s=this;this.openDropdown=!1,e.auth.isLogged()&&(this.isLoggedViaFB=e.auth.isFB()),o.$on("GAEVENT-MENU",function(e,i){s.openDropdown=i}),this.logout=function(){r.logout()},this.areaOspiti=function(){r.landing()},this.modifica=function(){r.changePassword()},this.open=function(){t.open({animation:!0,templateUrl:"app/cms_components/menuGuest/menuGuest-modal.html",controllerAs:"menuGuestModalCtrl",bindToController:!0,backdrop:!0,controller:["accountService","$scope",function(e,i){var o=this;this.resetProfileError=!1,this.firstStep=!0,this.buttonDisabled=!1,i.$on("modal.closing",function(e,i,t){o.firstStep||r.logout()}),this.eliminaProfilo=function(){o.buttonDisabled=!0,e.profile["delete"]().then(function(){o.firstStep=!1})["catch"](function(){o.resetProfileError=!0,o.firstStep=!1})},this.logout=function(){r.logout()}}]})}}]}}),angular.module("guestApp").directive("gavorrei",function(){return{restrict:"E",controllerAs:"vorreiCtrl",bindToController:!0,templateUrl:"app/vorrei/vorrei.html",controller:["vorreiService","utilsService","gaRouterService","accountService","gaExtToolsService","$log","$uibModal","$rootScope","sessionAliveManager","$scope",function(e,i,o,t,a,r,s,n,l,c){var d=this;this.ready=!1,this.now=new Date,this.listCarrello=[],this.wishList=[],this.numCarrello=0,this.numDesideri=0,this.buttonSelected="vorrei",this.isModificaMipiace=!1,this.isModificaCarrello=!1,this.visualizza=!1,this.presaVisione=!1,this.presaVisioneOk=!1,this.presaVisioneMsg="",this.exitBtn="",this.badgeCount=0,this.nomeTizio=t.profile.info().nome,this.nomeTizio=this.nomeTizio.charAt(0).toUpperCase()+this.nomeTizio.slice(1).toLowerCase(),this.cellulare=t.profile.info().cell,this.checkOts=!1,this.richiestaCodice=!1,this.erroreCodiceOtsVuoto=!1,this.erroreCodiceOts=!1,this.erroreCodiceOtsNonValido=!1,this.bottoneDisabilitato=!1,this.superPratica="",this.pratica="",this.maskedCellulare="",this.sessionExpired=!1;var p=null,m=null,d=this;l.startSessionManagement(c,function(){d.sessionExpired=!0});var u=function(e,i,t,a){a?o.logout():(e&&e.length>0?(d.numCarrello=e.length,d.listCarrello=e):(d.numCarrello=0,d.listCarrello=[]),d.badgeCount+=d.numCarrello,i&&i.length>0?(d.numDesideri=i.length,d.wishList=i):(d.numDesideri=0,d.wishList=[]),d.ready=!0)};e.getListaVorrei(!1,u),this.invalidate=function(){d.ready=!1},this.vaiAPaginaAccesso=function(){var e="/it/persone-e-famiglie.html";top.document.location=e},this.removeWish=function(e){if(e){_.remove(d.wishList,function(i){return i.prodId===e.prodId});d.numDesideri=d.wishList.length}d.ready=!0},this.removeCarrello=function(e){if(e){var i=_.remove(d.listCarrello,function(i){return i.idSuperPratica===e.idSuperPratica});d.numCarrello=d.listCarrello.length,d.badgeCount-=i?i.length:0}d.ready=!0},this.exitPresaVisione=function(){this.presaVisioneOk?o.primoAccesso():o.logout()},n.$on("completaPratica",function(e,i,o){"completaPratica"===e.name&&(e.stopPropagation&&e.stopPropagation(),i&&o&&(p=i,m=o,d.openCjConti()))});var g=function(e){setTimeout(function(){utag.view({nomepagina:"ccsccontoxmeripr",faseprocesso:e,tipoEvento:"NAVIGAZIONE"})},300)};n.$on("checkOts",function(e,i,o){"checkOts"===e.name&&0==d.checkOts&&(d.nomeTizio=t.profile.info().nome,this.nomeTizio=this.nomeTizio.charAt(0).toUpperCase()+this.nomeTizio.slice(1).toLowerCase(),d.cellulare=t.profile.info().cell,d.maskedCellulare=d.cellulare?d.cellulare.substring(7):"",d.superPratica=i,d.pratica=o,t.OTS.invia().then(function(){d.richiestaCodice=!1,window.top.GUESTAREA.loading.hide(),setTimeout(function(){window.scrollTo(0,0)}),d.checkOts=!0,g("prosegui"),g("proseguiConferma"),d.isModificaMipiace=d.isModificaCarrello=!1})["catch"](function(e){d.richiestaCodice=!1,window.top.GUESTAREA.loading.hide(),setTimeout(function(){window.scrollTo(0,0)}),d.checkOts=!0,g("prosegui"),g("proseguiConferma"),d.isModificaMipiace=d.isModificaCarrello=!1,r.error("send ots code ERROR",e)}))}),this.resetOts=function(){this.resetOtsErrors(),this.codiceOts=""},this.resetOtsErrors=function(){this.erroreCodiceOtsVuoto=!1,this.erroreCodiceOts=!1},this.checkOtsFunction=function(){this.codiceOts?i.isValidOts(this.codiceOts)?(this.erroreCodiceOts=!1,this.erroreCodiceOtsVuoto=!1):(this.erroreCodiceOts=!0,this.erroreCodiceOtsVuoto=!1):(this.erroreCodiceOtsVuoto=!0,this.erroreCodiceOts=!1),this.erroreCodiceOtsNonValido=!1},this.bottoneConferma=function(){this.checkOtsFunction(),this.erroreCodiceOts===!1&&this.erroreCodiceOtsVuoto===!1&&(this.bottoneDisabilitato=!0,this.erroreCodiceOtsNonValido=!1,t.OTS.verifica(this.codiceOts).then(function(){g("proseguiConferma"),d.checkOts=!1,d.bottoneDisabilitato=!1,o.contocorrenteself(d.pratica.idPratica,d.superPratica.idSuperPratica,!0)})["catch"](function(e){d.erroreCodiceOtsNonValido=!0,d.bottoneDisabilitato=!1,r.error("verify ots code ERROR",e)}))},this.resendCode=function(){this.richiestaCodice=!0,t.OTS.invia().then(function(){d.richiestaCodice=!1})["catch"](function(e){d.richiestaCodice=!1,d.erroreCodiceOts=!0,r.error("send ots code ERROR",e)})},this.bottoneAnnulla=function(){this.bottoneDisabilitato=!1,this.checkOts=!1},this.openCjConti=function(){var e=s.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"app/cms_components/cjConti/cjConti.html",controllerAs:"cjContiCtrl",bindToController:!0,controller:function(){this.blocked=!1,this.confirm=function(){this.blocked=!0,t.invokeAuth("app/token/CJC_apriContoCorrente",{idSuperpratica:p.idSuperpratica,idPratica:m.idPratica}).then(function(i){d.presaVisione=!0,i.codice_esito&&"OK"===i.codice_esito.toUpperCase()?(d.presaVisioneOk=!0,d.presaVisioneMsg="Ora puoi fare il primo accesso su app o internet per attivare l'otp virtuale",d.exitBtn="PROCEDI AL PRIMO ACCESSO"):i.codice_esito&&"KO"===i.codice_esito.toUpperCase()?(d.presaVisioneOk=!1,i.descrizione_esito?d.presaVisioneMsg='Siamo spiacenti, si è verificato il seguente errore: "'+i.descrizione_esito+'"':(r.warn("apriContoCorrente returned error with empty descrizione_esito"),d.presaVisioneMsg="Siamo spiacenti, non siamo riusciti a completare con successo l'operazione richiesta"),d.exitBtn="TORNA ALLA HOME"):(r.error("apriContoCorrente returned empty codice_esito"),d.presaVisioneOk=!1,d.presaVisioneMsg="Siamo spiacenti, non siamo riusciti a completare con successo l'operazione richiesta",d.exitBtn="TORNA ALLA HOME"),e.dismiss()})["catch"](function(i){d.presaVisione=!0,d.presaVisioneOk=!1,d.presaVisioneMsg="Siamo spiacenti, non siamo riusciti a completare con successo l'operazione richiesta",d.exitBtn="TORNA ALLA HOME",e.dismiss()})}}})}}]}}),angular.module("guestApp").filter("dotDate",function(){return function(e){return e.format("DD.MM.YY")}}).filter("hours",function(){return function(e){return e.format("HH.mm")}}).directive("garicordamidi",function(){return{restrict:"E",controllerAs:"ricordamidiCtrl",bindToController:!0,templateUrl:"app/ricordamidi/ricordamidi.html",controller:["utilsService","ricordamidiService","vorreiService","accountService","$uibModal","$scope","gaRouterService","cmbService",function(e,i,o,t,a,r,s,n){var l=this;this.ready=!1,this.now=new Date,this.listAppuntamenti=[],this.listAppuntamentiTelefonici=[],this.listaTotale=[],this.numAppuntamenti=0,this.numAppuntamentiTelefonici=0,this.numAppuntamentiTotali=0,this.openDropdown=!1,this.buttonSelected="ricordamidi",this.modifica=!1,this.enableCMB=e.enableCMB(),this.nomeTizio=t.profile.info().nome,this.numCarrello=0,this.listCarrello=[],this.numDesideri=0,this.wishList=[],this.ready=!1,this.isLoggedViaFB=t.auth.isFB(),i.getAppuntamenti().then(function(e){l.listAppuntamenti=[],e.forEach(function(e){e.descNote=_.replace(e.descNote,/\s*PROSPECT\:\s*/,""),this.push(_.assign(e,{dataEOra:{dataInizio:moment(e.dataInizio),dataFine:moment(e.dataFine)},scadenza:e.dataFine}))},l.listAppuntamenti),l.numAppuntamenti=l.listAppuntamenti.length,l.countTotale(),l.ready=!0})["catch"](function(){l.ready=!0}),this.enableCMB&&n.getAppuntamentoAttivo(!0).then(function(e){"CMB"==e.tipoServizio?e.scadenza=e.dataSel:e.scadenza=moment().startOf("day").valueOf(),l.listAppuntamentiTelefonici=[e],l.numAppuntamentiTelefonici=l.listAppuntamentiTelefonici.length,l.countTotale(),l.ready=!0})["catch"](function(){l.ready=!0}),this.countTotale=function(){this.listaTotale=this.listAppuntamenti.concat(this.listAppuntamentiTelefonici),this.numAppuntamentiTotali=this.listaTotale.length,this.listaTotale=_.orderBy(this.listaTotale,"scadenza","asc")},this.checkOpenDropdown=function(){this.openDropdown===!1?this.openDropdown=!0:this.openDropdown===!0&&(this.openDropdown=!1)},this.logout=function(){r.nav.logout()},this.badgeCount=0;var c=function(e,i,o,t){t?s.logout():(e&&e.length>0?(l.numCarrello=e.length,l.listCarrello=e):(l.numCarrello=0,l.listCarrello=[]),l.badgeCount+=l.numCarrello,i&&i.length>0?(l.numDesideri=i.length,l.wishList=i):(l.numDesideri=0,l.wishList=[]),l.ready=!0)};o.getListaVorrei(!1,c),this.callmeback=function(){s.callMeBack()},this.open=function(){a.open({animation:!0,templateUrl:"app/ricordamidi/ricordamidi-modal.html",controllerAs:"ricordamidiModalCtrl",bindToController:!0,controller:["accountService","$rootScope",function(e,i){var o=this;this.resetProfileError=!1,this.firstStep=!0,this.eliminaProfilo=function(){e.profile["delete"]().then(function(){o.firstStep=!1})["catch"](function(){o.resetProfileError=!0,o.firstStep=!1})},this.logout=function(){i.$broadcast("ga-navigation","logout")}}]})}}]}}),angular.module("guestApp").factory("vorreiService",["$window","$log","$q","accountService","utilsService",function(e,o,t,a,r){function s(i){return C?C:C=t(function(t,a){u(i).then(function(i){var a=[],r=i.elencoLike;_.forEach(r,function(e){var i=n(e.id,e.categoria,e.linkSchedaProdotto,e.descrizione,e.dataUltimaModifica);a.push(i)});var s=e.localStorage.getItem(b);if(s){s=JSON.parse(s);var l=function(){e.localStorage.removeItem(b),e.sessionStorage.setItem(f,JSON.stringify(a)),t(a)},c=function(e){return e.prodId===s.prodId},d=_.find(a,c);d?l():g({likeEntry:{categoria:s.catId,id:s.prodId,descrizione:s.prodDescr,linkSchedaProdotto:s.prodUrl}}).then(function(e){a.push(s),l()})["catch"](function(e){o.warn("Impossible to add anonim like to the wish list",e),l()})}else e.sessionStorage.setItem(f,JSON.stringify(a)),t(a)})["catch"](function(e){o.warn("Impossible to retrieve liked products list",e),a(e)})})}function n(e,i,o,t,a){return{prodId:e,catId:i,prodUrl:o,prodDescr:t,lastMod:a}}function l(e,i){E?s(e).then(function(e){i(e,!0)})["catch"](function(e){e.loginExpired?i(null,!1):i(null,!0)}):i([],!1)}function c(i,o){if(E){var t=function(e,t){if(null!=e){var a=!1;if(t){var r=function(e){return e.prodId===i.prodId},s=_.find(e,r);s&&(a=!0),o&&o(t,a)}else o&&o(t,a)}else o&&o(t,null,!0)};l(!0,t)}else e.sessionStorage.removeItem(f),o&&o(E,!1)}function d(i,t){E?g({likeEntry:{categoria:i.catId,id:i.prodId,descrizione:i.prodDescr,linkSchedaProdotto:i.prodUrl}}).then(function(o){var a=e.sessionStorage.getItem(f);a=a?JSON.parse(a):[],a.push(i),e.sessionStorage.setItem(f,JSON.stringify(a)),t&&t(E,!0)})["catch"](function(e){o.warn("Impossible to add product to the liked list",e),e.loginExpired&&(E=!1),t&&t(E,null,!0)}):(e.sessionStorage.removeItem(f),e.localStorage.setItem(b,JSON.stringify(i)),t&&t(E,!1))}function p(i,t){E?g({likeEntry:{categoria:i.catId,id:i.prodId,descrizione:i.prodDescr,linkSchedaProdotto:i.prodUrl}}).then(function(o){var a=e.sessionStorage.getItem(f);if(a){a=JSON.parse(a);var r=function(e){return e.prodId===i.prodId},s=_.remove(a,r);s.length>0&&e.sessionStorage.setItem(f,JSON.stringify(a))}t&&t(E,!1)})["catch"](function(e){o.warn("Impossible to remove product from the liked list",e),e.loginExpired&&(E=!1),t&&t(E,null,!0)}):(e.sessionStorage.removeItem(f),e.localStorage.removeItem(b),t&&t(E,!1))}function m(){e.sessionStorage.removeItem(f),e.localStorage.removeItem(b)}function u(i){return x?a.invokeAuth("app/token/GA_estrazioneWishlist",{},i):t(function(i,o){w?e.ndceSDK.services.callEstrazioneWishlist({scope:"np",input:{},callback:function(e){e&&"OK"===e.exitCode?i(e.payload):o(e)}}):o({exitCode:"KO",message:"IB NDCESDK NOT FOUND!"})})}function g(i){return x?a.invokeAuth("app/token/GA_modificaWishlist",i,!0):t(function(o,t){w?e.ndceSDK.services.callModificaWishlist({
scope:"np",input:i,callback:function(e){e&&"OK"===e.exitCode?o(e.payload):t(e)}}):t({exitCode:"KO",message:"IB NDCE SDK NOT FOUND!"})})}function v(e,o){var t=[],r=[],s=[],n=null,c=!1,d=["511","378","425","426","427","428","510","444","395","376","398","370","403","523","406","407","408","371"],p=function(l){l||(l=[]),a.invokeAuth("app/token/GA_getSimulazioniEOfferte",{},e).then(function(e){var a=e.listaCarrello;if(a&&a.length>0)if(a=_.filter(a,function(e){if(!c){if(e.codAreaOperativa==O)var i=A;else if(e.codAreaOperativa==y&&e.codCategoriaProdotto!=T)var i=P;else var i=[];var o=_.find(i,function(i){if(!c&&i.status==e.stato)return i.logout?(c=!0,!1):(e.eraseable=i.eraseable,e.descrizioneWFM=i.descr,e.particular=i.special,e.descrizioneProdottoBase="",e.prodottiBase=[],e.online=[],e.filiale=[],!0)});if(o){if(!e.particular)return!0;r.push(e)}}}),c)t=[],r=[];else{for(t=r,a=_.orderBy(a,"scadenza","asc"),_.forOwn(a,function(e){t.push(e)}),i=t.length-1;i>=0;i--)"1020"===t[i].stato&&t[i].pratiche.forEach(function(e){d.includes(e.stato)&&t.splice(i,1)});var p=null,m=_.find(t,function(e){if(e.stato>=1020&&e.pratiche&&e.pratiche.length>0&&(p=_.find(e.pratiche,function(e){if(e.codiceProdottoCDM&&"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()&&e.stato>=405)return!0})))return!0});m&&p&&(n={superPratica:m,pratica:p})}if(!c){var u=e.listaSimulazioni;u&&u.length>0&&(u=_.filter(u,function(e){if(e.codAreaOperativa==O)var i=S;else if(e.codAreaOperativa==y)var i=I;else var i=[];var o=_.find(i,function(i){if(i.status==e.stato)return e.eraseable=i.eraseable,!0});if(o)return!0}),_.forOwn(u,function(e){var i={};i.isSimulazione=!0,i.prodId=e.idSuperPratica,i.superpratica=e,e.codAreaOperativa==y?(e.codCategoriaProdotto==T?(i.catId="CONTI",i.prodDescr="Offerta XME Conto UP! N. "+e.codProposta):(i.catId="OFFERTA PerMe",i.prodDescr="Configurazione conto N."+e.codProposta),i.isConto=!0):e.codAreaOperativa==O?(i.catId="PRESTITO",i.prodDescr="Simulazione finanziamento N."+e.codProposta,i.isPrestito=!0,i.codSaup=e.codSaup):i.catId="IGNOTA",i.lastMod=e.scadenza,l.push(i)})),l.length>0&&(s=_.orderBy(l,"lastMod","asc"))}o&&o(t,s,n,c)})["catch"](function(e){l.length>0&&(s=_.orderBy(l,"lastMod","asc")),o&&o(t,s,n,c)})};l(e,p)}function h(e,i){var o=[];a.invokeAuth("app/token/GA_getVorreiCounter",{},e).then(function(e){o=e.listaSuperPraticheCounter,o=o&&o.length>0?_.filter(o,function(e){if("O"==e.codTipoProposta.toUpperCase()&&4==e.codAreaOperativa)var i=A;else if("O"==e.codTipoProposta.toUpperCase()&&1==e.codAreaOperativa)var i=P;else if(e.simulazioneSalvataConto&&"N"==e.simulazioneSalvataConto.toUpperCase())var i=S;else var i=[];var o=_.find(i,function(i){return i.status==e.stato});if(o)return!0}):[],i&&i(o)})["catch"](function(e){i&&i([])})}var f="likedProductList",b="likedProductAnonim",C=null,x=!r.isIB(),w=_.has(e,"ndceSDK.services.callEstrazioneWishlist")&&_.has(e,"ndceSDK.services.callModificaWishlist"),E=x?a.auth.isLogged():w,A=[{status:1001,descr:"CONTINUA",special:!1,eraseable:!0,logout:!1},{status:1028,descr:"CONTINUA",special:!1,eraseable:!1,logout:!1},{status:1032,descr:"IN CARICO ALLA BANCA",special:!0,eraseable:!1,logout:!1},{status:1033,descr:"CONTINUA",special:!0,eraseable:!1,logout:!1},{status:1034,descr:"CONTINUA",special:!0,eraseable:!1,logout:!1},{status:1035,descr:"IN CARICO ALLA BANCA",special:!1,eraseable:!0,logout:!1},{status:1036,descr:"CONTINUA",special:!1,eraseable:!1,logout:!1},{status:1037,descr:"CONTINUA",special:!1,eraseable:!1,logout:!1},{status:1038,descr:"CONTINUA",special:!1,eraseable:!1,logout:!1},{status:1039,descr:"CONTINUA",special:!1,eraseable:!1,logout:!1},{status:1041,descr:"IN CARICO ALLA BANCA",special:!1,eraseable:!0,logout:!0}],P=[{status:1001,descr:"CONTINUA",special:!1,eraseable:!0,logout:!1},{status:1020,descr:"CONTINUA",special:!1,eraseable:!0,logout:!1},{status:1205,descr:"IN CARICO ALLA BANCA",special:!1,eraseable:!1,logout:!0},{status:1206,descr:"IN CARICO ALLA BANCA",special:!1,eraseable:!0,logout:!0},{status:1012,descr:"IN CARICO ALLA BANCA",special:!1,eraseable:!1,logout:!0},{status:1231,descr:"ACCETTATA BANCA",special:!1,eraseable:!1,logout:!1}],S=[{status:1001,descr:"CONTINUA",special:!1,eraseable:!0,logout:!1},{status:1020,descr:"CONTINUA",special:!1,eraseable:!0,logout:!1}],I=[{status:1001,descr:"CONTINUA",special:!1,eraseable:!0,logout:!1}],O=4,y=1,T=45,k=function(e){return t(function(i,t){var r={utente:{idProspect:a.profile.info().idProspect},superpratica:e};a.invokeAuth("app/token/GA_getPratiche",r,!0).then(function(e){try{var a=e&&"KO"==e.exitCode;a&&t(r)}catch(r){}o.info("getPratiche successful"),i(e)})["catch"](function(e){o.warn("getPratiche failed",e),t(e)})})};return{areeOperative:{conto:y,prestito:O},categorieProd:{minori:T},createProd:n,getWishList:l,isProductLiked:c,addLikedProduct:d,removeLikedProduct:p,clearWishlist:m,getListaVorrei:v,getCounterVorrei:h,getDettaglioPratiche:k}}]),angular.module("guestApp").factory("sessionAliveManager",["$uibModal","$rootScope","accountService","gaRouterService",function(e,i,o,t){function a(i){this.remainingSeconds=30,f=!0,h=e.open({animation:!0,me:this,templateUrl:"app/services/sessionAliveManager/modal/sessionIsExpiringModal.html",controllerAs:"keepaliveModalCtrl",bindToController:!0,controller:["$scope",function(e){var o=this;clearInterval(g),o.remainingSeconds=30,g=setInterval(function(){0===o.remainingSeconds?(clearInterval(g),console.log("[SESSION] Expired Session"),h.dismiss(),i()):(o.remainingSeconds-=1,p.$apply())},1e3),this.stayConnectedButton=function(){s(),clearInterval(g),h.dismiss(),f=!1}}]})}function r(e){clearTimeout(u),u=setTimeout(function(){v?(v=!1,s(e),r(e)):(console.log("[SESSION] last 30 seconds"),a(e),window.parent.parent.scrollTo(0,0))},27e4)}function s(e){window.console.log("[SESSION] IMMEDIATE CALL KEEP ALIVE => ",(new Date).toISOString()),clearInterval(g),console.log("[SESSION] refresh"),o.invokeAuth("ndce-trx-xmeconto-v1/token/keepalive",{},{},!0).then(function(e){},function(i){i?i.hasOwnProperty("exitCode")&&"KO"===i.exitCode&&"SESSION_EXPIRED"===i.message&&(h&&h.dismiss(),f=!1,e()):(r(e),h&&h.dismiss(),f=!1)})}function n(e){$(document).ready(function(){parent.document.addEventListener("scroll",function(){f||c()}),window.addEventListener("mousemove",function(){f||c()}),window.addEventListener("message",function(i){i.data&&"BACKEND_SERVICE_CALLED"===i.data&&(r(e),h&&(h.dismiss(),f=!1))})})}function l(){console.log("keep alive triggered"),s()}function c(){var e=Date.now();e-m>3e4&&(l(),m=e)}function d(e,i){console.log("[SESSION] starting session management"),p=e,n(i),r(i)}var p=null,m=0,u=0,g=0,v=!1,h=null,f=!1;return{startSessionManagement:function(e,i){return d(e,i)}}}]),angular.module("guestApp").factory("gaRouterService",["$window","$log","PUBLIC","PRIVATE","GENERAL","accountService","utilsService","vorreiService","$location",function(e,i,o,t,a,r,s,n,l){var c=window.location.host.toUpperCase().indexOf("LOCALHOST")>=0,d=window.location.href.indexOf("giovani")>=0,p="";p=c?"index":d?"/it/giovani":"/it/persone-e-famiglie";var m=c?".html?isp-enable-log=true":".html",u=function(e){var i=[];return _.forOwn(e,function(e,o){i.push(encodeURIComponent(o)+"="+encodeURIComponent(e))}),i.join("&")};return{home:function(){i.info("REDIRECT: home"),e.location.href=p+m},homelogin:function(){i.info("REDIRECT: home login"),e.location.href=p+m+"#/guest"},login:function(){i.info("REDIRECT: GA login"),e.location.href=o.loginPage+m},loginOnlyGuest:function(i,t,a){var r=o.loginPage+".html";c&&(r="login.html");var s=u({FROM:i,TIPOOPE:t,UUID:a,SHOW_LOGIN:!0,SHOW_LOGIN_IB:!1});e.top.location.href=r+"#?"+s},loginOnlyIB:function(i,t,a){var r=o.loginPage+".html";c&&(r="login.html");var s=u({FROM:i,TIPOOPE:t,UUID:a,SHOW_LOGIN:!1,SHOW_LOGIN_IB:!0});e.top.location.href=r+"#?"+s},loginOnlyIBNew:function(i,t,a){var r=o.loginPageNew+".html";c&&(r="login.html");var s=u({FROM:i,TIPOOPE:t,UUID:a,SHOW_LOGIN:!1,SHOW_LOGIN_IB:!0});e.top.location.href=r+"#?"+s},logout:function(){r.logout().then(function(){e.location.href=p+m})["catch"](function(){e.location.href=p+m}),n.clearWishlist()},landing:function(t){i.info("REDIRECT: landing"),!t&&l.url()?e.location.href=o.landingPage+m+"#"+l.url():e.location.href=o.landingPage+m},signup:function(){i.info("REDIRECT: signup"),l.url()?e.location.href=o.signinPage+m+"#"+l.url():e.location.href=o.signinPage+m},changePassword:function(o){i.info("REDIRECT: changePassword"),o||(o=""),e.location.href=t.changePwdPage+m+o},ricordamidi:function(){i.info("REDIRECT: ricordamidi"),e.location.href=t.rememberMeofPage+m},vorrei:function(){i.info("REDIRECT: vorrei"),e.location.href=t.wouldLikePage+m},vorreiTimeoutSession:function(){i.info("REDIRECT: vorrei timeout session"),e.location.href=t.wouldLikePage+m},appt:function(){i.info("REDIRECT: prendi appuntamento"),e.location.href=o.makeAppointmentPage+m},ccselfConfiguratore:function(o,t){i.info("REDIRECT: ccselfconfiguratore");var a="/it/persone-e-famiglie/prodotti/tool/contocorrenteselfconfig.html";if(o&&t){var r=u({ID_PRATICA:o,ID_SUPERPRATICA:t});e.location.href=a+"#?"+r}else e.location.href=a},ccselfConfiguratoreMinori:function(o){i.info("REDIRECT: ccselfconfiguratore");var t="/it/persone-e-famiglie/prodotti/tool/contocorrenteupselfconfig.html";if(o){var a=u({ID_SUPERPRATICA:o});e.location.href=t+"#?"+a}else e.location.href=t},contocorrenteself:function(o,t,a,r){i.info("REDIRECT: contocorrenteself");var s="/it/persone-e-famiglie/prodotti/conti-e-libretti/conto-perme/contocorrenteself.html";if(o&&t&&!a&&r){var n=u({ID_PRATICA:o,ID_SUPERPRATICA:t,OTS:"N",ID_FLOW:r});e.location.href=s+"#?"+n}else if(o&&t&&!a&&!r){var n=u({ID_PRATICA:o,ID_SUPERPRATICA:t,OTS:"N"});e.location.href=s+"#?"+n}else if(o&&t&&a){var n=u({ID_PRATICA:o,ID_SUPERPRATICA:t,OTS:"S"});e.location.href=s+"#?"+n}else e.location.href=s},prestito:function(o){i.info("REDIRECT: prestito");var t="/it/persone-e-famiglie/prodotti/tool/prestiti.html";if(o){var a=u({TIPO_CHIAMATA:"P",ID_PROPOSTA:o});e.location.href=t+"#?"+a}else e.location.href=t},primoAccesso:function(){i.info("REDIRECT: primo accesso"),e.location.href="https://www.intesasanpaolo.com/it/primo-accesso"},loginFromCMB:function(){i.info("REDIRECT: login from CallMeBack");var t=o.loginPage+m,a=u({FROM:"CALLMEBACK",GOTO:e.location.href});e.location.href=t+"#?"+a},loginIBFromCMB:function(){i.info("REDIRECT: IB login from CallMeBack"),e.sessionStorage.setItem("gotoib",JSON.stringify({statename:"callmeback"})),e.location.href=a.searchLoginPage+m},signupFromCMB:function(){i.info("REDIRECT: signup from CallMeBack");var t=o.signinPage+m,a=u({FROM:"CALLMEBACK",GOTO:e.location.href});e.location.href=t+"#?"+a},callMeBack:function(){i.info("REDIRECT: tool CallMeBack"),e.location.href=t.callmebackPage+m}}}]),angular.module("guestApp").factory("ricordamidiService",["$arch","accountService","$q","$window","$rootScope","$log",function(e,i,o,t,a,r){function s(){return i.invokeAuth("app/token/GA_appuntamenti",{}).then(function(e){return _.sortBy(e.listaAppuntamenti,"dataInizio")})}function n(i){return e.invoke("app/public/dettaglioFilialeGeoloc",i).then(function(e){return e.filialeGeoloc})}function l(e){return o("CMB"==e.tipoServizio?function(o,t){return r.info("Delete appt attempt"),i.invokeAuth("app/token/CMB_removeAppuntamento",e).then(function(){o()})["catch"](function(e){r.warn("Delete appt failed",e),t()})}:function(o,t){return r.info("Delete appt attempt"),i.invokeAuth("app/token/GA_eliminaAppuntamento",e).then(function(){o()})["catch"](function(e){r.warn("Delete appt failed",e),t()})})}function c(e){t.sessionStorage.setItem(p,JSON.stringify(e)),a.$broadcast("ga-navigation","makeAppointment")}function d(){var e=JSON.parse(t.sessionStorage.getItem(p));return t.sessionStorage.removeItem(p),e}var p="gaeditappt";return{getAppuntamenti:s,getFilialeByKey:n,eliminaAppuntamento:l,apptEdit:c,getApptForEdit:d}}]),angular.module("guestApp").config(["ezfbProvider",function(e){e.setLocale("it_IT"),e.setInitParams({version:"v2.12"})}]).run(["ezfb","utilsService","$log",function(e,i,o){var t="";if(window.location.host.toUpperCase().indexOf("LOCALHOST")>=0)t="1635191623438567";else switch(i.whereami()){case"APPL":t="1796147437296080";break;case"SYST":t="183866638703049";break;case"BFIX":t="183866638703049";break;case"PROD":t="147392095707280"}e.init({appId:t})}]).factory("fbService",["ezfb","$q","$log",function(e,i,o){function t(){return i(function(i){e.login(function(t){o.info("ezfb.login"),t.authResponse&&e.api("/me",{fields:"first_name, last_name, email"},function(e){var o={api:e,auth:t};i(o)})},{scope:"email"})})}function a(){return i(function(i){e.logout(function(){i()})})}function r(){return i(function(i){e.api("/me",{fields:"name, email"},function(e){i(e)})})}return{login:t,logout:a,getUserInfo:r}}]),angular.module("guestApp").factory("gaExtToolsService",["$q","$uibModal","$log","accountService","$http","utilsService","gaRouterService","vorreiService","$rootScope","$window",function(e,i,o,t,a,r,s,n,l,c){var d=function(e,i,o){var a=function(a,n,l,c){if(c)if(o){var d=t.profile.info().nome+", l’area ospiti è dedicata a chi non è ancora nostro cliente. Se hai già i codici della banca online puoi accedere direttamente ai sevizi e alle operazioni";t.logout(),o({code:"BECAME_IB_CLIENT",msg:d})}else s.logout();else r.fromCjConti()||r.fromCjContiMinori()||r.fromCjPrestiti()?i?i(s.landing):s.landing():a&&a.length>0?i?i(s.vorrei):s.vorrei():e?i&&i():i?i(s.landing):s.landing()};n.getListaVorrei(!1,a)},p=function(e){var i=[];return _.forOwn(e,function(e,o){i.push(encodeURIComponent(o)+"="+encodeURIComponent(e))}),i.join("&")},m=function(){var e=i.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"app/accedi/errorPrestitiConti-modal.html",controllerAs:"errorCtrl",bindToController:!0,controller:["utilsService",function(i){var o=this;o.showError=!0,o.loadModal=function(){switch(i.fromCjConti()?(o.isConto=!0,o.isContoMinori=!1,o.isPrestito=!1):i.fromCjContiMinori()?(o.isConto=!1,o.isContoMinori=!0,o.isPrestito=!1):i.fromCjPrestiti()&&(o.isConto=!1,o.isContoMinori=!1,o.isPrestito=!0),o.isConto||o.isPrestito||o.isContoMinori){case o.isPrestito:o.buttonText="TROVA IL TUO PRESTITO",o.text="Ci scusiamo, ma per un problema tecnico,l'offerta che hai selezionato non è stata salvata correttamente. Se desideri proseguire con la tua richiesta torna alla pagina TROVA IL TUO PRESTITO e scegli la soluzione adatta a te.";break;case o.isConto:o.text="Ci scusiamo, ma per un problema tecnico il salvataggio della tua offerta non è andato a buon fine. Se desideri proseguire con l'apertura del conto torna alla pagina SCEGLI IL TUO STILE e trova la soluzione adatta a te.",o.buttonText="SCEGLI IL TUO STILE";break;case o.isContoMinori:o.text="Ci scusiamo, ma per un problema tecnico il salvataggio dell’offerta di XME Conto UP! non è andato a buon fine. Torna alla pagina PARLACI DI TUO FIGLIO e trova la soluzione più adatta a lui se desideri proseguire con l’apertura del conto.",o.buttonText="PARLACI DI TUO FIGLIO"}},this.loadModal(),this.clickEvent=function(){o.isPrestito?s.prestito():o.isConto?s.ccselfConfiguratore():o.isContoMinori&&s.ccselfConfiguratoreMinori()},this.closeModal=function(){window.top.GUESTAREA.loading.show(),d(!0,function(i){window.top.GUESTAREA.loading.hide(),e.dismiss(),i&&i()})}}]})},u=function(){var e=r.getSearchParams().UUID,i=r.getSearchParams().TIPOOPE,o=p({TIPOOPE:i,UUID:e});"APPL"===r.whereami()?window.location.href="/content/vetrina/it/test/registration.html#?"+o:window.location.href="/it/persone-e-famiglie/prodotti/tool/apertura-conto-corrente-online.html#?"+o},g=function(e,i){var a="ACQUISTA"===r.getSearchParams().TIPOOPE.toUpperCase(),n=t.profile.info(),l=n.idProspect||n.ndgProspect||"",c=n.nome||"",d=n.cognome||"",p=n.email||"",u=n.codiceFiscale||"",g=n.cell||"";t.salvaProposta(l,u,g,p,c,d,a,r.getSearchParams().UUID).then(function(i){e(function(){if(a){var e=_.find(i.pratiche,function(e){return"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()});!e&&i.pratiche&&i.pratiche.length>0&&(e=i.pratiche[0]),s.contocorrenteself(e.idPratica,e.idSuperPratica,!1,"4")}else s.vorrei()})})["catch"](function(i){o.error("error calling salvaProposta"+i),e(m)})},v=function(e,i){var n=t.profile.info(),l=n.idProspect||n.ndgProspect||"",c=r.getSearchParams().ID,d="/script/ndce/prestitimulti/vendita/api/servizi/generaSimulazione/"+c+"/"+l;a({method:"POST",url:d}).then(function(i){o.info(i),e(_.isUndefined(i.data.responseOK)||i.data.responseOK?s.vorrei:m)})["catch"](function(i){o.error(i),e(m)})},h=function(){return e(function(e,i){var t=function(i){if(r.fromCallMeBack()){var t=r.getSearchParams().GOTO;t&&""!=t&&r.isValidUrl(t)?(o.info("GOTO: "+t),c.location.href=t):s.home()}else e?e(i):i()},a=function(e){i(e)};d(!1,t,a)})},f=function(){return e(function(e,i){r.fromCjConti()?u(e,i):r.fromCjContiMinori()?g(e,i):r.fromCjPrestiti()?v(e,i):e()})};return{postLogin:h,salvaProposta:f}}]),angular.module("guestApp").factory("accountService",["$arch","$q","$log","$window","$rootScope","utilsService","$cookies","modalService",function(e,i,o,t,a,r,s,n){function l(t,a,s){var n=r.fromCjConti()?"GA_INCAPSULATA":"GA_STANDALONE";return i(function(i,r){o.info("Login attempt"),e.invoke("sec/login/guestlogin",{username:t,password:a,clientId:j.id,clientSecret:j.secret},_.assign({Page:n},Z)).then(M(!1,s,!1,n)).then(function(){o.info("Login successful"),i()})["catch"](function(e){o.warn("Login failed",e),r("LOGIN_ERROR_GA"===e.message?"LOGIN_ERROR":"LOGIN_ERROR_GA_EXP"===e.message?"PWD_EXPIRED":e.message)})})}function c(){return o.info("Logout attempt"),q("sec/logout/logout",{accessToken:B().token,clientId:j.id,clientSecret:j.secret}).then(function(){F()})["catch"](function(){F()})}function d(){return i(function(e){e(null===B()?!1:!0)})}function p(t){return i(function(i,a){return o.info("Reset pwd attempt"),e.invoke("app/public/GA_resetPassword",{utente:{email:t}},Z).then(function(){i()})["catch"](function(e){o.warn("Reset pwd failed",e),a(e)})})}function m(t,a,r){return i(function(i,s){return o.info("Profile changeExpiredPwd attempt"),e.invoke("app/public/GA_cambiaPassword",{utente:{email:t},password:a,newPassword:r},Z).then(function(){i()})["catch"](function(e){o.warn("Profile changeExpiredPwd failed",e),s()})})}function u(t){return i(function(i,a){e.invoke("app/public/GA_anagraficheResidenza",{codiceRicerca:"PAESI"},_.assign({Page:t||"GA_STANDALONE"},Z)).then(function(e){i(e.listaPaesi)})["catch"](function(e){o.warn("anagraficheResidenza failed",e),a()})})}function g(t){return i(function(i,a){e.invoke("app/public/GA_anagraficheResidenza",{codiceRicerca:"PROVINCE"},_.assign({Page:t||"GA_STANDALONE"},Z)).then(function(e){i(e.listaProvince)})["catch"](function(e){o.warn("anagraficheResidenza failed",e),a()})})}function v(t,a){return i(function(i,r){e.invoke("app/public/GA_anagraficheResidenza",{codiceRicerca:"COMUNI",codFiltro:t},_.assign({Page:a||"GA_STANDALONE"},Z)).then(function(e){i(e.listaComuni)})["catch"](function(e){o.warn("anagraficheResidenza failed",e),r()})})}function h(t,a,r,s,n){return i(function(i,l){e.invoke("app/public/GA_controllaUtenza",{utente:{email:t,nome:a,cognome:r},"g-recaptcha-response":s},_.assign({Page:n||"GA_STANDALONE"},Z)).then(function(e){e.utente.censito||e.utente.cliente?e.utente.censito||e.utente.cliente?l(e.utente):l():i()})["catch"](function(e){o.warn("Checkuser: fail",e),l()})})}function f(t,a){return i(function(i,r){e.invoke("app/public/PUBLIC_checkOfferta",t,_.assign({Page:a||"GA_STANDALONE"},Z)).then(function(e){i(e)})["catch"](function(e){o.warn("Checkuser: fail",e),r(e)})})}function b(t,a){return i(function(i,r){e.invoke("app/public/PUBLIC_isCliente",t,_.assign({Page:a||"GA_STANDALONE"},Z)).then(function(e){i(e)})["catch"](function(e){o.warn("Checkuser: fail",e),r()})})}function C(t,a){return i(function(i,r){e.invoke("app/public/retrieveContentCms",t,_.assign({Page:a||"GA_STANDALONE"},Z)).then(function(e){i(e)})["catch"](function(e){o.warn("Checkuser: fail",e),r()})})}function x(t){return o.info("Signup attempt"),i(function(i,o){e.invoke("app/public/GA_registraGuest",t,_.assign({Page:"GA_STANDALONE"},Z)).then(function(e){e.utente.cliente&&e.utente.contrattiAttivi?o(!0):i(e)})["catch"](function(e){o("codiceFiscale"==e.message?"errorCodFisc":"ERROR_RECAPTCHA"==e.message?"ERROR_RECAPTCHA":!1)})})}function w(t,a,r,s){return i(function(i,n){o.info("User activation attempt"),e.invoke("sec/guestarea/attivautenzaexecution",{username:t,token:a,acronimo:"FRVP",clientId:j.id,clientSecret:j.secret,ots:r,trxots:s},_.assign({Page:"GA_STANDALONE"},Z)).then(M(!1,!1,!0)).then(function(){o.info("User activation successful"),i()})["catch"](function(e){o.warn("User activation failed",e),"EXPIRED_TOKEN_GA"===e.message||"INVALID_TOKEN_GA"===e.message?n("TOKEN_ERROR"):"LOGIN_ERROR_4"===e.message?n("OTS_ERROR"):n()})})}function E(t){return i(function(i,a){o.info("User activation simulation attempt"),e.invoke("sec/guestarea/attivautenzasimulation",{username:t},_.assign({Page:"GA_STANDALONE"},Z)).then(function(e){o.info("User activation simulation successful"),i(e)})["catch"](function(e){o.warn("User activation simulation failed",e),"BLOCKED_OTS"===e.message?a("BLOCKED_OTS"):a()})})}function A(t,a){return i(function(i,r){o.info("User registration simulation attempt"),e.invoke("sec/guestarea/registraguestsimulation",{username:t,"g-recaptcha-response":a},_.assign({Page:"GA_INCAPSULATA"},Z)).then(function(e){o.info("User registration simulation successful"),i(e)})["catch"](function(e){o.warn("User registration simulation failed",e),"BLOCKED_OTS"===e.message?r("BLOCKED_OTS"):"ERROR_RECAPTCHA"===e.message?r("ERROR_RECAPTCHA"):"CAPTCHA_TIMEOUT_ERROR"===e.message?r("CAPTCHA_TIMEOUT_ERROR"):r()})})}function P(t,a,r,s,n,l,c){return i(function(i,d){o.info("User registration execution attempt"),e.invoke("sec/guestarea/registraguestexecution",{username:r,clientId:j.id,clientSecret:j.secret,ots:l,trxots:n,utente:{nome:t,cognome:a,email:r,codiceFiscale:c},consensoPrivacy1:!0,consensoPrivacy2:s,password:l,tipoCensimento:2},_.assign({Page:"GA_INCAPSULATA"},Z)).then(M(!1,!1,!0,"GA_INCAPSULATA")).then(function(e){o.info("User registration execution successful"),i(e)})["catch"](function(e){o.warn("User registration execution failed",e),"INVALID_CP_KEY"===e.message?d("INVALID_CP_KEY"):"LOGIN_ERROR_4"===e.message?d("LOGIN_ERROR_4"):"LOGIN_ERROR_5"===e.message?d("LOGIN_ERROR_5"):"BLOCKED_MAX_TRY"===e.message?d("BLOCKED_MAX_TRY"):"LOGIN_ERROR_9"===e.message?d("LOGIN_ERROR_9"):d()})})}function S(t){return i(function(i,a){o.info("richiedi OTS"),e.invoke("sec/guestarea/inviaots",{trxots:t},_.assign({Page:"GA_INCAPSULATA"},Z)).then(function(e){i()})["catch"](function(e){o.error("OTS request failed: ",e.message),a(e)})})}function I(e,t,a,r,s,n){return i(function(i,l){o.info("User registration status"),q("ndce-trx-xmeconto-v1/token/checkCertificazioneCellulare",{prefissoInternazionale:e?n:"",numeroTelefono:e?e:"",abi:t,email:a,idSuperpratica:r?r:"",restrictedFlow:s},_.assign({Page:"GA_INCAPSULATA"},Z)).then(function(e){o.info("User registration status successful"),i(e)})["catch"](function(e){o.warn("User registration status failed",e),l()})})}function O(e,t,a,r){return i(function(i,s){o.info("User registration certify"),q("ndce-trx-xmeconto-v1/token/certificaCellulareCertify",{abi:"01025",internationalPrefix:e,phoneNumber:t,restrictedFlow:a},!0,{Page:r||"GA_INCAPSULATA"}).then(function(e){o.info("User registration certify successful"),i(e)})["catch"](function(e){o.warn("User registration certify failed",e),s("OTP00101"===e.returnMessages.ERROR[0].errorCode?"429":"NAG01705"===e.returnMessages.ERROR[0].errorCode?"504":"XMC01001"===e.returnMessages.ERROR[0].errorCode?"409":"GENERIC_ERROR")})})}function y(e,t,a,r,s,n,l){return i(function(e,i){o.info("User registration verify"),W("ndce-trx-xmeconto-v1/token/certificaCellulareVerify",{codAbi:t,codFiliale:a,codiceSocieta:r,ots:s,tokenId:n},!0,{Page:l||"GA_INCAPSULATA"}).then(function(i){o.info("User registration verify successful"),e(i)})["catch"](function(e){o.warn("User registration verify failed",e),i("Response 423"===e.message?"Response 423":"Response 429"===e.message?"Response 429":"OTP00104"===e.returnMessages.ERROR[0].errorCode?"401":"NAG01704"===e.returnMessages.ERROR[0].errorCode?"504":"GENERIC_ERROR")})})}function T(){return o.info("Profile delete attempt"),q("app/token/GA_eliminaProfilo",{utente:{email:B().user.email}})}function k(e){return i(function(i,t){return o.info("Profile edit attempt"),q("app/token/GA_modificaProfilo",e).then(function(e){try{var o=e&&"KO"==e.exitCode;if(o){var a=e.returnMessages&&e.returnMessages.ERROR&&e.returnMessages.ERROR[0]&&"0000204"===e.returnMessages.ERROR[0].errorCode;t(a?"0000204":e.returnMessages&&e.returnMessages.ERROR&&e.returnMessages.ERROR[0]&&"0000201"===e.returnMessages.ERROR[0].errorCode?"0000201":"GENERIC_ERROR")}}catch(r){}i()})["catch"](function(e){o.warn("Profile changeModificaProfilo failed",e),t(e&&e.returnMessages&&e.returnMessages.ERROR&&e.returnMessages.ERROR[0]&&"0000204"===e.returnMessages.ERROR[0].errorCode?"0000204":e.returnMessages&&e.returnMessages.ERROR&&e.returnMessages.ERROR[0]&&"0000201"===e.returnMessages.ERROR[0].errorCode?"0000201":"GENERIC_ERROR")})})}function z(e,t){return i(function(i,a){return o.info("Profile changePwd attempt"),q("app/token/GA_cambiaPassword",{utente:{email:B().user.email},password:e,newPassword:t}).then(function(){i()})["catch"](function(e){o.warn("Profile changePwd failed",e),e.message?a("PASSWORD_EXPIRED"):a()})})}function R(i,t,a,r,s,n,l,c,d,p){o.info("call to salvaProposta");var m={};return m.idProspect=i,m.codiceFiscale=t?t:"",m.smsCliente=a?a:"",m.prefisso=p?p:"+39",m.nome=s,m.cognome=n,m.email=r,m.simulazioneSalvata=l?"N":"S",c&&(m.uuid=c),e.invoke("app/public/PUBLIC_salvaProposta",m,_.assign({Page:d||"GA_STANDALONE"},Z))}function N(e,i){return q("app/token/CCSD_recuperaSuperpratica",e,_.assign({Page:i||"GA_STANDALONE"},Z))}function M(e,a,r,s){return function(l){return X={token:l.accessToken?l.accessToken:l,isFB:e,user:null,loggedSince:moment().valueOf()},i(function(e,i){q("app/token/GA_userInfo",{},!0,{Page:s||"GA_STANDALONE"}).then(function(s){o.info("Get user info");var l=!1;if(s&&s.utente)if(s.utente.nome?s.utente.cognome?s.utente.email?s.utente.idProspect||(o.error("user with no idProspect"),l=!0):(o.error("user with no email"),l=!0):(o.error("user with no cognome"),l=!0):(o.error("user with no name"),l=!0),l)i({exitCode:"KO"});else{if(s&&s.utente&&s.utente.cellProspect){var d=s.utente.cellProspect.indexOf(" ");d>-1?(s.utente.prefisso=s.utente.cellProspect.substring(0,d),s.utente.cell=s.utente.cellProspect.substring(d+1)):s.utente.prefisso="+39"}X.user=_.defaults(_.pick(s.utente,["nome","cognome","dataNascita","email","cell","codiceFiscale","idProspect","cliente","prefisso","flagPrivacy"]),{nome:null,cognome:null,dataNascita:null,email:null,cell:null,codiceFiscale:null,idProspect:null,cliente:!1,prefisso:null,flagPrivacy:!1}),t.localStorage.getItem("isFromDem")&&t.localStorage.removeItem("isFromDem"),t.sessionStorage.setItem(H,JSON.stringify(X)),a?t.localStorage.setItem(Y,X.user.email):t.localStorage.removeItem(Y),!r&&s.aggiornaPrivacy?n.openInformativa(!1).then(function(t){var a={utente:{nome:s.utente.nome,cognome:s.utente.cognome,idProspect:s.utente.idProspect},consensoPrivacy1:!0,consensoPrivacy2:t,tipoCensimento:2};k(a).then(function(){e()})["catch"](function(e){o.error("edit profile error"),n.openInformativa(!0)["catch"](function(e){o.error("redirect to login"),c(),i(e)})})})["catch"](function(e){o.error("open informativa error"),i()}):e()}else i({exitCode:"KO",message:"NO_LONGER_A_PROSPECT"})})["catch"](function(e){i(e)})})}}function L(e){return i(function(i,a){q("app/token/GA_userInfo",{},!0,{Page:e||"GA_STANDALONE"}).then(function(e){if(o.info("Get user info"),e&&e.utente){if(e.utente.cellProspect){var r=e.utente.cellProspect.indexOf(" ");r>-1?(e.utente.prefisso=e.utente.cellProspect.substring(0,r),e.utente.cell=e.utente.cellProspect.substring(r+1)):e.utente.prefisso="+39"}else e.utente.prefisso="+39";X=B(),X.user=_.defaults(_.pick(e.utente,["nome","cognome","dataNascita","email","cell","codiceFiscale","ndgProspect","idProspect","cliente","prefisso","flagPrivacy"]),{nome:null,cognome:null,dataNascita:null,email:null,cell:null,codiceFiscale:null,ndgProspect:null,idProspect:null,cliente:!1,prefisso:null,flagPrivacy:!1}),t.sessionStorage.setItem(H,JSON.stringify(X)),i()}else a({exitCode:"KO",message:"NO_LONGER_A_PROSPECT"})})["catch"](function(e){a(e)})})}function D(t,a){return i(function(i,r){e.invoke("app/public/disabilitazioneCJ",t,_.assign({Page:a||"GA_STANDALONE"},Z)).then(function(e){i(e)})["catch"](function(e){o.warn("CheckCJ: fail",e),r()})})}function B(){var e=t.sessionStorage.getItem(H);if(e=e?JSON.parse(e):null,e&&(X=e),X){var i=t.sessionStorage.getItem("tokenJWT");i&&(o.info("AUTH_STORAGEKEY updating JWT token"),X.token=i,t.sessionStorage.setItem(H,JSON.stringify(X)),t.sessionStorage.removeItem("tokenJWT"))}else o.warn("AUTH_STORAGEKEY is empty");return X}function G(){return null!==B()}function V(){t.sessionStorage.removeItem(H),X=null;var e="likedProductList",i="likedProductAnonim";t.sessionStorage.removeItem(e),t.sessionStorage.removeItem(i),t.localStorage.removeItem("isFromDem")}function U(){return t.localStorage.getItem(Y)}function F(){V()}function $(t,a){return i(function(i,r){e.invoke("sec/guestarea/switchtoken",{"g-recaptcha-response":a},_.assign({Page:"GA_INCAPSULATA"},Z),{params:{jwt:t}}).then(M(!1,!1,!0,"GA_INCAPSULATA")).then(function(){o.info("Switch successful"),i()})["catch"](function(e){o.warn("SwitchToken failed",e),r("SESSION_EXPIRED"===e.message?"SESSION_EXPIRED":"GENERIC_ERROR")})})}function q(t,r,s,n){return i(function(i,l){G()?(window.postMessage("BACKEND_SERVICE_CALLED"),e.invoke(t,r,_.assign({Authorization:"Bearer "+B().token},Z,n)).then(i)["catch"](function(e){if("SESSION_DELETED"===e.message||"SESSION_EXPIRED"===e.message||e.returnMessages&&e.returnMessages.ERROR&&e.returnMessages.ERROR[0]&&401===e.returnMessages.ERROR[0].messageKey){if(o.error("AUTH SERVICE ERROR! Redirect to login.",e),F(),!s)return void a.$broadcast("ga-navigation","login");e.loginExpired=!0}l(e)})):l({exitCode:"KO",message:"NOT_LOGGED"})})}function W(e,o,a,r){return o.clientId=j.id,o.clientSecret=j.secret,i(function(i,s){q(e,o,a,r).then(function(e){X=B(),X.token=e.accessToken,t.sessionStorage.setItem(H,JSON.stringify(X)),i(e)})["catch"](function(e){s(e)})})}var H="gaauth",Y="gaemail",K="trxots",X=null,j={id:null,secret:null};switch(r.whereami()){case"APPL":j.id="bce8ea0b-5f4c-4ea5-808c-8de2cdc60b55",j.secret="1e43e5a4-0c71-4d8c-9fd6-d59079285855";break;case"SYST":j.id="2b3424a3-1569-4565-93e8-84e6cf4551dc",j.secret="afbf3dd0-429a-4bb3-91a6-053fd7b4e624";break;case"BFIX":j.id="2b3424a3-1569-4565-93e8-84e6cf4551dc",j.secret="afbf3dd0-429a-4bb3-91a6-053fd7b4e624";break;case"PROD":j.id="40501a2a-989b-461f-aaa5-56f54c7de337",j.secret="c29268a7-734a-45f5-83cd-6e72dbee1af4"}var Z=r.getDeviceHeaders(),J=function(){return i(function(e,i){o.info("OTS request"),q("sec/guestarea/recuperaoperazionesimulation",{},!0).then(function(i){o.info("OTS sent to user"),t.sessionStorage.setItem(K,i.trxots);var a=r.whereami();"APPL"!==a&&"SYST"!==a&&"BFIX"!==a||(o.info("recuperaoperazionesimulation:"),o.info(i)),e()})["catch"](function(e){o.error("OTS request failed: ",e.message),i(e)})})},Q=function(e){return i(function(i,a){o.info("OTS validation request");var r=t.sessionStorage.getItem(K);q("sec/guestarea/recuperaoperazioneexecution",{ots:e,clientId:j.id,clientSecret:j.secret,trxots:r},!0).then(function(e){o.info("OTS validated"),t.sessionStorage.removeItem(K),X=B(),X.token=e.accessToken,t.sessionStorage.setItem(H,JSON.stringify(X)),i()})["catch"](function(e){o.error("OTS validation failed: ",e),a(e)})})};return{login:l,logout:c,getRememberMeEmail:U,auth:{isLogged:G,isFB:function(){return!!G()&&B().isFB},loggedSince:function(){return B().loggedSince}},autoLogin:d,resetPassword:p,
changeExpiredPwd:m,signup:{anagPaesi:u,anagProvince:g,anagComuni:v,checkUser:h,checkOfferta:f,isClienteGA:b,signup:x,signupActivation:w,signupActivationSimulation:E,getCmsContent:C},profile:{info:function(){return G()?B().user:null},"delete":T,edit:k,changePwd:z},OTS:{invia:J,verifica:Q},updateUserInfo:L,salvaProposta:R,verificaSuperpratica:N,statusguest:I,certifyguest:O,verifyguest:y,invokeAuth:q,invokeAuthUpdateToken:W,registraguestsimulation:A,registraguestexecution:P,richiediOts:S,switchToken:$,controllaDisabilitazioneCJ:D}}]),angular.module("guestApp").factory("modalService",["$arch","$q","$log","$window","$rootScope","$uibModal","utilsService","$cookies",function(e,i,o,t,a,r,s,n){function l(e){return i(function(i,o){r.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"app/modalPrivacy/modalPrivacy.html",controllerAs:"privacyCtrl",bindToController:!0,windowClass:"privacy-window",controller:["utilsService",function(t){var a=this;a.presaVisioneDoc=!1;var r=null,s={titolo:"aggiornamento informativa privacy",intestazione:"Abbiamo aggiornato i Termini di Servizio e l'informativa sulla Privacy di Intesa Sanpaolo per fornirti maggiore trasparenza sui dati che raccogliamo su di te e su come vengono usati, nonchè sui diritti che puoi esercitare sui tuoi dati personali.",presaVisione:"Dichiaro di aver preso visione del documento",visDocumento:"Visualizza documento",linkDocumento:"/content/dam/vetrina/documenti/privacy/informativa_intesa_sanpaolo.pdf",corpoP1:"Tenuto conto dell'Informativa resami ai sensi dell'art. 13 e 14 del Regolamento, prendo atto del trattamento dei miei Dati Personali effettuato per le finalità descritte in Informativa, alle lettere a) e b) della Sezione 3 \"Finalità e base giuridica del trattamento dei dati personali\". Inoltre, con riferimento al trattamento per la finalità di marketing diretto ed indiretto, di cui alla lettera c) della Sezione 3 dell’informativa,",corpoP2:"al trattamento dei dati personali a fini di informazione commerciale, offerte dirette, indagini di mercato o di customer satisfaction relative a prodotti e servizi della Banca e di società del Gruppo Intesa Sanpaolo.",consenso:"Presto il consenso",dissenso:"Nego il consenso",errore:"Campo obbligatorio: seleziona la casella per proseguire",valoreConsenso:"Si",valoreDissenso:"No",popover:"Dichiara di aver preso visione del documento per procedere",erroreTecnico:"Ci scusiamo, a causa di un problema tecnico la tua richiesta non è andata a buon fine. Riprova più tardi."};a.showError=e,a.trattamentoDatiPersonali=null,a.info=s,a.showPopover=!1,a.radioHandler=function(){a.trattamentoDatiPersonali=a.trattamentoDatiPersonali==r?null:a.trattamentoDatiPersonali,r=a.trattamentoDatiPersonali},a.setShowPopover=function(e){a.showPopover=!a.presaVisioneDoc&&e},a.continua=function(){a.presaVisioneDoc&&i(a.trattamentoDatiPersonali==a.info.valoreConsenso)},a.riprova=function(){o({exitCode:"KO",message:""})}}]})})}return{openInformativa:l}}]),angular.module("guestApp").directive("gamodificaPassword",function(){return{restrict:"E",controllerAs:"ctrl",bindToController:!0,templateUrl:"app/modificaPassword/modificaPassword.html",scope:{email:"="},controller:["utilsService","accountService","$uibModal","$rootScope","$location",function(e,i,o,t,a){this.currentStep=1,this.passwordMatch=!0,this.erroreEmail=!1,this.erroreEmailVuota=!1,this.erroreOldPassword=!1,this.erroreOldPasswordVuota=!1,this.errorePassword=!1,this.errorePasswordVuota=!1,this.erroreConfirmPassword=!1,this.erroreConfirmPasswordVuota=!1,this.bottoneDisabilitatoStep1=!1,this.changePwdError=0;var r=this;this.emailFromUrl=!1,this.emailCliente=e.getSearchParams().email,this.emailCliente&&(this.email=this.emailCliente,this.emailFromUrl=!0),this.expired=e.getSearchParams().exp,this.openDropdown=!1,this.isLogged=i.auth.isLogged(),this.isLogged&&(this.nomeTizio=i.profile.info().nome),this.isLogged||this.emailCliente||t.$broadcast("ga-navigation","login"),this.changePwd=function(){this.passwordMatch=!0,this.isLogged||(this.email?e.isValidEmail(this.email)?(this.erroreEmail=!1,this.erroreEmailVuota=!1):(this.erroreEmail=!0,this.erroreEmailVuota=!1):(this.erroreEmailVuota=!0,this.erroreEmail=!1)),this.oldPassword?e.isValidPassword(this.oldPassword)?(this.erroreOldPassword=!1,this.erroreOldPasswordVuota=!1):(this.erroreOldPassword=!0,this.erroreOldPasswordVuota=!1):(this.erroreOldPasswordVuota=!0,this.erroreOldPassword=!1),this.password?e.isValidPasswordRegistrazione(this.password)?(this.errorePassword=!1,this.errorePasswordVuota=!1):(this.errorePassword=!0,this.errorePasswordVuota=!1):(this.errorePasswordVuota=!0,this.errorePassword=!1),this.confirmPassword?e.isValidPasswordRegistrazione(this.confirmPassword)?(this.erroreConfirmPassword=!1,this.erroreConfirmPasswordVuota=!1):(this.erroreConfirmPassword=!0,this.erroreConfirmPasswordVuota=!1):(this.erroreConfirmPasswordVuota=!0,this.erroreConfirmPassword=!1),this.erroreOldPassword===!1&&this.erroreOldPasswordVuota===!1&&this.errorePassword===!1&&this.errorePasswordVuota===!1&&this.erroreConfirmPassword===!1&&this.erroreConfirmPasswordVuota===!1&&(this.passwordMatch=!1,this.password===this.confirmPassword?this.passwordMatch=!0:this.passwordMatch=!1,this.passwordMatch===!0&&(this.bottoneDisabilitatoStep1=!0,this.email?i.changeExpiredPwd(this.email,this.oldPassword,this.password).then(function(){r.currentStep=2,r.bottoneDisabilitatoStep1=!1})["catch"](function(){r.changePwdError=1,r.currentStep=2,r.bottoneDisabilitatoStep1=!1}):i.profile.changePwd(this.oldPassword,this.password).then(function(){r.currentStep=2})["catch"](function(e){e?r.changePwdError=2:r.changePwdError=1,r.currentStep=2})))},this.checkEmail=function(){this.passwordMatch=!0,this.email?e.isValidEmail(this.email)?(this.erroreEmail=!1,this.erroreEmailVuota=!1,this.checkPasswordMatch()):(this.erroreEmail=!0,this.erroreEmailVuota=!1):(this.erroreEmailVuota=!0,this.erroreEmail=!1)},this.checkOldPassword=function(){this.passwordMatch=!0,this.oldPassword?e.isValidPassword(this.oldPassword)?(this.erroreOldPassword=!1,this.erroreOldPasswordVuota=!1,this.checkPasswordMatch()):(this.erroreOldPassword=!0,this.erroreOldPasswordVuota=!1):(this.erroreOldPasswordVuota=!0,this.erroreOldPassword=!1)},this.checkPassword=function(){this.passwordMatch=!0,this.password?e.isValidPasswordRegistrazione(this.password)?(this.errorePassword=!1,this.errorePasswordVuota=!1,this.checkPasswordMatch()):(this.errorePassword=!0,this.errorePasswordVuota=!1):(this.errorePasswordVuota=!0,this.errorePassword=!1)},this.checkConfirmPassword=function(){this.passwordMatch=!0,this.confirmPassword?e.isValidPasswordRegistrazione(this.confirmPassword)?(this.erroreConfirmPassword=!1,this.erroreConfirmPasswordVuota=!1,this.checkPasswordMatch()):(this.erroreConfirmPassword=!0,this.erroreConfirmPasswordVuota=!1):(this.erroreConfirmPasswordVuota=!0,this.erroreConfirmPassword=!1)},this.checkPasswordMatch=function(){void 0!=this.password&&void 0!=this.confirmPassword&&(this.errorePassword||this.errorePasswordVuota||this.erroreConfirmPassword||this.erroreConfirmPasswordVuota||(this.passwordMatch=!1,this.password===this.confirmPassword?this.passwordMatch=!0:this.passwordMatch=!1))},this.checkCampoVuotoEmail=function(){this.email||(this.erroreEmailVuota=!1,this.erroreEmail=!1)},this.checkCampoVuotoOldPassword=function(){this.oldPassword||(this.erroreOldPasswordVuota=!1,this.erroreOldPassword=!1)},this.checkCampoVuotoPassword=function(){this.password||(this.errorePasswordVuota=!1,this.errorePassword=!1)},this.checkCampoVuotoConfirmPassword=function(){this.confirmPassword||(this.erroreConfirmPasswordVuota=!1,this.erroreConfirmPassword=!1)},this.checkOpenDropdown=function(){this.openDropdown===!1?this.openDropdown=!0:this.openDropdown===!0&&(this.openDropdown=!1)},this.logout=function(){t.nav.logout()},this.open=function(){o.open({animation:!0,templateUrl:"app/modificaPassword/modificaPassword-modal.html",controllerAs:"modificaPasswordModalCtrl",bindToController:!0,controller:["accountService","$rootScope",function(e,i){var o=this;this.resetProfileError=!1,this.firstStep=!0,this.eliminaProfilo=function(){e.profile["delete"]().then(function(){o.firstStep=!1})["catch"](function(){o.resetProfileError=!0,o.firstStep=!1})},this.logout=function(){i.$broadcast("ga-navigation","logout")}}]})},this.bottoneAnnulla=function(){this.bottoneDisabilitatoStep1=!1,this.email?t.$broadcast("ga-navigation","login"):t.$broadcast("ga-navigation","ricordamidi")},this.bottoneTornaAllaGuestArea=function(){this.bottoneDisabilitatoStep1=!1,this.email?t.$broadcast("ga-navigation","login"):t.$broadcast("ga-navigation","ricordamidi")}}]}}),angular.module("guestApp").directive("garegistrazione",function(){return{restrict:"E",controllerAs:"ctrl",bindToController:!0,templateUrl:"app/registrazione/registrazione.html",controller:["$q","accountService","utilsService","gaRouterService","$scope","$window","$location","$timeout","$http","$log","$rootScope","vcRecaptchaService","vorreiService",function(e,i,o,t,a,r,s,n,l,c,d,p,m){var u=this,g="",v="";this.fromOtherTool=o.fromCjConti()||o.fromCjContiMinori()||o.fromCjPrestiti(),this.errFromOtherTool=!1,this.textPrestitiConti="",this.buttonPrestitiConti="",this.currentStep=1,this.withEmail=!1,this.emailClienteStep1,this.pallinoEvidenziato=1,this.openAccordion=!1,this.textAccordion="VUOI COMPLETARE IL TUO PROFILO?",this.passwordMatch=!1,this.utenteCensito1=!1,this.utenteCensito2=!1,this.clienteIB=!1,this.bottoneDisabilitatoStep1=!1,this.bottoneDisabilitatoStep2=!1,this.nomeCF="",this.cognomeCF="",this.privacy=0,this.passwordMatch=!0,this.erroreEmail=!1,this.erroreEmailVuota=!1,this.errorePassword=!1,this.errorePasswordVuota=!1,this.erroreConfirmPassword=!1,this.erroreConfirmPasswordVuota=!1,this.erroreNome=!1,this.erroreCognome=!1,this.erroreNomeVuoto=!1,this.erroreCognomeVuoto=!1,this.erroreCheckConsenso=!1,this.erroreRadioConsenso=!1,this.flagCheckConsenso=!1,this.flagAccettoConsenso=0,this.flagNegoConsenso=0,this.erroreCodiceConfermaFormato=!1,this.erroreCodiceConfermaVuoto=!1,this.erroreCodiceConfermaMaxOts=!1,this.erroreCodiceConfermaErrato=!1,this.errorReCaptcha=!1,this.error202=!1,this.error202prestiti=!1,this.error202conti=!1,this.error202generico=!1,this.signupError=!1,this.tipoCensimento="2",this.redirectBtn="VAI ALLA HOME",this.captchaKey,this.recaptcha,this.widgetID,this.gRecaptchaResponse="",this.erroregRecaptchaResponse=!1,this.showPwd=!1,this.showConfirmPwd=!1;var h=null,f=[],b="",C=null,x=null,w=[],E="",A=null,P=null,S=[],I="",O=null,y="token";this.changeStep=function(e){this.currentStep=e,this.createNewToken(),setTimeout(function(){utag&&utag.view&&(1==e?utag.view({tipoEvento:"NAVIGAZIONE",nomepagina:"regprospect",faseprocesso:"reguser"}):2==e?utag.view({tipoEvento:"NAVIGAZIONE",nomepagina:"regprospect",faseprocesso:"reganag"}):3==e&&utag.view({tipoEvento:"NAVIGAZIONE",nomepagina:"regprospect",faseprocesso:"esito"}))})},this.clickRichiediCodice=function(){this.richiediCodice()},this.richiediCodice=function(){window.top.GUESTAREA.loading.show(),i.signup.signupActivationSimulation(this.email).then(function(e){u.otsId=e.otsId,u.trxots=e.trxots,window.top.GUESTAREA.loading.hide()})["catch"](function(e){"BLOCKED_OTS"==e?u.erroreCodiceConfermaMaxOts=!0:(u.signupError=!0,u.changeStep(3)),window.top.GUESTAREA.loading.hide(),c.error("Activation simulation ERROR",e)})},this.errorPrestitiConti=function(e){"conti"==e?(u.textPrestitiConti="Ci scusiamo ma, per un problema tecnico,il salvataggio della tua offerta non è andato a buon fine. Per proseguire con l'apertura del conto riprendi la pagina SCEGLI IL TUO STILE e trova la soluzione adatta a te.\n\nLa registrazione all'area ospiti è comunque andata a buon fine e puoi accedervi in qualsiasi momento con la tua email",u.buttonPrestitiConti="scegli il tuo stile"):"prestiti"==e&&(u.textPrestitiConti="Ci scusiamo ma, per un problema tecnico, l'offerta che hai selezionato non è stata salvata correttamente. Per proseguire con la richiesta torna alla pagina TROVA IL TUO PRESTITO e scegli la soluzione adatta a te.\n\nLa registrazione all'area ospiti è comunque andata a buon fine e puoi accedervi in qualsiasi momento con la tua email",u.buttonPrestitiConti="trova il tuo prestito")},this.emailClienteStep1=o.getSearchParams().email,this.emailClienteStep1?this.withEmail=!0:this.withEmail=!1;var u=this;this.newPwd=function(){this.passwordMatch=!0,this.password?o.isValidPasswordRegistrazione(this.password)?(this.errorePassword=!1,this.errorePasswordVuota=!1):(this.errorePassword=!0,this.errorePasswordVuota=!1):(this.errorePasswordVuota=!0,this.errorePassword=!1),this.confirmPassword?o.isValidPasswordRegistrazione(this.confirmPassword)?(this.erroreConfirmPassword=!1,this.erroreConfirmPasswordVuota=!1):(this.erroreConfirmPassword=!0,this.erroreConfirmPasswordVuota=!1):(this.erroreConfirmPasswordVuota=!0,this.erroreConfirmPassword=!1),this.errorePassword||this.errorePasswordVuota||this.erroreConfirmPassword||this.erroreConfirmPasswordVuota||(this.passwordMatch=!1,this.password===this.confirmPassword?this.passwordMatch=!0:this.passwordMatch=!1,this.passwordMatch===!0&&(this.bottoneDisabilitatoStep1=!0,this.callCheckUser()))},this.createNewToken=function(){return new Promise(function(e,i){grecaptcha.ready(function(){window.location.host.toUpperCase().indexOf("LOCALHOST")>=0?this.captchaKey="6LdbLMcUAAAAABaZng0rq1hH5exrhIteQRgii6hE":this.captchaKey="6LeayMgUAAAAAF6WZOe49B1YNngogGTQJktqCxTk",grecaptcha.execute(this.captchaKey,{action:"area_login"}).then(function(i){window.sessionStorage.setItem("token",JSON.stringify(i)),u.gRecaptchaResponse=i,e()})["catch"](function(){i()})})})},this.newPwdWithEmail=function(){this.passwordMatch=!0,this.email?o.isValidEmail(this.email)?(this.erroreEmail=!1,this.erroreEmailVuota=!1):(this.erroreEmail=!0,this.erroreEmailVuota=!1):(this.erroreEmailVuota=!0,this.erroreEmail=!1),this.password?o.isValidPasswordRegistrazione(this.password)?(this.errorePassword=!1,this.errorePasswordVuota=!1):(this.errorePassword=!0,this.errorePasswordVuota=!1):(this.errorePasswordVuota=!0,this.errorePassword=!1),this.confirmPassword?o.isValidPasswordRegistrazione(this.confirmPassword)?(this.erroreConfirmPassword=!1,this.erroreConfirmPasswordVuota=!1):(this.erroreConfirmPassword=!0,this.erroreConfirmPasswordVuota=!1):(this.erroreConfirmPasswordVuota=!0,this.erroreConfirmPassword=!1),this.erroreEmail||this.erroreEmailVuota||this.errorePassword||this.errorePasswordVuota||this.erroreConfirmPassword||this.erroreConfirmPasswordVuota||(this.passwordMatch=!1,this.password===this.confirmPassword?this.passwordMatch=!0:this.passwordMatch=!1,this.passwordMatch===!0&&(this.bottoneDisabilitatoStep1=!0,this.callCheckUser()))},this.callCheckUser=function(){var e=this;e.createNewToken().then(function(){i.signup.checkUser(e.email,null,null,e.gRecaptchaResponse).then(function(){i.signup.signupActivationSimulation(e.email).then(function(i){e.changeStep(2),e.otsId=i.otsId,e.trxots=i.trxots,e.bottoneDisabilitatoStep1=!1,e.openAccordion=!1,e.textAccordion="VUOI COMPLETARE IL TUO PROFILO?",e.signupError=!1,e.paeseResidenza()})["catch"](function(i){"BLOCKED_OTS"==i?(e.erroreCodiceConfermaMaxOts=!0,e.signupError=!1):(e.erroreCodiceConfermaMaxOts=!1,e.signupError=!0),c.error("Activation simulation ERROR",i),e.utenteCensito1=!1,e.bottoneDisabilitatoStep1=!1,e.svuotaCampi()})})["catch"](function(i){e.signupError=!0,i.censito&&(e.utenteCensito1=!0),e.bottoneDisabilitatoStep1=!1,e.svuotaCampi()})})},this.checkEmail=function(){this.passwordMatch=!0,this.email?o.isValidEmail(this.email)?(this.erroreEmail=!1,this.erroreEmailVuota=!1,this.checkPasswordMatch()):(this.erroreEmail=!0,this.erroreEmailVuota=!1):(this.erroreEmailVuota=!0,this.erroreEmail=!1)},this.checkPassword=function(){this.passwordMatch=!0,this.password?o.isValidPasswordRegistrazione(this.password)?(this.errorePassword=!1,this.errorePasswordVuota=!1,this.checkPasswordMatch()):(this.errorePassword=!0,this.errorePasswordVuota=!1):(this.errorePasswordVuota=!0,this.errorePassword=!1)},this.checkConfirmPassword=function(){this.passwordMatch=!0,this.confirmPassword?o.isValidPasswordRegistrazione(this.confirmPassword)?(this.erroreConfirmPassword=!1,this.erroreConfirmPasswordVuota=!1,this.checkPasswordMatch()):(this.erroreConfirmPassword=!0,this.erroreConfirmPasswordVuota=!1):(this.erroreConfirmPasswordVuota=!0,this.erroreConfirmPassword=!1)},this.checkPasswordMatch=function(){void 0!=this.email&&void 0!=this.password&&void 0!=this.confirmPassword&&(this.erroreEmail||this.erroreEmailVuota||this.errorePassword||this.errorePasswordVuota||this.erroreConfirmPassword||this.erroreConfirmPasswordVuota||(this.passwordMatch=!1,this.password===this.confirmPassword?this.passwordMatch=!0:this.passwordMatch=!1))},this.checkCampoVuotoEmail=function(){this.email||(this.erroreEmailVuota=!1,this.erroreEmail=!1)},this.checkCampoVuotoPassword=function(){this.password||(this.errorePasswordVuota=!1,this.errorePassword=!1)},this.checkCampoVuotoConfirmPassword=function(){this.confirmPassword||(this.erroreConfirmPasswordVuota=!1,this.erroreConfirmPassword=!1)};var T="",k=null,z=["Seleziona","UOMO","DONNA"],R=function(e){return 190==e.keyCode||111==e.keyCode||55==e.keyCode&&1==e.shiftKey||(e.keyCode>=65&&e.keyCode<=90||(e.keyCode>=48&&e.keyCode<=57&&0==e.shiftKey||e.keyCode>=96&&e.keyCode<=105))};this.genere="Seleziona",this.setGenere=function(e){e?this.genere=e:this.genere="Seleziona"},this.initGenere=function(){this.generi=z,T=""},this.autocompleteGenere=function(e){8==e.keyCode||46==e.keyCode?(T="",u.generi=z,k&&n.cancel(k)):R(e)&&(T=T.concat(e.key),k&&n.cancel(k),k=n(function(){u.initGenere()},5e3),u.generi=_.filter(z,function(e){if(e){var i=e.toUpperCase().substring(0,T.length);return T.toUpperCase()==i}}),u.generi.length>0&&u.setGenere(u.generi[0]))};var N="",M={key:"000",value:"Seleziona"},L=[{key:"000",value:"Seleziona"},{key:"001",value:"STUDENTI"},{key:"002",value:"PENSIONATI"},{key:"003",value:"CASALINGHE"},{key:"004",value:"REDDITIERI/E"},{key:"005",value:"ALTRI NO OCCUPATI/DISOCCUPATI"},{key:"006",value:"INSEGNANTI SCUOLA PRIVATA/PUBBL."},{key:"007",value:"MILITARI O FORZE ARMATE"},{key:"008",value:"OPERAI O ASSIMILATI"},{key:"009",value:"IMPIEGATI"},{key:"010",value:"FUNZIONARIO/QUADRO"},{key:"011",value:"DIRIGENTI/AMMINISTRATORI"},{key:"012",value:"MAGISTRATI"},{key:"013",value:"CONDOMINI"},{key:"014",value:"COLTIV. DIRETTI / IMPREND. AGRIC"},{key:"015",value:"AGENTI DI COMMERCIO"},{key:"016",value:"SPORT E SPETTACOLO"},{key:"017",value:"MEDICI"},{key:"018",value:"AVVOCATI E PROCURATORI LEGALI"},{key:"019",value:"NOTAI"},{key:"020",value:"COMM/FISC/CONSUL. LAVORO"},{key:"021",value:"CONSUL. E PROMOT. FINANZ."},{key:"022",value:"ALTRI CONSULENTI"},{key:"023",value:"ARCHITETTI"},{key:"024",value:"GEOMETRI"},{key:"025",value:"INGEGNERI"},{key:"026",value:"GIORNALISTI"},{key:"027",value:"ALTRI PROFESSIONISTI NON CODIF."},{key:"028",value:"ALTRE FAMIGLIE PRODUTTRICI"},{key:"029",value:"IMP. CON DIPEND. DA 0 A 19"},{key:"030",value:"IMP. CON DIPEND. DA 020 A 049"},{key:"031",value:"IMP. CON DIPEND. DA 050 A 099"},{key:"032",value:"IMP. CON DIPEND. DA 100 A 499"},{key:"033",value:"IMP. CON DIPEND. DA 500 A 999"},{key:"034",value:"IMP. CON DIPEND. DA 1000 A 4999"},{key:"035",value:"IMP COM OLTRE 4999 DIPEND."},{key:"040",value:"INFERMIERE/A"},{key:"041",value:"AGRONOMO FORESTALE"},{key:"042",value:"BIOLOGO/A"},{key:"043",value:"CHIMICO"},{key:"044",value:"FARMACISTA"},{key:"045",value:"GEOLOGO/GEOLOGA"},{key:"046",value:"OSTETRICA"},{key:"047",value:"RAGIONIERE/A"},{key:"048",value:"CAMIONISTA"},{key:"049",value:"POLIZIOTTO/A"},{key:"050",value:"VIGILE URBANO"},{key:"051",value:"VIGILE DEL FUOCO"},{key:"052",value:"PARAMEDICO"},{key:"053",value:"PILOTA"},{key:"054",value:"COLLABORATORE/ICE DOMESTICA"},{key:"055",value:"ALTRO LAVORO DIPENDENTE"},{key:"056",value:"RELIGIOSO"},{key:"057",value:"TITOLARE DITTA INDIVIDUALE"},{key:"100",value:"ARTIGIANO"},{key:"101",value:"COMMERCIANTE INGROSSO"},{key:"102",value:"COMMERCIANTE DETTAGLIO"},{key:"103",value:"AMBULANTE"},{key:"104",value:"AGENTE DI CAMBIO"},{key:"105",value:"FOTOGRAFO/A"},{key:"106",value:"GRAFICO/PUBBLICITARIO"},{key:"107",value:"IMPRENDITORE"}];this.professioni=L,this.initProfessione=function(){this.professioni=L,N=""},this.setProfessione=function(e){if(M=e?e:{key:"000",value:"Seleziona"},r.matchMedia("(max-width: 320px)").matches){var i=14;this.professione=_.truncate(M.value,{length:i,separator:""})}else if(r.matchMedia("(max-width: 375px)").matches){var i=18;this.professione=_.truncate(M.value,{length:i,separator:""})}else if(r.matchMedia("(max-width: 425px)").matches){var i=23;this.professione=_.truncate(M.value,{length:i,separator:""})}else if(r.matchMedia("(max-width: 768px)").matches){var i=21;this.professione=_.truncate(M.value,{length:i,separator:""})}else this.professione=M.value},this.setProfessione(M);var D=null;this.autocompleteProfessione=function(e){8==e.keyCode||46==e.keyCode?(N="",u.professioni=L,D&&n.cancel(D)):R(e)&&(N=N.concat(e.key),D&&n.cancel(D),D=n(function(){u.initProfessione()},5e3),u.professioni=_.filter(L,function(e){if(e&&e.value){var i=e.value.toUpperCase().substring(0,N.length);return N.toUpperCase()==i}}),u.professioni.length>0&&u.setProfessione(u.professioni[0]))},this.paeseResidenza=function(){var e=function(e){f=e,u.nazioni=f,u.setNazione(h)};0==f.length?i.signup.anagPaesi().then(function(i){e(i)})["catch"](function(){e([])}):e(f)},this.setNazione=function(e){if(h=e?e:{codice:"IT",denominazione:"ITALIA"},r.matchMedia("(max-width: 320px)").matches){var o=14;this.nazioneSelezionata=_.truncate(h.denominazione,{length:o,separator:""})}else if(r.matchMedia("(max-width: 375px)").matches){var o=18;this.nazioneSelezionata=_.truncate(h.denominazione,{length:o,separator:""})}else if(r.matchMedia("(max-width: 425px)").matches){var o=23;this.nazioneSelezionata=_.truncate(h.denominazione,{length:o,separator:""})}else if(r.matchMedia("(max-width: 768px)").matches){var o=21;this.nazioneSelezionata=_.truncate(h.denominazione,{length:o,separator:""})}else this.nazioneSelezionata=h.denominazione;this.setProvincia({denominazione:"Seleziona"}),this.setComune({denominazione:"Seleziona"}),"ITALIA"===h.denominazione.toUpperCase()&&(0==w.length?i.signup.anagProvince().then(function(e){w=e,u.province=w})["catch"](function(){w=[],u.province=w}):u.province=w)},this.initPaeseResidenza=function(){0==f.length?this.paeseResidenza():this.nazioni=f,b=""},this.autocompletePaeseResidenza=function(e){8==e.keyCode||46==e.keyCode?(b="",u.nazioni=f,C&&n.cancel(C)):R(e)&&(b=b.concat(e.key),C&&n.cancel(C),C=n(function(){u.initPaeseResidenza()},5e3),u.nazioni=_.filter(f,function(e){if(e&&e.denominazione){var i=e.denominazione.toUpperCase().substring(0,b.length);return b.toUpperCase()==i}}),u.nazioni.length>0&&u.setNazione(u.nazioni[0]))},this.setProvincia=function(e){var o=!0;if(e?(x===e&&(o=!1),x=e):x={denominazione:"Seleziona"},r.matchMedia("(max-width: 320px)").matches){var t=14;this.provinciaSelezionata=_.truncate(x.denominazione,{length:t,separator:""})}else if(r.matchMedia("(max-width: 375px)").matches){var t=18;this.provinciaSelezionata=_.truncate(x.denominazione,{length:t,separator:""})}else if(r.matchMedia("(max-width: 425px)").matches){var t=23;this.provinciaSelezionata=_.truncate(x.denominazione,{length:t,separator:""})}else if(r.matchMedia("(max-width: 768px)").matches){var t=21;this.provinciaSelezionata=_.truncate(x.denominazione,{length:t,separator:""})}else this.provinciaSelezionata=x.denominazione;o&&(this.setComune({denominazione:"Seleziona"}),x.codice?i.signup.anagComuni(x.codice).then(function(e){S=e,u.comuni=S})["catch"](function(){S=[],u.comuni=S}):(S=[],u.comuni=S))},this.initProvinciaResidenza=function(){0==w.length?this.setNazione(h):this.province=w,E=""},this.autocompleteProvinciaResidenza=function(e){8==e.keyCode||46==e.keyCode?(E="",u.province=w,A&&n.cancel(A)):R(e)&&(E=E.concat(e.key),A&&n.cancel(A),A=n(function(){u.initProvinciaResidenza()},5e3),u.province=_.filter(w,function(e){if(e&&e.denominazione){var i=e.denominazione.toUpperCase().substring(0,E.length);return E.toUpperCase()==i}}),u.province.length>0&&u.setProvincia(u.province[0]))},this.setComune=function(e){if(P=e?e:{denominazione:"Seleziona"},r.matchMedia("(max-width: 320px)").matches){var i=14;this.comuneSelezionato=_.truncate(P.denominazione,{length:i,separator:""})}else if(r.matchMedia("(max-width: 375px)").matches){var i=18;this.comuneSelezionato=_.truncate(P.denominazione,{length:i,separator:""})}else if(r.matchMedia("(max-width: 425px)").matches){var i=23;this.comuneSelezionato=_.truncate(P.denominazione,{length:i,separator:""})}else if(r.matchMedia("(max-width: 768px)").matches){var i=12;this.comuneSelezionato=_.truncate(P.denominazione,{length:i,separator:""})}else{var i=16;this.comuneSelezionato=_.truncate(P.denominazione,{length:i,separator:""})}},this.initComuneResidenza=function(){0==S.length?this.setProvincia(x):this.comuni=S,I=""},this.autocompleteComuneResidenza=function(e){8==e.keyCode||46==e.keyCode?(I="",u.comuni=S,O&&n.cancel(O)):R(e)&&(I=I.concat(e.key),O&&n.cancel(O),O=n(function(){u.initComuneResidenza()},5e3),u.comuni=_.filter(S,function(e){if(e&&e.denominazione){var i=e.denominazione.toUpperCase().substring(0,I.length);return I.toUpperCase()==i}}),u.comuni.length>0&&u.setComune(u.comuni[0]))},this.setCeckedInformativa=function(){var e=angular.element(document.getElementsByName("checkConsenso"))[0].checked;e?this.flagCheckConsenso=!0:this.flagCheckConsenso=!1,e?this.erroreCheckConsenso=!1:this.erroreCheckConsenso=!0},this.setClickedInformativa=function(){var e=angular.element(document.getElementsByName("radioAccettoConsenso"))[0],i=angular.element(document.getElementsByName("radioNegoConsenso"))[0],o=(1==this.privacy,2==this.privacy,function(){u.flagAccettoConsenso=0,e.checked=!1,u.flagNegoConsenso=0,i.checked=!1,u.privacy=0}),t=function(){u.flagAccettoConsenso=1,e.checked=!0,u.flagNegoConsenso=0,i.checked=!1,u.privacy=1},a=function(){u.flagAccettoConsenso=0,e.checked=!1,u.flagNegoConsenso=1,i.checked=!0,u.privacy=2};0==this.privacy&&e.checked?t():0==this.privacy&&i.checked?a():1==this.privacy&&i.checked?a():1==this.privacy&&e.checked?o():2==this.privacy&&e.checked?t():(2==this.privacy&&i.checked,o())},this.bottoneIndietro=function(){this.bottoneDisabilitatoStep1=!1,this.bottoneDisabilitatoStep2=!1,1===this.currentStep?a.nav.login():this.changeStep(1)},this.bottoneAnnulla=function(){this.svuotaCampi(),this.bottoneDisabilitatoStep1=!1,this.bottoneDisabilitatoStep2=!1,this.changeStep(1),a.nav.login()},this.ottieniConsonanti=function(e){return e.replace(/[^BCDFGHJKLMNPQRSTVWXYZ]/gi,"")},this.ottieniVocali=function(e){return e.replace(/[^AEIOU]/gi,"")},this.calcolaCodiceCognome=function(e){var i=this.ottieniConsonanti(e);return i+=this.ottieniVocali(e),i+="XXX",i=i.substr(0,3),i.toUpperCase()},this.calcolaCodiceNome=function(e){var i=this.ottieniConsonanti(e);return i.length>=4?i=i.charAt(0)+i.charAt(2)+i.charAt(3):(i+=this.ottieniVocali(e),i+="XXX",i=i.substr(0,3)),i.toUpperCase()},this.checkNome=function(){this.nome?o.isValidNomeCognome(this.nome)?(this.nomeCF=this.calcolaCodiceNome(this.nome),this.erroreNome=!1,this.erroreNomeVuoto=!1):(this.erroreNomeVuoto=!1,this.erroreNome=!0):(this.erroreNomeVuoto=!0,this.erroreNome=!1)},this.checkCognome=function(){this.cognome?o.isValidNomeCognome(this.cognome)?(this.cognomeCF=this.calcolaCodiceCognome(this.cognome),this.erroreCognome=!1,this.erroreCognomeVuoto=!1):(this.erroreCognomeVuoto=!1,this.erroreCognome=!0):(this.erroreCognomeVuoto=!0,this.erroreCognome=!1)},this.checkCodiceFiscale=function(){this.codiceFiscale?this.codiceFiscale.length<16?(this.erroreCodiceFiscaleVuoto=!0,this.erroreCodiceFiscale=!1):this.codiceFiscale?this.cognomeCF===this.codiceFiscale.substr(0,3).toUpperCase()&&this.nomeCF===this.codiceFiscale.substr(3,3).toUpperCase()&&o.isValidCodiceFiscale(this.codiceFiscale)?(this.erroreCodiceFiscale=!1,this.erroreCodiceFiscaleVuoto=!1):(this.erroreCodiceFiscale=!0,this.erroreCodiceFiscaleVuoto=!1):(this.erroreCodiceFiscaleVuoto=!1,this.erroreCodiceFiscale=!1):(this.erroreCodiceFiscale=!1,this.erroreCodiceFiscaleVuoto=!1)},this.checkCellPhone=function(){!this.cellulare||o.isValidCellPhone(this.cellulare)?this.erroreCellulare=!1:this.erroreCellulare=!0},this.checkLuogoNascita=function(){!this.luogoNascita||o.isValidLuogoNascita(this.luogoNascita)?this.erroreLuogoNascita=!1:this.erroreLuogoNascita=!0},this.checkCap=function(){!this.cap||o.isValidCap(this.cap)?this.erroreCap=!1:this.erroreCap=!0},this.checkIndirizzo=function(){!this.indirizzo||o.isValidAddress(this.indirizzo)?this.erroreIndirizzo=!1:this.erroreIndirizzo=!0},this.checkCodiceConferma=function(){this.codiceConferma?o.isValidOts(this.codiceConferma)?(this.erroreCodiceConfermaVuoto=!1,this.erroreCodiceConfermaFormato=!1):(this.erroreCodiceConfermaVuoto=!1,this.erroreCodiceConfermaFormato=!0):(this.erroreCodiceConfermaVuoto=!0,this.erroreCodiceConfermaFormato=!1),this.erroreCodiceConfermaErrato=!1},this.textLink=function(){1==this.openAccordion?(this.openAccordion=!1,this.textAccordion="VUOI COMPLETARE IL TUO PROFILO?"):(this.openAccordion=!0,this.textAccordion="CHIUDI")},this.viewPassword=function(){var e=document.getElementById("password");"password"==e.type?(e.type="text",this.showPwd=!0):(e.type="password",this.showPwd=!1)},this.viewConfirmPassword=function(){var e=document.getElementById("confirmPassword");"password"==e.type?(e.type="text",this.showConfirmPwd=!0):(e.type="password",this.showConfirmPwd=!1)};var B=function(){if(u.nome?o.isValidNomeCognome(u.nome)?(u.nomeCF=u.calcolaCodiceNome(u.nome),u.erroreNome=!1,u.erroreNomeVuoto=!1):(u.erroreNomeVuoto=!1,u.erroreNome=!0):(u.erroreNomeVuoto=!0,u.erroreNome=!1),u.cognome?o.isValidNomeCognome(u.cognome)?(u.cognomeCF=u.calcolaCodiceCognome(u.cognome),u.erroreCognome=!1,u.erroreCognomeVuoto=!1):(u.erroreCognomeVuoto=!1,u.erroreCognome=!0):(u.erroreCognomeVuoto=!0,u.erroreCognome=!1),!u.cellulare||o.isValidCellPhone(u.cellulare)?u.erroreCellulare=!1:u.erroreCellulare=!0,u.codiceFiscale?u.codiceFiscale.length<16?(u.erroreCodiceFiscaleVuoto=!0,u.erroreCodiceFiscale=!1):u.codiceFiscale?u.cognomeCF===u.codiceFiscale.substr(0,3).toUpperCase()&&u.nomeCF===u.codiceFiscale.substr(3,3).toUpperCase()&&o.isValidCodiceFiscale(u.codiceFiscale)?(u.erroreCodiceFiscale=!1,u.erroreCodiceFiscaleVuoto=!1):(u.erroreCodiceFiscale=!0,u.erroreCodiceFiscaleVuoto=!1):(u.erroreCodiceFiscaleVuoto=!1,u.erroreCodiceFiscale=!1):(u.erroreCodiceFiscale=!1,u.erroreCodiceFiscaleVuoto=!1),!u.luogoNascita||o.isValidAddress(u.luogoNascita)?u.erroreLuogoNascita=!1:u.erroreLuogoNascita=!0,u.checkCodiceConferma(),u.erroreDataNascitaAnno=!1,u.erroreDataNascitaMese=!1,u.erroreDataNascitaGiorno=!1,u.erroreProfessione=!1,!u.cap||o.isValidCap(u.cap)?u.erroreCap=!1:u.erroreCap=!0,!u.indirizzo||o.isValidAddress(u.indirizzo)?u.erroreIndirizzo=!1:u.erroreIndirizzo=!0,u.flagCheckConsenso?u.erroreCheckConsenso=!1:u.erroreCheckConsenso=!0,null===u.gRecaptchaResponse||""===u.gRecaptchaResponse?u.erroregRecaptchaResponse=!0:u.erroregRecaptchaResponse=!1,u.erroreNome===!1&&u.erroreCognome===!1&&u.erroreNomeVuoto===!1&&u.erroreCognomeVuoto===!1&&u.erroreCheckConsenso===!1&&u.erroreCodiceFiscaleVuoto===!1&&u.erroreCodiceFiscale===!1&&u.erroreEmail===!1&&u.erroreCellulare===!1&&u.erroreLuogoNascita===!1&&u.erroreProfessione===!1&&u.erroreDataNascitaGiorno===!1&&u.erroreDataNascitaMese===!1&&u.erroreDataNascitaAnno===!1&&u.erroreCap===!1&&u.erroreIndirizzo===!1&&u.erroreCodiceConfermaFormato===!1&&u.erroreCodiceConfermaVuoto===!1&&0==u.erroregRecaptchaResponse&&u.erroreCodiceConfermaErrato===!1&&u.erroreCodiceConfermaMaxOts===!1)return u.bottoneDisabilitatoStep2=!0,!0},G=function(){return e(function(e,t){i.signup.signup({utente:{codiceFiscale:u.codiceFiscale?u.codiceFiscale.toUpperCase():u.codiceFiscale,nome:u.nome,cognome:u.cognome,email:u.email,cell:u.cellulare,luogoNascita:u.luogoNascita,
dataNascita:u.dataNascita?o.convertBirthDate(u.dataNascita):u.dataNascita,sesso:"DONNA"===u.genere?"F":"M",professione:M.key,nazioneResidenza:h.codice,provinciaResidenza:x.codice,comuneResidenza:P.codice,cap:u.cap,indirizzoResidenza:u.indirizzo},consensoPrivacy1:u.flagCheckConsenso,consensoPrivacy2:1==u.privacy,password:u.password,tipoCensimento:u.tipoCensimento,"g-recaptcha-response":u.gRecaptchaResponse}).then(function(i){u.activationToken=i.activationToken,u.signupError=!1,console.log("call signup ok"),e()})["catch"](function(e){"errorCodFisc"==e?(u.erroreCodiceFiscale=!0,u.bottoneDisabilitatoStep1=!1,u.bottoneDisabilitatoStep2=!1,console.log("call ko error cod fisc")):"ERROR_RECAPTCHA"==e?(u.errorReCaptcha=!0,u.signupError=!0,console.log("call ko error captcha")):(e&&(u.error202=!0,o.fromCjConti()?(u.error202conti=!0,console.log("call ko error conti")):o.fromCjPrestiti()?(u.error202prestiti=!0,console.log("call ko error prestiti")):(u.error202generico=!0,console.log("call ko error generic")),u.signupError=!0),u.signupError=!0),t()})})},V=function(){return e(function(e,t){if(o.fromCjConti()||o.fromCjContiMinori()){var a="ACQUISTA"===o.getSearchParams().TIPOOPE.toUpperCase(),r=i.profile.info(),s=r.idProspect||r.ndgProspect||"",n=r.nome||"",d=r.cognome||"",p=r.email||"",m=r.codiceFiscale||"",h=r.cell||"";i.salvaProposta(s,m,h,p,n,d,a,o.getSearchParams().UUID).then(function(i){var o=_.find(i.proposta.pratiche,function(e){return"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()});!o&&i.proposta.pratiche&&i.proposta.pratiche.length>0&&(o=i.pratiche[0]),g=o.idSuperPratica,v=o.idPratica,u.errFromOtherTool=!1,u.signupError=!1,e()})["catch"](function(i){c.error("error calling salvaProposta"+i),g="",u.errFromOtherTool=!0,u.errorPrestitiConti("conti"),e()})}else if(o.fromCjPrestiti()){var s=data.utente.idProspect||data.utente.ndgProspect||"",f=o.getSearchParams().ID,b="/script/ndce/prestitimulti/vendita/api/servizi/generaSimulazione/"+f+"/"+s;l({method:"POST",url:b}).then(function(i){_.isUndefined(i.data.responseOK)||i.data.responseOK?(c.debug(i),u.signupError=!1,u.errFromOtherTool=!1,e()):(u.errFromOtherTool=!0,u.errorPrestitiConti("prestiti"),c.error("error calling generda simulazione"),e())})["catch"](function(i){c.error(i),u.errFromOtherTool=!0,u.errorPrestitiConti("prestiti"),e()})}else e()})},U=function(){return e(function(e,o){i.signup.signupActivation(u.email,u.activationToken,u.codiceConferma,u.trxots).then(function(){u.signupError=!1,e()})["catch"](function(e){"OTS_ERROR"==e?(u.erroreCodiceConfermaErrato=!0,u.bottoneDisabilitatoStep1=!1,u.bottoneDisabilitatoStep2=!1):u.signupError=!0,c.error("Activation ERROR",e),o()})})},F=function(){setTimeout(function(){window.scrollTo(0,0)},500),u.changeStep(3),window.top.GUESTAREA.loading.hide()};this.onlyActivation=!1;var $=function(){U().then(function(){V().then(function(){F()})})["catch"](function(){u.erroreCodiceConfermaErrato?window.top.GUESTAREA.loading.hide():F()})};this.bottoneContinua=function(){u.gRecaptchaResponse=JSON.parse(r.sessionStorage.getItem(y)),r.sessionStorage.removeItem(y),B()&&(window.top.GUESTAREA.loading.show(),u.onlyActivation?$():u.createNewToken().then(function(e){G().then(function(){u.onlyActivation=!0,$()})["catch"](function(){F()})}))},this.registrazioneRedirect=function(){if(o.fromCallMeBack()){var e=o.getSearchParams().GOTO;e&&""!=e&&o.isValidUrl(e)?(c.info("GOTO: "+e),r.location.href=e):t.homelogin()}else t.homelogin()},this.svuotaCampi=function(){this.codiceFiscale="",this.nome="",this.cognome="",this.cellulare="",this.luogoNascita="",this.dataNascita="",h={codice:"IT",denominazione:"ITALIA"},f=[],b="",x={denominazione:"Seleziona"},w=[],E="",P={denominazione:"Seleziona"},S=[],I="",this.initProfessione(),this.setProfessione(null),this.cap="",this.indirizzo=""},this.bottoneRipetiOperazione=function(){this.bottoneDisabilitatoStep1=!1,this.bottoneDisabilitatoStep2=!1,this.changeStep(1),this.signupError=!1,this.flagCheckConsenso=!1,this.privacy=0,this.otsId="",this.trxots="",this.codiceConferma="",this.gRecaptchaResponse="",this.flagAccettoConsenso=1==this.privacy?1:0,angular.element(document.getElementsByName("radioAccettoConsenso"))[0].checked=1==this.privacy,this.flagNegoConsenso=2==this.privacy?1:0,angular.element(document.getElementsByName("radioNegoConsenso"))[0].checked=2==this.privacy},this.bottoneCercaAiuto=function(){this.bottoneDisabilitatoStep1=!1,this.bottoneDisabilitatoStep2=!1,a.nav.login()},this.gohomepage=function(){t.home()},this.prendiAppuntamento=function(){t.appt()},this["continue"]=function(){var e=function(e,i){if(e&&1==e.length){var o=e[0];4==o.codAreaOperativa?t.prestito(o.codSaup):1==o.codAreaOperativa&&m.getDettaglioPratiche({idSuperPratica:o.idSuperPratica,codSaup:o.codSaup,stato:o.stato,descStato:o.descStato,codProposta:o.codProposta,scadenza:o.scadenza,codSaupOriginario:o.codSaupOriginario,codAreaOperativa:o.codAreaOperativa,tipologia:o.tipologia,codTipoProposta:o.codTipoProposta,pratiche:o.pratiche}).then(function(e){if(e&&e.listaPratiche&&e.listaPratiche.length>0){o.pratiche=e.listaPratiche;var i=_.find(o.pratiche,function(e){return e.codiceProdottoCDM&&"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()});!i&&o.pratiche&&o.pratiche.length>0&&(i=o.pratiche[0]),t.contocorrenteself(i?i.idPratica:"",o.idSuperPratica,!1)}})["catch"](function(e){c.error("error calling getDettaglioPratiche",e),t.landing(!0)})}else t.landing(!0)};m.getListaVorrei(!1,e)}}]}}),angular.module("guestApp").directive("gaattivazione",function(){return{restrict:"E",controllerAs:"ctrl",bindToController:!0,templateUrl:"app/attivazione/attivazione.html",controller:["utilsService","accountService","gaRouterService","vorreiService","$log","$location",function(e,i,o,t,a,r){var s=this;this.signupError=!1,this.activating=!0,a.info("Activation attempt");var n=e.getSearchParams();window.top.GUESTAREA.loading.show(),i.signup.signupActivation(n.user,n.tokencas).then(function(){s.signupError=!1,s.activating=!1,window.top.GUESTAREA.loading.hide()})["catch"](function(e){s.signupError=!0,s.activating=!1,window.top.GUESTAREA.loading.hide(),a.error("Activation ERROR",e)}),this["continue"]=function(){window.top.GUESTAREA.loading.show();var e=function(e,i){if(e&&1==e.length){var r=e[0];4==r.codAreaOperativa?o.prestito(r.codSaup):1==r.codAreaOperativa?t.getDettaglioPratiche({idSuperPratica:r.idSuperPratica,codSaup:r.codSaup,stato:r.stato,descStato:r.descStato,codProposta:r.codProposta,scadenza:r.scadenza,codSaupOriginario:r.codSaupOriginario,codAreaOperativa:r.codAreaOperativa,tipologia:r.tipologia,codTipoProposta:r.codTipoProposta,pratiche:r.pratiche}).then(function(e){if(e&&e.listaPratiche&&e.listaPratiche.length>0){r.pratiche=e.listaPratiche;var i=_.find(r.pratiche,function(e){return e.codiceProdottoCDM&&"CCCONTOXME"===e.codiceProdottoCDM.toUpperCase()});!i&&r.pratiche&&r.pratiche.length>0&&(i=r.pratiche[0]),o.contocorrenteself(i?i.idPratica:"",r.idSuperPratica,!1)}})["catch"](function(e){a.error("error calling getDettaglioPratiche",e),o.landing(!0)}):o.landing(!0)}else o.landing(!0)};t.getListaVorrei(!1,e)}}]}}),angular.module("guestApp").directive("gaaccedi",function(){return{restrict:"E",controllerAs:"accediCtrl",scope:{},bindToController:{from:"@"},templateUrl:"app/accedi/accedi.html",controller:["accountService","utilsService","$uibModal","$log","$location","$window","gaExtToolsService","gaRouterService",function(e,i,o,t,a,r,s,n){var l=this;this.email=e.getRememberMeEmail(),this.cbricordami=!!this.email,this.isMobile=!1,window.outerWidth<670&&(this.isMobile=!0),this.init=function(){this.emailWrong=!1,this.emailEmpty=!1,this.pwdWrong=!1,this.pwdEmpty=!1,this.pwdRequired=!1,this.loginError=!1,this.codeError=0,this.blocked=!1,this.msgBecameIBClient="",this.isMobile=!1},this.showStep1=function(){this.loginStep1=!0,this.loginStep2=!1,this.loginStep2_IB=!1,this.init()},this.showStep2=function(){this.loginStep1=!1,this.loginStep2=!0,this.loginStep2_IB=!1},this.showStep2_IB=function(){this.loginStep1=!1,this.loginStep2=!1,this.loginStep2_IB=!0},this.initStep=function(){if(i.fromCjConti_onlyIB()||i.fromCjContiMinori_onlyIB())this.showStep2_IB(),this.showX=!1;else if(i.fromCjConti()){var e=i.getSearchParams(),o="true"===e.SHOW_LOGIN_IB,t="true"===e.SHOW_LOGIN;t?(this.showStep2(),this.showX=!1):o?(this.showStep2_IB(),this.showX=!1):(this.showStep1(),this.showX=!0)}else this.showStep1(),this.showX=!0},this.initStep(),this.genLoginURL=function(){if(i.fromCjConti()){var e=i.getSearchParams();if("SALVA"==e.TIPOOPE)var o="vorrei";else if("CONFIGURA"==e.TIPOOPE)var o="ccscconfiguratore";else var o="ccsddispositiva";var t={fromVetrina:!i.fromCjConti_onlyIB()};return i.fromCjConti_onlyIB()&&e.ID_SUPERPRATICA&&(t.idSuperpratica=e.ID_SUPERPRATICA),"/ndcelogin/webapp/authorize?"+encodeURIComponent("statename")+"="+encodeURIComponent(o)+"&"+encodeURIComponent("navigationPayload")+"="+encodeURIComponent(JSON.stringify(t))}if(i.fromCjContiMinori()){var e=i.getSearchParams();if("SALVA"==e.TIPOOPE)var o="vorrei";else var o="ccselfdispositivaminori";var t={fromVetrina:!0};return"/ndcelogin/webapp/authorize?"+encodeURIComponent("statename")+"="+encodeURIComponent(o)+"&"+encodeURIComponent("navigationPayload")+"="+encodeURIComponent(JSON.stringify(t))}return"/ndcelogin/webapp/authorize"},this.goToExpiredPwd=function(){n.changePassword("#?email="+this.email+"&exp=true")},this.entra=function(){this.email?i.isValidEmail(this.email)?(this.emailWrong=!1,this.emailEmpty=!1):(this.emailWrong=!0,this.emailEmpty=!1):(this.emailEmpty=!0,this.emailWrong=!1),this.password?i.isValidPassword(this.password)?(this.pwdWrong=!1,this.pwdEmpty=!1):(this.pwdWrong=!0,this.pwdEmpty=!1):(this.pwdEmpty=!0,this.pwdWrong=!1),this.emailWrong||this.emailEmpty||this.pwdWrong||this.pwdEmpty||(l.blocked=!0,l.emailWrong=!1,l.emailEmpty=!1,l.pwdWrong=!1,l.pwdEmpty=!1,e.login(l.email,l.password,l.cbricordami).then(function(){s.postLogin().then(function(e){e&&e()})["catch"](function(e){l.blocked=!1,l.loginError=!0,l.codeError=e.code,l.msgBecameIBClient=e.msg})})["catch"](function(e){l.blocked=!1,l.loginError=!0,l.codeError=e}))},this.checkEmail=function(){this.email?i.isValidEmail(this.email)?(this.emailWrong=!1,this.emailEmpty=!1):(this.emailWrong=!0,this.emailEmpty=!1):(this.emailEmpty=!0,this.emailWrong=!1)},this.checkPassword=function(){this.password?i.isValidPassword(this.password)?(this.pwdWrong=!1,this.pwdEmpty=!1):(this.pwdWrong=!0,this.pwdEmpty=!1):(this.pwdEmpty=!0,this.pwdWrong=!1)},this.open=function(){o.open({animation:!0,templateUrl:"app/accedi/accedi-modal.html",controllerAs:"accediModalCtrl",bindToController:!0,controller:["utilsService",function(i){var o=this;this.lostEmail="",this.firstStep=!0,this.lostEmailWrong=!1,this.lostEmailDifferent=!1,this.resetPwdError=!1,this.blocked=!1,this.checkEmail=function(){this.lostEmail&&i.isValidEmail(this.lostEmail)?(this.lostEmailWrong=!1,this.lostEmailDifferent=!1):(this.lostEmailWrong=!0,this.lostEmailDifferent=!1)},this.resetPwd=function(){o.lostEmail&&i.isValidEmail(o.lostEmail)?(this.blocked=!0,e.resetPassword(o.lostEmail).then(function(){o.firstStep=!1})["catch"](function(e){"8 Psoid inesistente"===e.message?(o.blocked=!1,o.lostEmailWrong=!1,o.lostEmailDifferent=!0,o.resetPwdError=!1,o.firstStep=!0):(o.blocked=!1,o.lostEmailWrong=!1,o.lostEmailDifferent=!1,o.resetPwdError=!0,o.firstStep=!1)})):(o.lostEmailWrong=!0,o.lostEmailDifferent=!1,o.resetPwdError=!1)}}]})},this.goToRegistrazione=function(){n.signup()},this.goToExpiredPwd=function(){n.changePassword("#?email="+this.email+"&exp=true")}}]}}),angular.module("guestApp").directive("toolGuestArea",function(){return{restrict:"E",scope:{page:"@"},templateUrl:"app/cms_components/guestarea.html",controller:["$scope","$window","$log","vorreiService","accountService","gaRouterService","utilsService","gaExtToolsService",function(e,i,o,t,a,r,s,n){e.ppage=null,e.badgeCount=0,this.numCarrello=0,this.listCarrello=[],this.numDesideri=0,this.wishList=[],this.ready=!1,e.nav={login:r.homelogin,logout:r.logout,landing:r.landing,signup:r.signup,changePassword:r.changePassword,ricordamidi:r.ricordamidi,vorrei:r.vorrei,makeAppointment:r.appt},e.$on("ga-navigation",function(i,o){e.nav[o]()}),a.autoLogin().then(function(i){switch(e.page){case"login":if(s.fromCjConti_onlyIB()||s.fromCjContiMinori_onlyIB())break;case"signup":if(i)return void n.postLogin().then(function(e){e&&e()})["catch"](function(e){o.error("gaExtToolsService.postLogin() returned this error: "+e),r.logout()});break;case"activation":break;case"chpasswd":break;case"landing":case"ricordamidi":case"vorrei":if(!i)return void r.homelogin();break;default:return void r.homelogin()}e.ppage=e.page});var l=function(i,o,t,a){a?r.logout():(i&&i.length>0?(this.numCarrello=i.length,this.listCarrello=i):(this.numCarrello=0,this.listCarrello=[]),e.badgeCount+=this.numCarrello,o&&o.length>0?(this.numDesideri=o.length,this.wishList=o):(this.numDesideri=0,this.wishList=[]),this.ready=!0)};e.salvaProposta=function(){window.top.GUESTAREA.loading.show(),n.salvaProposta().then(function(){t.getListaVorrei(!1,l),window.top.GUESTAREA.loading.hide()})["catch"](function(e){o.err(e)})}}]}}),angular.module("guestApp").service("utilsService",["$window","$location",function(e,i){var o=function(){function e(e,i){var o=!1,t=0;return 0==i?null:(e*i<0&&(o=!0),e<0&&(e=-e),i<0&&(i=-i),t=(e-e%i)/i,o?-t:t)}var i=moment().year(),o=0,t=0,a=0,r=0,s=0,n=0,l=0,c=0;return a=i%19,r=e(i,100),s=(r-e(r,4)-e(8*r+13,25)+19*a+15)%30,n=s-e(s,28)*(1-e(s,28)*e(29,s+1)*e(21-a,11)),l=(i+e(i,4)+n+2-r+e(r,4))%7,c=n-l+28,t=c,o=4,c>31?t=c-31:o=3,moment().year(i).month(o-1).date(t).startOf("day")},t=o().add(1,"days"),a=[moment().month(0).date(1).startOf("day"),moment().month(0).date(6).startOf("day"),t,moment().month(3).date(25).startOf("day"),moment().month(4).date(1).startOf("day"),moment().month(5).date(2).startOf("day"),moment().month(7).date(15).startOf("day"),moment().month(10).date(1).startOf("day"),moment().month(11).date(8).startOf("day"),moment().month(11).date(25).startOf("day"),moment().month(11).date(26).startOf("day")],r=null;this.setAdditionalParams=function(e){r=e},this.getSearchParams=function(){var e=i.search();return r&&"CJCONTI"===r.cj&&(e.FROM=r.cj,e.TIPOOPE=r.tipoOpe),e},this.isValidEmail=function(e){var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return i.test(e)},this.isValidPassword=function(e){return!0},this.isValidPasswordRegistrazione=function(e){var i=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[_.,\-+*#@$!%&?])[A-Za-z\d_.,\-+*#@$!%&?]{8,35}$/;return i.test(e)},this.isValidCellPhone=function(e){var i=/^[0-9]{9,10}$/;return i.test(e)},this.isValidCodiceFiscale=function(e){var i=/^([a-zA-Z]{6}[0-9]{2}[a-zA-Z][0-9]{2}[a-zA-Z][0-9]{2}[a-zA-Z0-9][a-zA-Z])$/;return i.test(e)},this.isValidNomeCognome=function(e){var i=/^([a-zA-Z 'À-ú])+$/;return i.test(e)},this.isValidNrNomeCognome=function(e){var i=e.split(" ");return i=_.filter(i,function(e){return""!==e}),i.length<=3},this.isValidDay=function(e){var i=/^\+?([0-9]{1,2})+$/;return i.test(e)},this.isValidMonth=function(e){var i=/^\+?([0-9]{1,2})+$/;return i.test(e)},this.isValidYear=function(e){var i=/^\+?([0-9]{4})+$/;return i.test(e)},this.isValidCap=function(e){var i=/^\+?([0-9]{5})+$/;return i.test(e)},this.isValidLuogoNascita=function(e){var i=/^([a-zA-Z ]{3,40})+$/;return i.test(e)},this.isValidAddress=function(e){var i=/^([a-zA-Z ]{0,40}[0-9]{0,40})+$/;return i.test(e)},this.isValidOts=function(e){var i=/^\+?([0-9]{6})+$/;return i.test(e)},this.whereami=function(){if(window.localStorage.envOverride)return window.localStorage.envOverride;var e=window.location.host.toUpperCase();return e.indexOf("LOCALHOST")>=0||e.indexOf("TACDIL0")>=0||e.indexOf("TBCDIL0")>=0||e.indexOf("TCDIL0")>=0?"APPL":e.indexOf("SCDIL0")>=0||e.indexOf("PCDIL0")>=0||e.indexOf("SACDIL0")>=0||e.indexOf("UCDIL0")>=0||e.indexOf("UACDIL0")>=0||e.indexOf("UBCDIL0")>=0?"SYST":e.indexOf("ECDIL0")>=0?"BFIX":"PROD"},this.calculateExpiringDateAndOtherLittleThings=function(e,i){i||(i=0);var o=moment(e,"x").startOf("day").add(i,"days");return{expireDate:o,expireDateFormatted:o.format("DD.MM.YYYY"),remainingDays:-Math.round(o.diff(moment().startOf("day"),"days",!0))}},this.calculateExpiringDateAndOtherLittleThingsNoHolidays=function(e,i){i||(i=0);var o=moment(e,"x").startOf("day").add(i,"days"),t=0,r=moment().startOf("day");if(r>o)t=-1;else for(;r<o;){for(var s=!1,n=0;n<a.length;n++)if(r.valueOf()==a[n].valueOf()||6==r.isoWeekday()||7==r.isoWeekday()){s=!0;break}s||t++,r.startOf("day").add(1,"days")}return{expireDate:o,expireDateFormatted:o.format("DD.MM.YY"),remainingDays:-Math.round(t)}},this.calculateRemainingDaysAndOtherLittleThings=function(e){var i=moment(e,"x").startOf("day");return{expireDate:i,expireDateFormatted:i.format("DD.MM.YY"),remainingDays:-Math.round(i.diff(moment().startOf("day"),"days",!0))}},this.isIB=function(){return e.location.href.toLowerCase().indexOf("ib.html")>=0},this.fromCjConti=function(){var e=this.getSearchParams();return e.FROM&&"CJCONTI"===e.FROM.toUpperCase()&&e.TIPOOPE&&("SALVA"===e.TIPOOPE.toUpperCase()||"CONFIGURA"===e.TIPOOPE.toUpperCase()||"ACQUISTA"===e.TIPOOPE.toUpperCase()||"ACQUISTA_IB"===e.TIPOOPE.toUpperCase())},this.fromCjContiMinori=function(){var e=this.getSearchParams();return e.FROM&&"CJCONTI_MINORI"===e.FROM.toUpperCase()&&e.TIPOOPE&&("SALVA"===e.TIPOOPE.toUpperCase()||"ACQUISTA"===e.TIPOOPE.toUpperCase()||"ACQUISTA_IB"===e.TIPOOPE.toUpperCase())},this.fromCjConti_onlyIB=function(){return this.fromCjConti()&&"ACQUISTA_IB"===this.getSearchParams().TIPOOPE.toUpperCase()},this.fromCjContiMinori_onlyIB=function(){return this.fromCjContiMinori()&&"ACQUISTA_IB"===this.getSearchParams().TIPOOPE.toUpperCase()},this.fromCjPrestiti=function(){var e=this.getSearchParams();return e.FROM&&"CJPRESTITI"===e.FROM.toUpperCase()&&e.ID},this.fromCallMeBack=function(){var e=this.getSearchParams();return e.FROM&&"CALLMEBACK"===e.FROM.toUpperCase()},this.getDeviceHeaders=function(){var e=new UAParser,i=e.getResult();return{OperationSystem:i.os.name,AccessMode:"mobile"===i.device.type&&"Phone"||"tablet"===i.device.type&&"Tablet"||"Web",UserAgent:i.ua,CHANNEL:"02"}},this.isPurchaseProcess=function(){var i=/^\/it\/persone-e-famiglie\/prodotti\/tool\/.*$/;return i.test(e.location.pathname)},this.enableCMB=function(){return!0},this.isValidUrl=function(e){var i=/^.*\.intesasanpaolo\.com.*$/;return i.test(e)},this.convertBirthDate=function(e){return e.split("/").join("-")}}]),angular.module("guestApp").run(["$templateCache",function(e){e.put("app/cms_components/guestarea.html",'<div ng-show="ppage == null" class="text-center"><br><br><img src="/ib/public/guestarea/assets/loading.gif"><br><br></div><gaaccedi ng-if="ppage === \'login\'"></gaaccedi><garegistrazione ng-if="ppage === \'signup\'"></garegistrazione><gaattivazione ng-if="ppage === \'activation\'"></gaattivazione><gamodifica-password ng-if="ppage === \'chpasswd\'"></gamodifica-password><garicordamidi ng-if="ppage === \'ricordamidi\'"></garicordamidi><!-- ottobre? --><gavorrei ng-if="ppage === \'vorrei\'"></gavorrei><div ng-if="ppage === \'landing\'"><div class="row" ng-init="salvaProposta()"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="text-center" style="color: #2b8804;font-size: 28.6px;font-weight: bold; padding-bottom:20px">Area ospiti</label></div></div><guestarea-toolbar badge-count="badgeCount"></guestarea-toolbar></div>'),e.put("app/accedi/accedi-modal.html",'<div id="pwdModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()" aria-label="Chiudi"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div ng-if="accediModalCtrl.firstStep"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">RECUPERA PASSWORD</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Hai dimenticato la tua password?</p><p>Inserisci l’indirizzo email che hai inserito in fase di registrazione.</p></div></div></div><div class="row"><div class="col-md-offset-7 col-sm-offset-7 col-xs-offset-2 col-md-10 col-sm-10 col-xs-20"><input type="text" class="inputText" ng-blur="accediModalCtrl.checkEmail()" ng-model="accediModalCtrl.lostEmail" placeholder="Email" name="lostEmail" ng-class="{\'erroreEditText\': accediModalCtrl.lostEmailWrong || accediModalCtrl.lostEmailDifferent}" required></div></div><div class="row"><div class="col-md-offset-2 col-sm-offset-2 col-xs-offset-2 col-md-20 col-sm-20 col-xs-20"><div ng-show="accediModalCtrl.lostEmailWrong"><span class="errore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div><div ng-show="accediModalCtrl.lostEmailDifferent"><span class="errore">L\'indirizzo email inserito non &egrave; quello utilizzato per la registrazione. Per favore, verifica e riprova.</span></div></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greyButton col-md-9 col-md-offset-1" type="button" ng-class="{\'customBtnDisabled\': accediModalCtrl.blocked}" ng-disabled="accediModalCtrl.blocked" ng-click="$dismiss()">ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greenBackground col-md-9 col-md-offset-1" type="button" ng-click="accediModalCtrl.resetPwd()" ng-class="{\'customBtnDisabled\': accediModalCtrl.blocked}" ng-disabled="accediModalCtrl.blocked">CONTINUA</button></div></div></div><div ng-if="!accediModalCtrl.firstStep"><div ng-if="!accediModalCtrl.resetPwdError"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">RECUPERA PASSWORD</label></div></div><div class="row"><div class="col-md-5 col-sm-5 col-xs-24"><img class="faccina" src="/ib/public/guestarea/assets/ok.png"></div><div class="scritte col-md-offset-1 col-sm-offset-1 col-xs-offset-0 col-md-18 col-sm-18 col-xs-24"><p>Controlla la tua casella di posta elettronica: ti abbiamo inviato una email con un link per recuperare la tua password.</p></div></div><div class="row"><button class="customBtn greenBackground text-center" type="button" ng-click="$dismiss()" style="padding: 2px 25px 0">CHIUDI</button></div></div><div ng-if="accediModalCtrl.resetPwdError"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">RECUPERA PASSWORD</label></div></div><div class="row"><div class="col-md-5 col-sm-5 col-xs-24"><img class="faccina" src="/ib/public/guestarea/assets/errore.png"></div><div class="scritte col-md-offset-1 col-sm-offset-1 col-xs-offset-0 col-md-18 col-sm-18 col-xs-24"><p>Ci scusiamo ma, per un problema tecnico, non è possibile recuperare la password. Per favore, riprova più tardi. Per maggiori informazioni contattaci al 800.303.303.</p></div></div><div class="row"><button class="customBtn greenBackground text-center" type="button" ng-click="$dismiss()" style="padding: 2px 25px 0">CHIUDI</button></div></div></div></div>'),e.put("app/accedi/accedi.html",'<div id="ga-accedi"><div ng-if="!accediCtrl.codeError || accediCtrl.codeError !== \'PWD_EXPIRED\'"><!-- step 1 --><div class="row" ng-if="accediCtrl.loginStep1"><div class="col-md-24 col-sm-24 col-xs-24"><div><button class="customBtn greenBackground col-md-24 col-sm-24 col-xs-24" style="margin-top:20px" ng-click="accediCtrl.goToRegistrazione()" type="submit" ng-class="{\'customBtnDisabled disabled\': accediCtrl.blocked}" ng-disabled="accediCtrl.blocked">REGISTRATI</button></div><div><button class="customBtn greyButton col-md-24 col-sm-24 col-xs-24" ng-click="accediCtrl.showStep2()" type="submit" ng-class="{\'customBtnDisabled disabled\': accediCtrl.blocked}" ng-disabled="accediCtrl.blocked">ENTRA</button></div><div class="registrato"><label>Sei gi&agrave; cliente?&nbsp;&nbsp;&nbsp;&nbsp;<a href="" ng-click="accediCtrl.showStep2_IB()" style="font-size:12px"><b>Entra nella Banca Online</b></a></label></div></div></div><!-- fine step 1 --><!-- step 2 --><div class="row" ng-if="accediCtrl.loginStep2 && !accediCtrl.loginStep2_IB"><div ng-if="accediCtrl.showX" class="col-md-24 col-sm-24 col-xs-24" ng-click="accediCtrl.showStep1()"><span class="chiudi icon ico-comuni-chiudi"></span></div><div><div class="col-md-24 col-sm-24 col-xs-24"><div class="row"><div class="col-md-1 col-sm-1 col-xs-2"><span class="icon lucchetto ico-login-lucchetto"></span></div><div class="col-md-23 col-sm-23 col-xs-22"><label style="float:left;font-size:16px">INSERISCI EMAIL E PASSWORD</label></div></div><div class="row" autocomplete="off"><div class="col-md-8 col-sm-8 col-xs-24" style="padding-bottom:10px"><input type="text" class="inputText" ng-blur="accediCtrl.checkEmail()" ng-model="accediCtrl.email" placeholder="Email" ng-class="{\'erroreEditText\': accediCtrl.emailWrong || accediCtrl.emailEmpty}" required autocomplete="off"><div class="row visible-xs" style="margin-left:5px"><div ng-show="accediCtrl.emailWrong"><span class="errore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div><div ng-show="accediCtrl.emailEmpty"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div></div><div class="col-md-8 col-sm-8 col-xs-24" style="padding-bottom:10px"><input type="password" class="inputText" ng-blur="accediCtrl.checkPassword()" maxlength="35" ng-model="accediCtrl.password" ng-class="{\'erroreEditText\': accediCtrl.pwdWrong || accediCtrl.pwdEmpty}" placeholder="Password" required autocomplete="new-password"><div class="row visible-xs" style="margin-left:5px"><div ng-show="accediCtrl.pwdWrong"><span class="errore">La password deve essere composta da almeno 8 caratteri tra lettere e numeri. Per favore, verifica e riprova.</span></div><div ng-show="accediCtrl.pwdEmpty"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div></div><div class="row visible-xs" style="margin-left: 5px"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="accediCtrl.loginError"><div ng-switch on="accediCtrl.codeError"><div ng-switch-when="LOGIN_ERROR"><span class="errore">L\'email e la password inserite non combaciano. Per favore, verifica e riprova.</span></div><div ng-switch-when="NO_LONGER_A_PROSPECT"><span class="errore">Risulta che sei gi&agrave; nostro cliente. Accedi alla tua Banca Online.</span></div><div ng-switch-when="PWD_EXPIRED"><span class="errore" ng-init="accediCtrl.goToExpiredPwd()">La tua password &grave; scaduta</span></div><div ng-switch-when="BECAME_IB_CLIENT"><span class="errore">{{accediCtrl.msgBecameIBClient}}</span></div><div ng-switch-default><span class="errore">Ci scusiamo ma, per un problema tecnico, il login non � andato a buon fine. Per favore, riprova pi� tardi. Per maggiori informazioni contattaci.</span></div></div></div></div></div><div class="row visible-xs" style="margin-left:3px"><div class="col-xs-22"><div class="col-xs-2"><input style="float:left" type="checkbox" id="checkRicordati" name="checkRicordati" ng-model="accediCtrl.cbricordami"></div><div class="col-xs-16"><label class="col-xs-24" style="margin-left:-5px;margin-top:5px">RICORDATI DI ME</label></div></div><div class="col-xs-20 text-left" style="margin-top:5px"><a href="" ng-click="accediCtrl.open()"><b>Hai dimenticato la password?</b>&nbsp;&nbsp;<span class="frecciaLogin icon ico-login-freccia-dx"></span></a></div></div><div class="row visible-xs" style="padding-bottom:10px"></div><div class="col-md-8 col-sm-8 col-xs-24"><button class="customBtn greenBackground col-md-24 col-sm-24 col-xs-24" ng-click="accediCtrl.entra()" type="submit" style="height: 41px; margin-top: 0px;border-radius: 0px" ng-class="{\'customBtnDisabled disabled\': accediCtrl.blocked}" ng-disabled="accediCtrl.blocked">ENTRA</button></div></div><div class="row hidden-xs" style="margin-top:-10px"><div class="col-md-8 col-sm-8 col-xs-22"><div ng-show="accediCtrl.emailWrong"><span class="errore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div><div ng-show="accediCtrl.emailEmpty"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div><div class="col-md-8 col-sm-8 col-xs-22"><div ng-show="accediCtrl.pwdWrong"><span class="errore">La password deve essere composta da almeno 8 caratteri tra lettere e numeri. Per favore, verifica e riprova.</span></div><div ng-show="accediCtrl.pwdEmpty"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div><div class="col-md-8 col-sm-8 col-xs-22">&nbsp;</div></div><div class="row hidden-xs" style="margin-top:-10px"><div class="col-md-24 col-sm-24 col-xs-24" style="margin-top:-20px"><div ng-show="accediCtrl.loginError && accediCtrl.codeError !== \'PWD_EXPIRED\'"><div ng-switch on="accediCtrl.codeError"><div ng-switch-when="LOGIN_ERROR"><span class="errore">L\'email e la password inserite non combaciano. Per favore, verifica e riprova.</span></div><div ng-switch-when="NO_LONGER_A_PROSPECT"><span class="errore">Risulta che sei gi&agrave; nostro cliente. Accedi alla tua Banca Online.</span></div><div ng-switch-when="BECAME_IB_CLIENT"><span class="errore">{{accediCtrl.msgBecameIBClient}}</span></div><div ng-switch-default><span class="errore">Ci scusiamo ma, per un problema tecnico, il login non � andato a buon fine. Per favore, riprova pi� tardi. Per maggiori informazioni contattaci.</span></div></div></div></div></div><div class="row hidden-xs" style="margin-top:0px"><div class="col-md-24 col-sm-24"><div class="col-md-1 col-sm-2"><input style="float:left" type="checkbox" id="checkRicordati" name="checkRicordati" ng-model="accediCtrl.cbricordami"></div><div class="col-md-4 col-sm-6"><label style="margin-left:-20px;margin-top:6px">RICORDATI DI ME</label></div><div class="col-md-8 col-sm-12" style="margin-left:-15px;margin-top:6px"><a href="" ng-click="accediCtrl.open()" style="font-size: 12px"><b>Hai dimenticato la password?</b>&nbsp;&nbsp;<span class="frecciaLogin icon ico-login-freccia-dx"></span></a></div></div></div></div></div></div><!-- fine step 2 --><!-- step 2 IB --><div class="row" ng-if="!accediCtrl.loginStep2 && accediCtrl.loginStep2_IB"><div ng-if="accediCtrl.showX" class="col-md-22 col-sm-22 col-xs-20 col-xs-offset-2" ng-click="accediCtrl.showStep1()"><span class="chiudi icon ico-comuni-chiudi"></span></div><iframe id="ib_in_accedi_iframe" ng-src="{{accediCtrl.genLoginURL()}}" width="100%" height="100%" ng-class="{\'fixed-height-mobile-login-ib\':accediCtrl.isMobile}"></iframe></div><!-- fine step 2 IB --></div><div ng-if="accediCtrl.loginError && accediCtrl.codeError == \'PWD_EXPIRED\'"><div ng-init="accediCtrl.goToExpiredPwd()"></div></div></div>'),e.put("app/accedi/errorPrestitiConti-modal.html",'<div id="errore-login-modal" ng-if="errorCtrl.showError"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="errorCtrl.closeModal()"><span class="iconDismiss ico ico-comuni-chiudi"></span></button></div></div><div class="clear"></div><div class="row"><div class="col-md-4 col-sm-4 col-xs-24 text-center" style="margin: 20px 0px 0px 20px"><span class="icona ico ico-cf-face-neutral-n"></span></div><div class="col-md-17 col-sm-17 col-xs-24 text-center"><p style="font-size:16px;white-space: pre-line">{{errorCtrl.text}}</p></div></div><div class="clear"></div><div class="row text-center"><button class="col-md-offset-6 col-sm-offset-6 col-xs-offset-6 col-md-12 col-sm-12 col-xs-12 text-center customBtn greenBackground" ng-click="errorCtrl.clickEvent()" style="margin-top: 20px">{{errorCtrl.buttonText|uppercase}}</button></div></div>'),e.put("app/attivazione/attivazione.html",'<div id="attivazione" ng-if="!ctrl.activating"><div ng-if="!ctrl.signupError"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/ok.png"></div><div class="row text-center"><p class="titoloEsito">Registrazione confermata</p></div><div class="row text-center col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><p class="paragrafoEsito">Puoi accedere alla tua area riservata in qualsiasi momento con la tua email.</p></div><div class="row text-center"><button class="col-md-4 col-md-offset-10 col-sm-8 col-sm-offset-8 col-xs-16 col-xs-offset-4 text-center customBtn greenBackground" ng-click="ctrl.continue()">CONTINUA</button></div><div style="margin-bottom:100px"></div></div><div ng-if="ctrl.signupError"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/errore.png"></div><div class="row text-center"><p class="titoloEsito">Ci scusiamo ma, si &egrave; verificato un problema tecnico. Per maggiori informazioni contattaci.</p></div><div class="row text-center"><button class="col-md-4 col-md-offset-10 col-sm-6 col-sm-offset-9 col-xs-10 col-xs-offset-7 text-center customBtn greyButton" ng-click="nav.login()">TORNA ALLA HOMEPAGE</button></div><div style="margin-bottom:100px"></div></div></div>'),
e.put("app/registrazione/registrazione.html",'<div id="registrazione"><div class="jumbotron header row"><div class="text-center row"><div class="col-md-24 col-sm-24 col-xs-24"><p class="titoloProgress">REGISTRAZIONE AREA OSPITI</p></div><div class="container"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.currentStep === 1"><div class="row"><div class="stepVerde col-sm-4 col-sm-offset-6 col-xs-7 col-xs-offset-1" style="margin-right: 5px"><div class="stepVerdeMezzo"></div></div><div class="stepGrigio col-sm-4 col-xs-7" style="margin-right: 5px;margin-left: 5px"></div><div class="stepGrigio col-sm-4 col-xs-7" style="margin-left: 5px"></div></div><div class="row"><label class="col-sm-4 col-sm-offset-6 col-xs-7 col-xs-offset-1 sottoTitoliProgressVerde" style="margin-right: 5px">REGISTRATI</label><label class="col-sm-4 col-xs-7 sottoTitoliProgressGrigio" style="margin-right: 5px;margin-left: 5px">COMPLETA IL PROFILO</label><label class="col-sm-4 col-xs-7 sottoTitoliProgressGrigio" style="margin-left: 5px">ESITO</label></div></div><div ng-show="ctrl.currentStep === 2"><div class="row"><div class="stepVerde col-sm-4 col-sm-offset-6 col-xs-7 col-xs-offset-1" style="margin-right: 5px"><div class="stepVerdePieno"></div></div><div class="stepVerde col-sm-4 col-xs-7" style="margin-right: 5px;margin-left: 5px"><div class="stepVerdeMezzo"></div></div><div class="stepGrigio col-sm-4 col-xs-7" style="margin-left: 5px"></div></div><div class="row"><label class="col-sm-4 col-sm-offset-6 col-xs-7 col-xs-offset-1 sottoTitoliProgressVerde" style="margin-right: 5px">REGISTRATI</label><label class="col-sm-4 col-xs-7 sottoTitoliProgressVerde" style="margin-right: 5px;margin-left: 5px">COMPLETA IL PROFILO</label><label class="col-sm-4 col-xs-7 sottoTitoliProgressGrigio" style="margin-left: 5px">ESITO</label></div></div><div ng-show="ctrl.currentStep === 3"><div class="row"><div class="stepVerde col-sm-4 col-sm-offset-6 col-xs-7 col-xs-offset-1" style="margin-right: 5px"><div class="stepVerdePieno"></div></div><div class="stepVerde col-sm-4 col-xs-7" style="margin-right: 5px;margin-left: 5px"><div class="stepVerdePieno"></div></div><div class="stepVerde col-sm-4 col-xs-7" style="margin-left: 5px"><div class="stepVerdePieno"></div></div></div><div class="row"><label class="col-sm-4 col-sm-offset-6 col-xs-7 col-xs-offset-1 sottoTitoliProgressVerde" style="margin-right: 5px">REGISTRATI</label><label class="col-sm-4 col-xs-7 sottoTitoliProgressVerde" style="margin-right: 5px;margin-left: 5px">COMPLETA IL PROFILO</label><label class="col-sm-4 col-xs-7 sottoTitoliProgressVerde" style="margin-left: 5px">ESITO</label></div></div></div></div></div></div><!-- parte centrale che cambia --><div class="container"><!-- step 1 con email prevalorizzata --><div ng-if="ctrl.currentStep === 1 && ctrl.withEmail === true" class="row box"><div class="col-md-20 col-md-offset-2 col-sm-20 col-sm-offset-2 col-xs-23 col-xs-offset-1"><div class="col-md-12 col-sm-12 col-xs-21"><div class="row"><p class="boxText" style="margin-bottom: 10px"><b>EMAIL</b></p></div><div class="row"><p class="boxText">{{ctrl.emailClienteStep1}}</p></div><div class="row" style="margin-top: 20px"><p class="textOverInput"><b>Password</b></p></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><input type="password" maxlength="35" class="col-md-23 col-sm-23 col-xs-24 inputTextRegistrazione" id="password" name="password" ng-blur="ctrl.checkPassword()" ng-change="ctrl.checkCampoVuotoPassword()" ng-focus="ctrl.pallinoEvidenziato = 1" ng-class="{\'erroreEditText\': ctrl.errorePassword || ctrl.errorePasswordVuota}" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.password" required> <span ng-click="ctrl.viewPassword()" ng-class="{\'eye icon cmb-ico-ga-occhio\': ctrl.showPwd, \'eye icon cmb-ico-ga-occhio-barrato\': !ctrl.showPwd}"></span></div><div class="col-md-3 col-sm-3 col-xs-3" style="padding-top: 3px"><img class="imgPallozzi" ng-show="ctrl.pallinoEvidenziato == 1" src="/ib/public/guestarea/assets/stepPrimoVuoto.png"> <img class="imgPallozzi" ng-show="ctrl.pallinoEvidenziato == 2" src="/ib/public/guestarea/assets/stepPrimoPieno.png"></div></div><div ng-class="{\'row shift2step tratteggiato\' : ctrl.pallinoEvidenziato == 1,\r\n                                    \'row shift2step continuo\' : ctrl.pallinoEvidenziato == 2}"><div class="col-md-21 col-sm-21 col-xs-21"><div ng-show="ctrl.errorePassword"><span class="errore">La password deve essere composta da almeno 8 caratteri e deve contenere almeno un numero, una lettera minuscola, una lettera maiuscola e un carattere speciale. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errorePasswordVuota"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div><div class="col-md-3 col-sm-3 col-xs-3"></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><p class="textOverInput"><b>Conferma Password</b></p><input type="password" maxlength="35" class="col-md-23 col-sm-23 col-xs-24 inputTextRegistrazione" id="confirmPassword" name="confirmPassword" ng-blur="ctrl.checkConfirmPassword()" ng-change="ctrl.checkCampoVuotoConfirmPassword()" ng-focus="ctrl.pallinoEvidenziato = 2" ng-class="{\'erroreEditText\': ctrl.erroreConfirmPassword || ctrl.erroreConfirmPasswordVuota}" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.confirmPassword" required> <span ng-click="ctrl.viewConfirmPassword()" ng-class="{\'eye icon cmb-ico-ga-occhio\': ctrl.showConfirmPwd, \'eye icon cmb-ico-ga-occhio-barrato\': !ctrl.showConfirmPwd}"></span></div><div class="col-md-3 col-sm-3 col-xs-3"><img class="imgPallozzi" ng-show="ctrl.pallinoEvidenziato == 1" src="/ib/public/guestarea/assets/stepUltimoVuoto.png" style="margin:-1px 0px -1px 0px"> <img class="imgPallozzi" ng-show="ctrl.pallinoEvidenziato == 2" src="/ib/public/guestarea/assets/stepUltimoPieno.png" style="margin:-1px 0px -1px 0px"></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><div ng-show="ctrl.erroreConfirmPassword"><span class="errore">La password deve essere composta da almeno 8 caratteri e deve contenere almeno un numero, una lettera minuscola, una lettera maiuscola e un carattere speciale. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreConfirmPasswordVuota"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.passwordMatch === false"><span class="errore">Le password inserite non coincidono. Per favore, verifica e riprova.</span></div></div></div><div class="row" ng-if="ctrl.signupError"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.utenteCensito1"><span class="errore">La mail inserita risulta essere gi&agrave; utilizzata. Per favore, verifica e riprova.</span></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="!ctrl.utenteCensito1"><span class="errore">Ci scusiamo ma, per un problema tecnico, la registrazione non &egrave; andata a buon fine. Per favore, riprova pi&ugrave; tardi. Per maggiori informazioni contattaci.</span></div></div></div><div class="row" ng-if="ctrl.erroreCodiceConfermaMaxOts"><div class="col-md-24 col-sm-24 col-xs-24"><span class="errore">Hai esaurito i tentativi a tua disposizione, riprova pi&ugrave; tardi.</span></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><button class="col-md-22 col-sm-22 col-xs-22 customBtn greenBackground" type="button" ng-class="{\'customBtnDisabled disabled\': ctrl.bottoneDisabilitatoStep1 === true}" ng-disabled="ctrl.bottoneDisabilitatoStep1 === true" ng-click="ctrl.newPwd()">CREA NUOVA PASSWORD</button></div></div></div><div class="col-md-10 col-sm-10 col-xs-24"><div class="crea"><p class="boxTextDx">Crea la tua password e conferma per registrarti ed entrare nella tua area riservata.<br><br>La password deve essere composta da almeno 8 caratteri con almeno un numero, una lettera minuscola, una lettera maiuscola ed un carattere speciale e ha una durata massima di 90 giorni, trascorsi i quali dovrai modificarla.<br>Per la tua sicurezza, evita di inserire informazioni facilmente reperibili come, per esempio, la data di nascita.</p><br></div></div></div></div><!-- step 1 senza email prevalorizzata --><div ng-if="ctrl.currentStep === 1 && ctrl.withEmail === false" class="row box"><div class="col-md-20 col-md-offset-2 col-sm-20 col-sm-offset-2 col-xs-20 col-xs-offset-2"><p class="row text-center titoloProgress">Inserisci le tue informazioni</p><br><div class="col-md-12 col-sm-12 col-xs-24"><div class="row"><p class="boxText"><b>Crea password personalizzata</b></p></div><div class="row"><p class="boxText">Inserisci il tuo indirizzo email e crea la tua password per registrarti</p></div><div class="row contenuto"><div class="col-md-20 col-sm-20 col-xs-20"><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><p class="textOverInput"><b>E-mail</b></p><input type="text" class="col-md-23 col-md-23 col-xs-23 inputTextRegistrazione" id="email" name="email" ng-blur="ctrl.checkEmail()" ng-change="ctrl.checkCampoVuotoEmail()" ng-focus="ctrl.pallinoEvidenziato = 1" ng-class="{\'erroreEditText\': ctrl.erroreEmail || ctrl.erroreEmailVuota}" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.email" required></div><div class="col-md-3 col-sm-3 col-xs-3" style="padding-top: 30px"><div ng-show="ctrl.pallinoEvidenziato == 1"><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepPrimoVuoto.png"></div><div ng-show="ctrl.pallinoEvidenziato == 2"><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepPrimoPieno.png"></div><div ng-show="ctrl.pallinoEvidenziato == 3"><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepPrimoPieno.png"></div></div></div><div ng-class="{\'row shift3step tratteggiato\' : ctrl.pallinoEvidenziato == 1,\r\n                                            \'row shift3step continuo\' : ctrl.pallinoEvidenziato == 2 || ctrl.pallinoEvidenziato == 3}"><div class="col-md-21 col-sm-21 col-xs-21"><div ng-show="ctrl.erroreEmail"><span class="errore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreEmailVuota"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div><div class="col-md-3 col-sm-3 col-xs-3"></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><p class="textOverInput"><b>Crea password</b></p><input type="password" maxlength="35" class="col-md-23 col-md-23 col-xs-23 inputTextRegistrazione" id="password" name="password" ng-blur="ctrl.checkPassword()" ng-change="ctrl.checkCampoVuotoPassword()" ng-focus="ctrl.pallinoEvidenziato = 2" ng-class="{\'erroreEditText\': ctrl.errorePassword || ctrl.errorePasswordVuota}" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.password" required> <span ng-click="ctrl.viewPassword()" ng-class="{\'eye icon cmb-ico-ga-occhio\': ctrl.showPwd, \'eye icon cmb-ico-ga-occhio-barrato\': !ctrl.showPwd}"></span></div><div class="col-md-3 col-sm-3 col-xs-3"><div ng-show="ctrl.pallinoEvidenziato == 1"><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepIntermedioGrigio.png" style="margin:-1px 0px -1px 0px"></div><div ng-show="ctrl.pallinoEvidenziato == 2 "><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepIntermedioParziale.png" style="margin:-1px 0px -1px 0px"></div><div ng-show="ctrl.pallinoEvidenziato == 3"><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepIntermedioTotale.png" style="margin:-1px 0px -1px 0px"></div></div></div><div ng-class="{\'row shift3step tratteggiato\' : ctrl.pallinoEvidenziato == 1 || ctrl.pallinoEvidenziato == 2,\r\n                                            \'row shift3step continuo\' : ctrl.pallinoEvidenziato == 3}"><div class="col-md-21 col-sm-21 col-xs-21"><div ng-show="ctrl.errorePassword"><span class="errore">La password deve essere composta da almeno 8 caratteri con almeno un numero, una lettera minuscola, una lettera maiuscola ed un carattere speciale. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errorePasswordVuota"><span class="errore">Campo obbligatorio: compila per proseguire</span></div></div><div class="col-md-3 col-sm-3 col-xs-3"></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><p class="textOverInput"><b>Conferma Password</b></p><input type="password" maxlength="35" class="col-md-23 col-md-23 col-xs-23 inputTextRegistrazione" id="confirmPassword" name="confirmPassword" ng-blur="ctrl.checkConfirmPassword()" ng-change="ctrl.checkCampoVuotoConfirmPassword()" ng-focus="ctrl.pallinoEvidenziato = 3" ng-class="{\'erroreEditText\': ctrl.erroreConfirmPassword || ctrl.erroreConfirmPasswordVuota}" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.confirmPassword" required> <span ng-click="ctrl.viewConfirmPassword()" ng-class="{\'eye icon cmb-ico-ga-occhio\': ctrl.showConfirmPwd, \'eye icon cmb-ico-ga-occhio-barrato\': !ctrl.showConfirmPwd}"></span></div><div class="col-md-3 col-sm-3 col-xs-3"><div ng-show="ctrl.pallinoEvidenziato == 1"><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepUltimoVuoto.png"></div><div ng-show="ctrl.pallinoEvidenziato == 2 "><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepUltimoVuoto.png"></div><div ng-show="ctrl.pallinoEvidenziato == 3"><img class="imgPallozzi" src="/ib/public/guestarea/assets/stepUltimoPieno.png"></div></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><div ng-show="ctrl.erroreConfirmPassword"><span class="errore">La password deve essere composta da almeno 8 caratteri con almeno un numero, una lettera minuscola, una lettera maiuscola ed un carattere speciale. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreConfirmPasswordVuota"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.passwordMatch === false"><span class="errore">Le password inserite non coincidono. Per favore, verifica e riprova.</span></div></div></div><div class="row" ng-if="ctrl.signupError"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.utenteCensito1"><span class="errore">La mail inserita risulta essere gi&agrave; utilizzata. Per favore, verifica e riprova.</span></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="!ctrl.utenteCensito1"><span class="errore">Ci scusiamo ma, per un problema tecnico, la registrazione non &egrave; andata a buon fine. Per favore, riprova pi&ugrave; tardi. Per maggiori informazioni contattaci.</span></div></div></div><div class="row" ng-if="ctrl.erroreCodiceConfermaMaxOts"><div class="col-md-24 col-sm-24 col-xs-24"><span class="errore">Hai esaurito i tentativi a tua disposizione, riprova pi&ugrave; tardi.</span></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><button class="col-md-22 col-sm-22 col-xs-22 customBtn greenBackground" type="button" ng-class="{\'customBtnDisabled disabled\': ctrl.bottoneDisabilitatoStep1}" ng-disabled="ctrl.bottoneDisabilitatoStep1" ng-click="ctrl.newPwdWithEmail()">REGISTRATI</button></div></div></div></div></div><!-- <div class="col-md-1 col-sm-2 hidden-xs">\r\n                    <div class="vr"></div>\r\n                </div> --></div></div><!-- step 2 registrazione --><div ng-if="ctrl.currentStep === 2"><div class="row boxStep2 col-md-20 col-md-offset-2 col-sm-20 col-sm-offset-2 col-xs-20 col-xs-offset-2"><p class="row text-center titoloProgress">COMPLETA IL PROFILO</p><p class="boxTextStep2">Inserisci nome e cognome, prendi visione dell\'informativa privacy e continua per registrarti ed entrare nell\'area ospiti. Puoi anche aggiungere altre informazioni e completare il tuo profilo.</p><br><p class="boxTextStep2Title"><b>Informazioni personali</b></p><div class="col-md-24 col-sm-24 col-xs-24 name"><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Nome*</b></p><input type="text" maxlength="35" class="col-md-22 col-sm-22 col-xs-24 inputTextRegistrazione" ng-disabled="ctrl.onlyActivation" ng-blur="ctrl.checkNome()" style="text-transform: capitalize" ng-class="{\'erroreEditText\': ctrl.erroreNome || ctrl.erroreNomeVuoto}" ng-model="ctrl.nome" required><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreNome === true"><span class="errore">Il nome pu&ograve; contenere solo caratteri alfabetici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreNomeVuoto === true"><span class="errore">Campo obbligatorio: compila per proseguire</span></div></div></div><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Cognome*</b></p><input type="text" maxlength="35" class="col-md-22 col-sm-22 col-xs-24 inputTextRegistrazione" ng-blur="ctrl.checkCognome()" style="text-transform: capitalize" ng-disabled="ctrl.onlyActivation" ng-class="{\'erroreEditText\': ctrl.erroreCognome || ctrl.erroreCognomeVuoto}" ng-model="ctrl.cognome" required><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreCognome === true"><span class="errore">Il cognome pu&ograve; contenere solo caratteri alfabetici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreCognomeVuoto === true"><span class="errore">Campo obbligatorio: compila per proseguire</span></div></div></div></div><div class="col-md-24 col-sm-24 col-xs-24 name"><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Numero di cellulare</b></p><input type="text" maxlength="14" class="col-md-22 col-sm-22 col-xs-24 inputTextRegistrazione" ng-model="ctrl.cellulare" ng-disabled="ctrl.onlyActivation" ng-class="{\'erroreEditText\': ctrl.erroreCellulare}" ng-blur="ctrl.checkCellPhone()" required><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreCellulare === true"><span class="errore">Il numero di cellulare deve essere composto da 9 a 10 caratteri numerici. Per favore, verifica e riprova.</span></div></div></div><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>E-mail</b></p><p class="boxTextEmail" class="col-md-22 col-sm-22">{{ctrl.email}}</p>&nbsp;</div></div><div class="row" data-toggle="collapse" data-target="#otherDetail" ng-click="ctrl.textLink()"><div class="col-md-1 col-sm-1 col-xs-3"><span ng-show="ctrl.openAccordion == false" class="icon ico-comuni-c-aggiungiinformazioni-n" style="width:100px;height:75px;padding-left:1px;font-size:20px"></span> <span ng-show="ctrl.openAccordion == true" class="icon ico-comuni-c-chiudiinformazioni-n" style="width:100px;height:75px;padding-left:1px;font-size:20px"></span></div><div class="col-md-23 col-sm-23 col-xs-21"><p class="col-md-23 col-sm-23 col-xs-23 boxTextStep2" style="color: #258900;font-size:15px;cursor:pointer;padding-top:1px"><b>{{ctrl.textAccordion}}</b></p></div></div><div id="otherDetail" class="collapse"><div style="margin-top:20px"></div><div class="col-md-24 col-sm-24 col-xs-24"><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Codice fiscale</b></p><input type="text" maxlength="16" class="col-md-22 col-sm-22 col-xs-24 inputTextRegistrazione" style="text-transform: uppercase" ng-model="ctrl.codiceFiscale" ng-disabled="ctrl.onlyActivation" ng-class="{\'erroreEditText\': ctrl.erroreCodiceFiscale || ctrl.erroreCodiceFiscaleVuoto}" ng-blur="ctrl.checkCodiceFiscale()" required><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreCodiceFiscale === true"><span class="errore">Il codice fiscale inserito non corrisponde a quello visualizzato. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreCodiceFiscaleVuoto === true"><span class="errore">Il codice fiscale deve essere composto da 16 caratteri alfanumerici. Per favore, verifica e riprova.</span></div></div></div><div class="col-md-12 col-sm-12 col-xs-24">&nbsp;</div></div><div class="col-md-24 col-sm-24 col-xs-24"><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Genere</b></p><div class="col-md-22 col-sm-22 col-xs-22 dropdown"><button ng-disabled="ctrl.onlyActivation" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" ng-click="ctrl.initGenere()" ng-keyup="ctrl.autocompleteGenere($event)"><span>{{ctrl.genere}}</span> <img class="freccia" src="/ib/public/guestarea/assets/freccia_dropdown.png"></button><ul ng-if="!ctrl.onlyActivation" class="dropdown-menu" role="menu"><li role="presentation"><a ng-repeat="g in ctrl.generi" ng-click="ctrl.setGenere(g)" role="menuitem" required><p>{{g}}</p></a></li></ul></div></div><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Luogo di nascita</b></p><input type="text" maxlength="25" class="col-md-22 col-sm-22 col-xs-24 inputTextRegistrazione" style="text-transform: capitalize" ng-model="ctrl.luogoNascita" ng-disabled="ctrl.onlyActivation" ng-blur="ctrl.checkLuogoNascita()" ng-class="{\'erroreEditText\': ctrl.erroreLuogoNascita}" required><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreLuogoNascita"><span class="errore">Il luogo di nascita pu&ograve; contenere solo caratteri alfabetici. Per favore, verifica e riprova.</span></div></div></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Data di nascita</b></p><input id="gaDataNascita" type="text" data-date-language="it" data-date-format="dd-mm-yyyy" ng-disabled="ctrl.onlyActivation" class="col-md-22 col-sm-22 col-xs-22 inputTextRegistrazione form-control field-date" ng-model="ctrl.dataNascita" required><script>$("#gaDataNascita").datepicker(\'remove\').datepicker({ language: \'it\' });</script></div><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Professione</b></p><div class="col-md-22 col-sm-22 col-xs-22 dropdown"><button ng-disabled="ctrl.onlyActivation" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" ng-click="ctrl.initProfessione()" ng-keyup="ctrl.autocompleteProfessione($event)"><span>{{ctrl.professione}}</span> <img class="freccia" src="/ib/public/guestarea/assets/freccia_dropdown.png"></button><ul ng-if="!ctrl.onlyActivation" class="dropdown-menu" role="menu"><li role="presentation"><a ng-repeat="prof in ctrl.professioni" ng-click="ctrl.setProfessione(prof)" role="menuitem" required><p>{{prof.value}}</p></a></li></ul></div></div></div><div class="col-md-24 col-sm-24 col-xs-24"><hr><div class="col-md-12 col-sm-12 col-xs-24" style="margin-bottom: 20px"><p class="textOverInputStep2"><b>Paese</b></p><div class="col-md-22 col-sm-22 col-xs-22 dropdown"><button ng-disabled="ctrl.onlyActivation" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" ng-click="ctrl.initPaeseResidenza()" ng-keyup="ctrl.autocompletePaeseResidenza($event)"><span>{{ctrl.nazioneSelezionata}}</span> <img class="freccia" src="/ib/public/guestarea/assets/freccia_dropdown.png"></button><ul ng-if="!ctrl.onlyActivation" class="dropdown-menu" role="menu"><li role="presentation"><a ng-repeat="nazione in ctrl.nazioni" ng-click="ctrl.setNazione(nazione)" role="menuitem" required><p>{{nazione.denominazione}}</p></a></li></ul></div></div><div class="col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Provincia</b></p><div class="col-md-22 col-sm-22 col-xs-22 dropdown"><button ng-disabled="ctrl.onlyActivation" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" ng-disabled="ctrl.nazioneSelezionata.toUpperCase() !== \'ITALIA\'" ng-click="ctrl.initProvinciaResidenza()" ng-keyup="ctrl.autocompleteProvinciaResidenza($event)"><span>{{ctrl.provinciaSelezionata}}</span> <img class="freccia" src="/ib/public/guestarea/assets/freccia_dropdown.png"></button><ul ng-if="!ctrl.onlyActivation" class="dropdown-menu" role="menu"><li role="presentation"><a ng-repeat="provincia in ctrl.province" ng-click="ctrl.setProvincia(provincia)" role="menuitem" required><p>{{provincia.denominazione}}</p></a></li></ul></div></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div class="col-md-7 col-sm-7 col-xs-24"><p class="textOverInputStep2"><b>Comune</b></p><div class="col-md-24 col-sm-24 col-xs-22 dropdown"><button ng-disabled="ctrl.onlyActivation" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" ng-disabled="ctrl.nazioneSelezionata.toUpperCase() !== \'ITALIA\'" ng-click="ctrl.initComuneResidenza()" ng-keyup="ctrl.autocompleteComuneResidenza($event)"><span>{{ctrl.comuneSelezionato}}</span> <img class="freccia" src="/ib/public/guestarea/assets/freccia_dropdown.png"></button><ul ng-if="!ctrl.onlyActivation" class="dropdown-menu" role="menu"><li role="presentation"><a ng-repeat="comune in ctrl.comuni" ng-click="ctrl.setComune(comune)" role="menuitem" required><p>{{comune.denominazione}}</p></a></li></ul></div></div><div class="col-md-3 col-md-offset-1 col-sm-3 col-sm-offset-1 col-xs-24"><p class="textOverInputStep2"><b>Cap</b></p><input type="text" maxlength="5" class="col-md-22 col-sm-22 col-xs-24 inputTextRegistrazione" ng-model="ctrl.cap" ng-disabled="ctrl.onlyActivation" ng-blur="ctrl.checkCap()" ng-class="{\'erroreEditText\': ctrl.erroreCap}" required><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreCap === true"><span class="errore">Il CAP deve essere composto da 5 caratteri numerici. Per favore, verifica e riprova.</span></div></div></div><div class="col-md-12 col-md-offset-1 col-md-offset-1 col-sm-12 col-sm-offset-1 col-xs-24"><p class="textOverInputStep2"><b>Indirizzo</b></p><input type="text" maxlength="50" class="col-md-22 col-sm-22 col-xs-24 inputTextRegistrazione" style="text-transform: capitalize" ng-model="ctrl.indirizzo" ng-disabled="ctrl.onlyActivation" ng-blur="ctrl.checkIndirizzo()" ng-class="{\'erroreEditText\': ctrl.erroreIndirizzo}" required><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreIndirizzo === true"><span class="errore">L\'indirizzo di residenza pu&ograve; contenere solo caratteri alfanumerici. Per favore, verifica e riprova.</span></div></div></div></div></div><br><p class="boxTextStep2Title" style="padding-bottom:10px"><b>Informativa sulla privacy</b></p><div class="scrollBox"><b>INFORMATIVA NEI CONFRONTI DI PERSONE FISICHE AI SENSI DELL&apos;ART. 13 E 14 DEL REGOLAMENTO (UE) 2016/679 DEL PARLAMENTO EUROPEO E DEL CONSIGLIO DEL 27 APRILE 2016 (DI SEGUITO L&apos;&quot;INFORMATIVA&quot;)</b><br><br>Il Regolamento sulla &quot;protezione delle persone fisiche con riguardo al trattamento dei dati personali, nonch&egrave; alla libera circolazione di tali dati&quot; (di seguito il &quot;Regolamento&quot;) contiene una serie di norme dirette a garantire che il trattamento dei dati personali si svolga nel rispetto dei diritti e delle libert&agrave; fondamentali delle persone. La presente Informativa ne recepisce le previsioni.<br><br><b>SEZIONE 1 - IDENTIT&Agrave; E DATI DI CONTATTO DEL TITOLARE DEL TRATTAMENTO</b><br><br><b>Intesa Sanpaolo S.p.A.</b>, con sede legale in Piazza San Carlo 156, 10121 Torino, Capogruppo del Gruppo bancario internazionale Intesa Sanpaolo, in qualit&agrave; di Titolare del trattamento (di seguito anche la &quot;Banca&quot; o il &quot;Titolare&quot;) tratta i Suoi dati personali (di seguito i &quot;Dati Personali&quot;) per le finalit&agrave; indicate nella Sezione 3.<br>Per ulteriori informazioni pu&ograve; contattare il numero verde 800303303 o visitare il sito Internet di Intesa Sanpaolo <a target="_black" class="linkMailPrivacy" href="https://www.intesasanpaolo.com">www.intesasanpaolo.com</a> e, in particolare, la sezione &quot;Privacy&quot; con tutte le informazioni concernenti l&apos;utilizzo ed il trattamento dei Dati Personali, i riferimenti dettagliati di ciascuna societ&agrave; del Gruppo Intesa Sanpaolo, le informazioni aggiornate in merito ai contatti ed ai canali di comunicazione resi disponibili a tutti gli Interessati da parte del Gruppo Intesa Sanpaolo.<br><br><b>SEZIONE 2 - DATI DI CONTATTO DEL RESPONSABILE DELLA PROTEZIONE DEI DATI</b><br><br>Intesa Sanpaolo ha nominato il &quot;responsabile della protezione dei dati&quot; previsto dal Regolamento (c.d. &quot;Data Protection Officer&quot; o DPO). Per tutte le questioni relative al trattamento dei Suoi Dati Personali e/o per esercitare i diritti previsti dal Regolamento stesso, elencati nella Sezione 7 della presente Informativa, pu&ograve; contattare il DPO al seguente indirizzo email: <a class="linkMailPrivacy" href="mailto:dpo@intesasanpaolo.com">dpo@intesasanpaolo.com</a><br><br><b>SEZIONE 3 - CATEGORIE DEI DATI PERSONALI, FINALIT&Agrave; E BASE GIURIDICA DEL TRATTAMENTO</b><br><br><b>Categorie di Dati Personali</b><br>Fra i Dati Personali che la Banca tratta rientrano, a titolo esemplificativo, i dati anagrafici e di contatto.<br><br><b>Finalit&agrave; e base giuridica del trattamento</b><br>I Dati Personali che la riguardano, da Lei comunicati alla Banca o raccolti presso soggetti terzi (in quest&apos;ultimo caso previa verifica del rispetto delle condizioni di liceit&agrave; da parte dei terzi), sono trattati dalla Banca nell\'ambito della sua attivit&agrave; per le seguenti finalit&agrave;:<br><b>a) Offerta dei servizi e/o dei prodotti della Banca</b><br>Il conferimento dei Suoi Dati Personali necessari per svolgere le attivit&agrave; connesse all&apos;offerta dei servizi e/o dei prodotti da Lei richiesti non &egrave; obbligatorio, ma il rifiuto a fornire tali Dati Personali comporta l&apos;impossibilit&agrave; per la Banca di adempiere a quanto da Lei richiesto.<br><b>b) Adempimento a prescrizioni normative nazionali e comunitarie</b><br>Il trattamento dei Suoi Dati Personali per adempiere a prescrizioni normative &egrave; obbligatorio e non &egrave; richiesto il Suo consenso. Il trattamento &egrave; obbligatorio, ad esempio, quando &egrave; prescritto dalla normativa antiriciclaggio, fiscale, anticorruzione, di prevenzione delle frodi nei servizi di pagamento o per adempiere a disposizioni o richieste dell&apos;autorit&agrave; di vigilanza e controllo.<br><b>c) Marketing diretto e indiretto</b><br>Il trattamento dei Suoi Dati Personali,<br>&emsp;-&emsp;per svolgere attivit&agrave; funzionali alla promozione e vendita di prodotti e servizi di societ&agrave; del Gruppo Intesa Sanpaolo o di societ&agrave; terze attraverso lettere, telefono, Internet, SMS ed altri sistemi di comunicazione;<br>&Egrave; facoltativo ed &egrave; richiesto il Suo consenso.<br><br><b>d) Legittimo interesse del Titolare</b><br>Il trattamento dei Suoi Dati Personali &egrave; necessario per perseguire un legittimo interesse della Banca, ossia:<br>- per svolgere l&apos;attivit&agrave; di prevenzione delle frodi;<br>- per acquisire immagini e video relativi al sistema di videosorveglianza per finalit&agrave; di sicurezza;<br>- per perseguire eventuali ed ulteriori legittimi interessi. In quest&apos;ultimo caso la Banca potr&agrave; trattare i Suoi Dati Personali solo dopo averla informata ed aver appurato che il perseguimento dei propri interessi legittimi o di quelli di terzi non comprometta i Suoi diritti e le Sue libert&agrave; fondamentali e non &egrave; richiesto il Suo consenso.<br><br><b>SEZIONE 4 - CATEGORIE DI DESTINATARI AI QUALI I SUOI DATI PERSONALI POTRANNO ESSERE COMUNICATI</b><br>Per il perseguimento delle finalit&agrave; sopra indicate potrebbe essere necessario che la Banca comunichi i Suoi Dati Personali alle seguenti categorie di destinatari:<br>1) <b>Societ&agrave; del Gruppo Intesa Sanpaolo</b> tra cui la societ&agrave; che gestisce il sistema informativo e alcuni servizi amministrativi, legali e contabili, e le societ&agrave; controllate.<br>2) <b>Soggetti terzi</b> (societ&agrave;, liberi professionisti, etc &period;&period;&period;) operanti sia all&apos;interno che all&apos;esterno dell&apos;Unione Europea che trattano i Suoi Dati Personali nell&apos;ambito di:<br>- servizi bancari, finanziari e assicurativi, sistemi di pagamento, esattorie e tesorerie;<br>- fornitura e gestione di procedure e sistemi informatici;<br>- gestione della comunicazione alla clientela, nonch&egrave; archiviazione di dati e documenti sia in forma cartacea che elettronica;<br>- rilevazione della qualit&agrave; dei servizi, ricerche di mercato, informazione e promozione commerciale di prodotti e/o servizi.<br>3) <b>Autorit&agrave;</b> (ad esempio, giudiziaria, amministrativa etc&period;&period;&period;) e sistemi pubblici informativi istituiti presso le pubbliche amministrazioni, come, ad esempio, la Centrale Rischi presso Banca d&apos;Italia, l\'Ufficio Centrale Antifrode dei Mezzi di Pagamento (c.d. UCAMP) ed il Sistema pubblico di prevenzione amministrativa delle frodi nel settore del credito al consumo con specifico riferimento al furto di identit&agrave; (c.d. SCIPAFI), questi ultimi istituiti presso il Ministero dell&apos;Economia e delle Finanze, nonch&egrave; l&apos; Anagrafe tributaria - Archivio dei rapporti con operatori finanziari.<br>Le Societ&agrave; del Gruppo Intesa Sanpaolo ed i soggetti terzi cui possono essere comunicati i Suoi Dati Personali agiscono quali: 1) Titolari del trattamento, ossia soggetti che determinano le finalit&agrave; ed i mezzi del trattamento dei Dati Personali; 2) Responsabili del trattamento, ossia soggetti che trattano i Dati Personali per conto del Titolare o 3) Contitolari del trattamento che determinano congiuntamente alla Banca le finalit&agrave; ed i mezzi dello stesso.<br>L&apos;elenco aggiornato dei soggetti individuati come Titolari, Responsabili o Contitolari &egrave; disponibile presso tutte le Filiali di Intesa Sanpaolo.<br><br><b>SEZIONE 5 - TRASFERIMENTO DEI DATI PERSONALI AD UN PAESE TERZO O AD UN&apos;ORGANIZZAZIONE INTERNAZIONALE FUORI DALL&apos;UNIONE EUROPEA.</b><br>I Suoi Dati Personali sono trattati dalla Banca all&apos;interno del territorio dell&apos;Unione Europea e non vengono diffusi.<br><br><b>SEZIONE 6 - MODALIT&Agrave; DI TRATTAMENTO E TEMPI DI CONSERVAZIONE DEI DATI PERSONALI</b><br>Il trattamento dei Suoi Dati Personali avviene mediante strumenti manuali, informatici e telematici e in modo da garantire la sicurezza e la riservatezza dei dati stessi.<br>Suoi Dati Personali sono conservati, per un periodo di tempo non superiore a quello necessario al conseguimento delle finalit&agrave; per le quali essi sono trattati, fatti salvi i termini di conservazione previsti dalla legge. In particolare i Suoi Dati Personali sono conservati per un periodo temporale di 18 mesi a decorrere dalla loro acquisizione<br><br><b>SEZIONE 7 -DIRITTI DELL&apos;INTERESSATO</b><br>In qualit&agrave; di soggetto Interessato Lei potr&agrave; esercitare, in qualsiasi momento, nei confronti del Titolare i diritti previsti dal Regolamento di seguito elencati, inviando un&apos;apposita richiesta per iscritto all&apos;indirizzo email <a class="linkMailPrivacy" href="mailto:dpo@intesasanpaolo.com">dpo@intesasanpaolo.com</a> o all&apos;indirizzo di posta elettronica certificata <a class="linkMailPrivacy" href="mailto:privacy@pec.intesasanpaolo.com">privacy@pec.intesasanpaolo.com</a>; a mezzo posta all&apos;indirizzo Intesa Sanpaolo S.p.A., Piazza San Carlo, 156 &ndash; 10121 Torino, oppure direttamente in una qualsiasi filiale della Banca.<br>Con le stesse modalit&agrave; Lei potr&agrave; revocare in qualsiasi momento il consenso espresso con la presente Informativa.<br>Le eventuali comunicazioni e le azioni intraprese dalla Banca, a fronte dell&apos;esercizio dei diritti di seguito elencati, saranno effettuate gratuitamente. Tuttavia, se le Sue richieste sono manifestamente infondate o eccessive, in particolare per il loro carattere ripetitivo, la Banca potr&agrave; addebitarle un contributo spese, tenendo conto dei costi amministrativi sostenuti, oppure rifiutare di soddisfare le Sue richieste.<br><br><b>1. Diritto di accesso</b><br>Lei potr&agrave; ottenere dalla Banca la conferma che sia o meno in corso un trattamento dei Suoi Dati Personali e, in tal caso, ottenere l\'accesso ai Dati Personali ed alle informazioni previste dall&apos;art. 15 del Regolamento, tra le quali, a titolo esemplificativo: le finalit&agrave; del trattamento, le categorie di Dati Personali trattati etc&period;&period;&period;<br>Qualora i Dati Personali siano trasferiti a un paese terzo o a un\'organizzazione internazionale, Lei ha il diritto di essere informato dell\'esistenza di garanzie adeguate relative al trasferimento.<br>Se richiesto, la Banca Le potr&agrave; fornire una copia dei Dati Personali oggetto di trattamento. Per le eventuali ulteriori copie la Banca potr&agrave; addebitarle un contributo spese ragionevole basato sui costi amministrativi. Se la richiesta in questione &egrave; presentata mediante mezzi elettronici, e salvo diversa indicazione, le informazioni Le verranno fornite dalla Banca in un formato elettronico di uso comune.<br><b>2. Diritto di rettifica</b><br>Lei potr&agrave; ottenere dalla Banca la rettifica dei Suoi Dati Personali che risultano inesatti come pure, tenuto conto delle finalit&agrave; del trattamento, l&apos;integrazione degli stessi, qualora risultino incompleti, fornendo una dichiarazione integrativa.<br><b>3. Diritto alla cancellazione</b><br>Lei potr&agrave; chiedere al Titolare la cancellazione dei Suoi Dati Personali, se sussiste uno dei motivi previsti dall&apos;art. 17 del Regolamento, tra cui, a titolo esemplificativo, qualora i Dati Personali non sono pi&ugrave; necessari rispetto alle finalit&agrave; per le quali sono stati raccolti o altrimenti trattati o qualora il consenso su cui si basa il trattamento dei Suoi Dati Personali &egrave; stato da Lei revocato e non sussiste altro fondamento giuridico per il trattamento.<br>La informiamo che la Banca non potr&agrave; procedere alla cancellazione dei Suoi Dati Personali: qualora il loro trattamento sia necessario, ad esempio, per l\'adempimento di un obbligo di legge, per motivi di interesse pubblico, per l\'accertamento, l\'esercizio o la difesa di un diritto in sede giudiziaria.<br><b>4. Diritto di limitazione di trattamento</b><br>Lei potr&agrave; ottenere la limitazione del trattamento dei Suoi Dati Personali qualora ricorra una delle ipotesi previste dall&apos;art. 18 del Regolamento, tra le quali, ad esempio: a fronte di una Sua contestazione circa l\'esattezza dei Suoi Dati Personali oggetto di trattamento o qualora i Suoi Dati Personali le siano necessari per l\'accertamento, l\'esercizio o la difesa di un diritto in sede giudiziaria, bench&egrave; la Banca non ne abbia pi&ugrave; bisogno ai fini del trattamento.<br><b>5. Diritto alla portabilit&agrave; dei dati</b><br>Qualora il trattamento dei Suoi Dati Personali si basi sul consenso o sia necessario per l&apos;esecuzione di un contratto o di misure precontrattuali e il trattamento sia effettuato con mezzi automatizzati, Lei potr&agrave;:<br>&emsp;-&emsp;richiedere di ricevere i Dati Personali da Lei forniti in un formato strutturato, di uso comune e leggibile da dispositivo automatico (esempio: computer e/o tablet);<br>&emsp;-&emsp;trasmettere i Suoi Dati Personali ricevuti ad un altro soggetto Titolare del trattamento senza impedimenti da parte della Banca.<br>Potr&agrave; inoltre richiedere che i Suoi Dati Personali vengano trasmessi dalla Banca direttamente ad un altro soggetto titolare del trattamento da Lei indicato, se ci&ograve; sia tecnicamente fattibile per la Banca. In questo caso, sar&agrave; Sua cura fornirci tutti gli estremi esatti del nuovo titolare del trattamento a cui intenda trasferire i Suoi Dati Personali, fornendoci apposita autorizzazione scritta.<br><b>6. Diritto di opposizione</b><br>Lei potr&agrave; opporsi in qualsiasi momento al trattamento dei Suoi Dati Personali qualora il trattamento venga effettuato per l&apos;esecuzione di un&apos;attivit&agrave; di interesse pubblico o per il perseguimento di un interesse legittimo del Titolare (compresa l&apos;attivit&agrave; di profilazione).<br>Qualora Lei decidesse di esercitare il diritto di opposizione qui descritto, la Banca si asterr&agrave; dal trattare ulteriormente i Suoi dati personali, a meno che non vi siano motivi legittimi per procedere al trattamento (motivi prevalenti sugli interessi, sui diritti e sulle libert&agrave; dell\'interessato), oppure il trattamento sia necessario per l\'accertamento, l\'esercizio o la difesa in giudizio di un diritto.<br><b>7. Diritto di proporre un reclamo all&apos;Autorit&agrave; Garante per la protezione dei dati personali</b><br>Fatto salvo il Suo diritto di ricorrere in ogni altra sede amministrativa o giurisdizionale, qualora ritenesse che il trattamento dei Suoi Dati Personali da parte del Titolare avvenga in violazione del Regolamento e/o della normativa applicabile potr&agrave; proporre reclamo all&apos;Autorit&agrave; Garante per la Protezione dei dati personali competente.<br></div><div class="row"><input ng-disabled="ctrl.onlyActivation" style="float:left" type="checkbox" id="checkConsenso" name="checkConsenso" value="3" ng-click="ctrl.setCeckedInformativa()"><p class="paragrafoConCheck"><b>Selezionando questa casella dichiaro di aver preso visione dell&apos;informativa sul trattamento dei dati personali di Intesa Sanpaolo *</b></p><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreCheckConsenso === true"><span class="errore">Campo obbligatorio: seleziona la casella per proseguire.</span></div></div></div><p class="boxTextStep2Title"><b>Consenso dell\'interessato al trattamento dei dati personali</b></p><br><p class="boxTextStep2">Tenuto conto dell\'Informativa resami ai sensi dell\'art. 13 e 14 del Regolamento, prendo atto del trattamento dei miei Dati Personali effettuato per le finalit&agrave; descritte in Informativa, alle lettere a) e b) della Sezione 3 "Finalit&agrave; e base giuridica del trattamento dei dati personali".<br><br>Inoltre, con riferimento al trattamento per la finalit&agrave; di marketing diretto ed indiretto, di cui alla lettera c) della Sezione 3 dell\'informativa,</p><div class="text-center col-md-24 col-sm-24 col-xs-24"><div class="col-md-7 col-md-offset-3 col-sm-9 col-sm-offset-3 col-xs-22 col-xs-offset-1"><input ng-disabled="ctrl.onlyActivation" style="float:left" type="radio" btn-radio="\'accetto\'" id="radioAccettoConsenso" name="radioAccettoConsenso" ng-click="ctrl.setClickedInformativa()"><p class="paragrafoConRadio" ng-class="{\'paragrafoConRadioChecked\': ctrl.flagAccettoConsenso == 1, \'paragrafoConRadio\': ctrl.flagAccettoConsenso == 0}"><b>Presto il consenso</b></p></div><div class="col-md-7 col-md-offset-4 col-sm-8 col-sm-offset-1 col-xs-22 col-xs-offset-1"><input ng-disabled="ctrl.onlyActivation" style="float:left" type="radio" btn-radio="\'nego\'" id="radioNegoConsenso" name="radioNegoConsenso" ng-click="ctrl.setClickedInformativa()"><p class="paragrafoConRadio" ng-class="{\'paragrafoConRadioChecked\': ctrl.flagNegoConsenso == 1, \'paragrafoConRadio\': ctrl.flagNegoConsenso == 0}"><b>Nego il consenso</b></p></div><div class="text-center col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreRadioConsenso === true"><span class="errore">Campo obbligatorio: seleziona una casella per proseguire.</span></div></div></div><p class="boxTextStep2">al trattamento dei dati personali a fini di informazione commerciale, offerte dirette, indagini di mercato o di customer satisfaction relative a prodotti e servizi della Banca e di societ&agrave; del Gruppo Intesa Sanpaolo.</p><br><br><!-- blocco codice conferma--><p class="boxTextStep2Title"><b>Conferma registrazione</b></p><br><p class="boxTextStep2">Per completare la registrazione controlla la tua mail e inserisci il codice che ti abbiamo inviato</p><br><div class="col-md-24 col-sm-24 col-xs-24"><div class="alignBoxCodiceConferma col-md-12 col-sm-12 col-xs-24"><p class="textOverInputStep2"><b>Codice*</b></p><input type="text" maxlength="6" class="col-md-22 col-sm-22 col-xs-24 inputTextRegistrazione" ng-blur="ctrl.checkCodiceConferma()" style="text-transform: capitalize" ng-class="{\'erroreEditText\': ctrl.erroreCodiceConfermaFormato || ctrl.erroreCodiceConfermaVuoto || ctrl.erroreCodiceConfermaErrato || ctrl.erroreCodiceConfermaMaxOts}" ng-model="ctrl.codiceConferma" required><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.erroreCodiceConfermaFormato === true"><span class="errore">Il codice pu&ograve; contenere solo caratteri numerici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreCodiceConfermaVuoto === true"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div><div ng-show="ctrl.erroreCodiceConfermaErrato"><span class="errore">Il codice OTS inserito non &egrave; corretto, verifica nuovamente la mail che ti abbiamo inviato.</span></div><div ng-show="ctrl.erroreCodiceConfermaMaxOts"><span class="errore">Non l\'hai ricevuto? Verifica la tua email e riprova pi&ugrave; tardi.</span></div></div></div></div><p class="boxTextStep2" ng-if="!ctrl.erroreCodiceConfermaMaxOts"><span>Non l\'hai ricevuto?</span> <span class="greenLink" ng-click="ctrl.clickRichiediCodice()"><b>RICHIEDI CODICE</b></span></p></div><div class="row" style="margin-top:-10px"><p class="col-md-18 col-md-offset-3 col-sm-18 col-sm-offset-3 col-xs-20 col-xs-offset-2 boxTextStep2" style="padding-left:10px">* Campi obbligatori</p></div><!-- captcha v2 commentato, implementato v3\r\n            <div class="row" style="margin-top: 20px">\r\n                <div style="float:center">\r\n                    <div class="row">\r\n                        <div class="col-md-24 col-sm-24 col-xs-24">\r\n                            <p class="text-center boxTextStep2">Per motivi di sicurezza, metti un segno di spunta accanto alla seguente voce e segui le istruzioni.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row text-center" id="captchaId" style="padding: 20px 0px 20px 0px">\r\n                        <div class="allineamentoCaptcha col-lg-6 col-md-8 col-sm-10 col-xs-18" vc-recaptcha key="ctrl.captchaKey" ng-model="ctrl.gRecaptchaResponse"\r\n                            on-success="ctrl.setResponse(response)" on-expire="ctrl.cbExpiration()" lang="it">\r\n                        </div>\r\n                    </div>\r\n                    <div class="row text-center" style="margin-left: 10px;">\r\n                        <div ng-show="ctrl.erroregRecaptchaResponse">\r\n                            <span class="text-center erroreCaptcha">Per continuare, metti un segno di spunta accanto alla voce di questo box e segui le indicazioni.</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div> \r\n            --><!-- fine captcha v2--><div class="row" style="margin-top:10px"></div><div class="col-md-20 col-md-offset-2 col-sm-20 col-sm-offset-2 col-xs-20 col-xs-offset-2"><div class="row text-center" style="margin-bottom:30px"><button class="col-md-4 col-md-offset-0 col-sm-18 col-sm-offset-3 col-xs-18 col-xs-offset-3 customBtn greyButton" style="margin-right:10px" type="button" ng-click="ctrl.bottoneAnnulla()">ANNULLA</button> <button class="col-md-4 col-md-offset-0 col-sm-18 col-sm-offset-3 col-xs-18 col-xs-offset-3 customBtn greyButton" type="button" ng-click="ctrl.bottoneIndietro()">INDIETRO</button> <button class="col-md-4 col-md-offset-0 col-sm-18 col-sm-offset-3 col-xs-18 col-xs-offset-3 customBtn greenBackground continua" type="button" ng-class="{\'customBtnDisabled disabled\': ctrl.bottoneDisabilitatoStep2 === true}" ng-disabled="ctrl.bottoneDisabilitatoStep2 === true" ng-click="ctrl.bottoneContinua()">CONTINUA</button></div></div></div><div ng-if="ctrl.currentStep === 3"><!-- esito positivo di tutto --><div ng-if="!ctrl.signupError && !ctrl.errFromOtherTool"><div><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/ok.png"></div><div class="row text-center"><p class="titoloEsito">Registrazione confermata</p></div><div class="row text-center col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><p class="paragrafoEsito">Puoi accedere alla tua area riservata in qualsiasi momento con la tua email.</p></div><div class="row text-center"><button class="col-md-4 col-md-offset-10 col-sm-8 col-sm-offset-8 col-xs-16 col-xs-offset-4 text-center customBtn greenBackground" ng-click="ctrl.continue()">CONTINUA</button></div><div style="margin-bottom:100px"></div></div></div><!-- esito negativo registrazione --><div ng-if="ctrl.signupError"><!-- step 3 esito negativo errore generico --><div ng-if="!ctrl.utenteCensito2 && !ctrl.clienteIB"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/errore.png"></div><div class="row text-center"><p class="titoloEsito">Ci scusiamo ma, per un problema tecnico, la registrazione non &egrave; andata a buon fine. Per favore, riprova pi&ugrave; tardi. Per maggiori informazioni contattaci.</p></div><!--div class="row text-center col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2">\r\n                        <p class="paragrafoEsito">Indirizzo email gi&agrave; censito. Si prega di utilizzare un altro indirizzo o accedere all\'area ospiti con le proprie credenziali.</p>\r\n                    </div--><div class="row text-center"><button class="col-md-4 col-md-offset-7 col-sm-5 col-sm-offset-5 col-xs-6 col-xs-offset-4 text-center customBtn greyButton" ng-click="ctrl.bottoneRipetiOperazione()">RIPETI OPERAZIONE</button> <button class="col-md-4 col-md-offset-2 col-sm-5 col-sm-offset-4 col-xs-6 col-xs-offset-3 text-center customBtn greyButton" ng-click="ctrl.bottoneCercaAiuto()">CERCA AIUTO</button></div><div style="margin-bottom:100px"></div></div><!-- step 3 esito negativo errore utente gia attivo --><div ng-if="ctrl.utenteCensito2"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/errore.png"></div><div class="row text-center"><p class="titoloEsito">Impossibile completare la registrazione</p></div><div class="row text-center col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><p class="paragrafoEsito">Indirizzo email gi&agrave; censito. Si prega di utilizzare un altro indirizzo o accedere all\'area ospiti con le proprie credenziali.</p></div><div class="row text-center"><button class="col-md-4 col-md-offset-7 col-sm-5 col-sm-offset-5 col-xs-6 col-xs-offset-4 text-center customBtn greyButton" ng-click="ctrl.bottoneRipetiOperazione()">RIPETI OPERAZIONE</button> <button class="col-md-4 col-md-offset-2 col-sm-5 col-sm-offset-4 col-xs-6 col-xs-offset-3 text-center customBtn greyButton" ng-click="ctrl.bottoneCercaAiuto()">CERCA AIUTO</button></div><div style="margin-bottom:100px"></div></div><!-- step 3 esito negativo errore cliente ib --><div ng-if="ctrl.clienteIB"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/errore.png"></div><div class="row text-center"><p class="titoloEsito">Impossibile completare la registrazione</p></div><div class="row text-center col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><p class="paragrafoEsito">Sei gi&agrave; cliente della banca. Accedi all\'Internet Banking per accedere alla tua area personale.</p></div><div class="row text-center"><button class="col-md-4 col-md-offset-7 col-sm-5 col-sm-offset-5 col-xs-6 col-xs-offset-4 text-center customBtn greyButton" ng-click="ctrl.bottoneRipetiOperazione()">RIPETI OPERAZIONE</button> <button class="col-md-4 col-md-offset-2 col-sm-5 col-sm-offset-4 col-xs-6 col-xs-offset-3 text-center customBtn greyButton" ng-click="ctrl.bottoneCercaAiuto()">CERCA AIUTO</button></div><div style="margin-bottom:100px"></div></div><!-- step 3 esito negativo errore 202 --><div ng-if="ctrl.error202 && (ctrl.error202generico || ctrl.error202conti)"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/erroreParziale.png"></div><div class="row text-center"><p class="titoloEsito">Registrazione non riuscita</p></div><div class="row text-center col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><p class="paragrafoEsito">{{ctrl.nome}} hai provato a registrarti all\'area ospiti, dedicata a chi non &egrave; ancora nostro cliente. Se hai gi&agrave; i codici della banca online puoi accedere direttamente ai servizi e alle operazioni. Se non hai ancora i codici richiedili nella tua filiale e scopri tutti i nostri servizi.</p></div><div class="row text-center"><button class="col-md-4 col-md-offset-7 col-sm-5 col-sm-offset-5 col-xs-6 col-xs-offset-4 text-center customBtn greyButton" ng-click="ctrl.prendiAppuntamento()">PRENDI APPUNTAMENTO</button> <button class="col-md-4 col-md-offset-2 col-sm-5 col-sm-offset-4 col-xs-6 col-xs-offset-3 text-center customBtn greyButton" ng-click="ctrl.gohomepage()">ENTRA NELLA BANCA ONLINE</button></div><div style="margin-bottom:100px"></div></div><div ng-if="ctrl.error202 && ctrl.error202prestiti"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/erroreParziale.png"></div><div class="row text-center"><p class="titoloEsito">Registrazione non riuscita</p></div><div class="row text-center col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><p class="paragrafoEsito">{{ctrl.nome}} hai provato a registrarti all\'area ospiti, dedicata a chi non &egrave; ancora nostro cliente. Se hai gi&agrave; i codici della banca online entra e richiedi direttamente il prestito. Se non hai ancora i codici puoi rivolgerti alla tua filiale per richiedere il prestito o avere informazioni.</p></div><div class="row text-center"><button class="col-md-4 col-md-offset-7 col-sm-5 col-sm-offset-5 col-xs-6 col-xs-offset-4 text-center customBtn greyButton" ng-click="ctrl.prendiAppuntamento()">PRENDI APPUNTAMENTO</button> <button class="col-md-4 col-md-offset-2 col-sm-5 col-sm-offset-4 col-xs-6 col-xs-offset-3 text-center customBtn greyButton" ng-click="ctrl.gohomepage()">ENTRA NELLA BANCA ONLINE</button></div><div style="margin-bottom:100px"></div></div><!-- step 3 esito negativo errore recaptcha v3 con score < 0.5 --><div ng-if="errorReCaptcha"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/errore.png"></div><div class="row text-center"><p class="titoloEsito">Ci scusiamo ma, per un problema tecnico, la registrazione non &egrave; andata a buon fine. Per favore, riprova pi&ugrave; tardi. Per maggiori informazioni contattaci.</p></div><div class="row text-center"><button class="col-md-4 col-md-offset-7 col-sm-5 col-sm-offset-5 col-xs-6 col-xs-offset-4 text-center customBtn greyButton" ng-click="ctrl.bottoneRipetiOperazione()">RIPETI OPERAZIONE</button> <button class="col-md-4 col-md-offset-2 col-sm-5 col-sm-offset-4 col-xs-6 col-xs-offset-3 text-center customBtn greyButton" ng-click="ctrl.bottoneCercaAiuto()">CERCA AIUTO</button></div><div style="margin-bottom:100px"></div></div></div><!-- esito positivo registrazione ma errore prestiti/conti--><div ng-if="!ctrl.signupError && ctrl.errFromOtherTool"><div class="row text-center" style="margin:50px 0px 20px 0px"><img src="/ib/public/guestarea/assets/erroreParziale.png"></div><div class="row text-center col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><p class="paragrafoEsito" style="white-space: pre-line">{{ctrl.textPrestitiConti}}</p></div><div class="row text-center"><button class="col-md-6 col-md-offset-9 col-sm-8 col-sm-offset-8 col-xs-18 col-xs-offset-3 text-center customBtn greenBackground" ng-click="ctrl.registrazioneRedirect()">{{ctrl.buttonPrestitiConti|uppercase}}</button></div><div style="margin-bottom:100px"></div></div></div></div><!-- parte finale visibile solo in esito --><div ng-if="ctrl.currentStep === 3" class="jumbotron footer row"><button class="text-center row customBtn greyButton col-md-4 col-md-offset-10 col-sm-8 col-sm-offset-8 col-xs-20 col-xs-offset-2" ng-click="ctrl.registrazioneRedirect()">{{ctrl.redirectBtn}}</button></div></div>'),
e.put("app/modalPrivacy/modalPrivacy.html",'<div id="modalPrivacy"><div ng-if="!privacyCtrl.showError"><div class="row"><p class="titolo text-center">{{privacyCtrl.info.titolo | uppercase}}</p></div><div class="row"><p class="boxTextPrivacy">{{privacyCtrl.info.intestazione}}</p></div><div class="row"><hr class="hr"></div><div class="row"><a href="{{privacyCtrl.info.linkDocumento}}" target="_blank" class="linkInformativa"><span class="iconaPDF ico-comuni-pdf"></span> <b>{{privacyCtrl.info.visDocumento | uppercase}}</b></a></div><div class="row"><div class="custom-line-height"><p class="align-text-content paragrafo" ng-class="{\'checked\': privacyCtrl.presaVisioneDoc }"><input type="checkbox" class="align-input-content" ng-model="privacyCtrl.presaVisioneDoc" id="checkConsenso" name="checkConsenso"> {{privacyCtrl.info.presaVisione}}</p></div><!-- errore commentato\r\n            <div ng-if="privacyCtrl.showError && !privacyCtrl.presaVisioneDoc">\r\n                </br>\r\n                <p class="campoObbligatorioText">{{privacyCtrl.info.errore}}</p>\r\n            </div>\r\n            --></div><div class="row"><hr class="hr"></div><div class="row"><p class="boxTextPrivacy">{{privacyCtrl.info.corpoP1}}</p></div><div class="row"><div class="col-md-12 col-sm-24 col-xs-24"><div class="col-md-12 col-sm-12 col-xs-12 check-container"><p class="align-text-content paragrafo" ng-class="{\'checked\': privacyCtrl.trattamentoDatiPersonali == privacyCtrl.info.valoreConsenso }"><input type="radio" class="align-input-content" ng-model="privacyCtrl.trattamentoDatiPersonali" value="{{privacyCtrl.info.valoreConsenso}}" id="radio_consenso" ng-click="privacyCtrl.radioHandler()"> {{privacyCtrl.info.consenso}}</p></div><div class="col-md-12 col-sm-12 col-xs-12 check-container"><p class="align-text-content paragrafo" ng-class="{\'checked\': privacyCtrl.trattamentoDatiPersonali == privacyCtrl.info.valoreDissenso }"><input type="radio" class="align-input-content" ng-model="privacyCtrl.trattamentoDatiPersonali" value="{{privacyCtrl.info.valoreDissenso}}" id="radio_dissenso" ng-click="privacyCtrl.radioHandler()"> {{privacyCtrl.info.dissenso}}</p></div></div></div><div class="row"><p class="boxTextPrivacy" style="margin-bottom: 10px">{{privacyCtrl.info.corpoP2}}</p></div><div class="row text-center"><div class="col-md-24 col-sm-24 col-xs-24"><div class="col-md-6 col-md-offset-9 col-sm-12 col-sm-offset-6 col-xs-22 col-xs-offset-1" popover-class="carrello_popover" popover-trigger="none" popover-placement="top" popover-is-open="privacyCtrl.showPopover" uib-popover="{{privacyCtrl.info.popover}}" ng-mouseover="privacyCtrl.setShowPopover(true)" ng-mouseleave="privacyCtrl.setShowPopover(false)"><button ng-class="{\'greenButton\': privacyCtrl.presaVisioneDoc, \'greenButton disabled\': !privacyCtrl.presaVisioneDoc}" ng-disabled="!privacyCtrl.presaVisioneDoc" ng-click="privacyCtrl.continua();$dismiss()">CONTINUA</button></div></div></div></div><div ng-if="privacyCtrl.showError"><div class="row text-center error-face"><span class="icona icon ico-comuni-esito-face-ko"></span></div><div class="row text-center"><p class="titoloEsito">{{privacyCtrl.info.erroreTecnico}}</p></div><div class="row text-center"><button class="col-md-6 col-md-offset-9 col-sm-8 col-sm-offset-8 col-xs-18 col-xs-offset-3 text-center customBtn greenButton" ng-click="privacyCtrl.riprova();$dismiss()">RIPROVA</button></div><div style="margin-bottom:20px"></div></div></div>'),e.put("app/modificaPassword/modificaPassword-modal.html",'<div id="modificaPasswordModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div ng-if="modificaPasswordModalCtrl.firstStep"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">ELIMINA PROFILO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Sei sicuro di voler eliminare il tuo profilo nell\'area guest?</p><p>Eliminandolo perderai le simulazioni salvate, i tuoi mi piace e i tuoi appuntamenti in filiale.</p></div></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greyButton col-md-12 col-sm-12 col-xs-12" type="button" ng-click="$dismiss()" style="float:left">NO, ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greenBackground col-md-12 col-sm-12 col-xs-12" type="button" ng-click="modificaPasswordModalCtrl.eliminaProfilo()" style="float:right">SI, CONFERMA</button></div></div></div><div ng-if="!modificaPasswordModalCtrl.firstStep && !modificaPasswordModalCtrl.resetProfileError"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">IL TUO PROFILO È STATO ELIMINATO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Il tuo profilo &egrave; stato eliminato con successo.</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="modificaPasswordModalCtrl.logout()">TORNA ALLA HOME</button></div></div></div><div ng-if="!modificaPasswordModalCtrl.firstStep && modificaPasswordModalCtrl.resetProfileError"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">ERRORE NELL\'ELIMINAZIONE DEL PROFILO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Ci scusiamo ma, per un problema tecnico, l\'eliminazione del profilo non è andato a buon fine. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="$dismiss()">TORNA ALLA HOME</button></div></div></div></div>'),e.put("app/modificaPassword/modificaPassword.html",'<div id="modificaPassword"><!-- galleggiante commentato\r\n    <div class="container" ng-show="ctrl.isLogged">\r\n        <div class="row galleggiante">\r\n            <div class="col-md-24 col-sm-24 col-xs-24">\r\n                <span uib-dropdown class="dropdown">\r\n                    <a uib-dropdown-toggle ng-click="ctrl.checkOpenDropdown()">\r\n                        <button class="text-center bottoniTendina dropdown">CIAO {{ ctrl.nomeTizio }}\r\n                            <img ng-show="!ctrl.openDropdown" class="immagineMenuTendina" src="/ib/public/guestarea/assets/menugiu.png" />\r\n                            <img ng-show="ctrl.openDropdown" class="immagineMenuTendina" src="/ib/public/guestarea/assets/menusu.png" /><br>\r\n                        </button>\r\n                    </a>\r\n                    <ul class="dropdown-menu" uib-dropdown-menu role="button">\r\n                        <li role="menuitem"><a ng-click="ctrl.open()"><p>Elimina profilo</p></a></li>\r\n                        <li class="divider"></li>\r\n                        <li role="menuitem"><a ng-click="ctrl.logout()"><span class="icona icon ico-menu-esci"></span>&nbsp;&nbsp;<p style="display:inline">Esci</p></a></li>\r\n                    </ul>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div> --><div class="jumbotron header row"><div class="text-center row"><div class="col-md-24 col-sm-24 col-xs-24"><label ng-show="ctrl.isLogged" class="titoloProgress">CAMBIA PASSWORD</label><label ng-show="!ctrl.isLogged && !ctrl.expired" class="titoloProgress">RECUPERA PASSWORD</label><label ng-show="!ctrl.isLogged && ctrl.expired" class="titoloProgress">LA TUA PASSWORD &Egrave; SCADUTA</label></div><div class="container"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.currentStep === 1"><div class="row"><div class="stepVerde col-sm-4 col-sm-offset-8 col-xs-7 col-xs-offset-5" style="margin-right: 5px"><div class="stepVerdeMezzo"></div></div><div class="stepGrigio col-sm-4 col-xs-7" style="margin-left: 5px"></div></div><div class="row"><label class="col-sm-4 col-sm-offset-8 col-xs-7 col-xs-offset-5 sottoTitoliProgressVerde" style="margin-right: 5px">MODIFICA</label><label class="col-sm-4 col-xs-7 sottoTitoliProgressGrigio" style="margin-left: 5px">ESITO</label></div></div><div ng-show="ctrl.currentStep === 2"><div class="row"><div class="stepVerde col-sm-4 col-sm-offset-8 col-xs-7 col-xs-offset-5" style="margin-right: 5px"><div class="stepVerdePieno"></div></div><div class="stepVerde col-sm-4 col-xs-7" style="margin-left: 5px"><div class="stepVerdePieno"></div></div></div><div class="row"><label class="col-sm-4 col-sm-offset-8 col-xs-7 col-xs-offset-5 sottoTitoliProgressVerde" style="margin-right: 5px">MODIFICA</label><label class="col-sm-4 col-xs-7 sottoTitoliProgressGrigio" style="margin-left: 5px">ESITO</label></div></div></div></div></div></div><div class="container"><!-- step 1 cambio passowrd per scadenza + unificato processo mod password per utenti loggati --><div ng-if="(ctrl.currentStep === 1)"><!-- condizione commentata, da riabilitare se viene decommentato il blocco sotto\r\n             <div ng-if="(ctrl.currentStep === 1 && ctrl.isLogged) || (ctrl.currentStep === 1 && !ctrl.isLogged && ctrl.emailFromUrl == true)"> --><div class="row box col-md-20 col-md-offset-2 col-sm-22 col-sm-offset-1 col-xs-20 col-xs-offset-2"><div class="col-md-12 col-sm-12 col-xs-20"><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><p class="textOverInput" ng-show="ctrl.isLogged == true || (!ctrl.isLogged && ctrl.expired)"><b>Vecchia password</b></p><p class="textOverInput" ng-show="ctrl.isLogged == false && !ctrl.expired"><b>Password temporanea</b></p><input type="password" maxlength="35" style="letter-spacing: 5px" class="col-md-22 col-sm-22 col-xs-23 inputTextRegistrazione" id="oldPassword" name="oldPassword" ng-blur="ctrl.checkOldPassword()" ng-change="ctrl.checkCampoVuotoOldPassword()" ng-focus="ctrl.pallinoEvidenziato = 1" ng-class="{\'erroreEditText\': ctrl.erroreOldPassword || ctrl.erroreOldPasswordVuota}" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.oldPassword" required></div><div class="col-md-3 col-sm-3 col-xs-3" style="padding-top: 30px"><div ng-show="ctrl.pallinoEvidenziato == 1"><img src="/ib/public/guestarea/assets/stepPrimoVuoto.png"></div><div ng-show="ctrl.pallinoEvidenziato == 2"><img src="/ib/public/guestarea/assets/stepPrimoPieno.png"></div><div ng-show="ctrl.pallinoEvidenziato == 3"><img src="/ib/public/guestarea/assets/stepPrimoPieno.png"></div></div></div><div ng-class="{\'row shift3step tratteggiato\' : ctrl.pallinoEvidenziato == 1,\r\n                                    \'row shift3step continuo\' : ctrl.pallinoEvidenziato == 2 || ctrl.pallinoEvidenziato == 3}"><div class="col-md-21 col-sm-21 col-xs-21"><div ng-show="ctrl.erroreOldPassword"><span class="errore">La password deve essere composta da almeno 8 caratteri tra lettere e numeri. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreOldPasswordVuota"><span class="errore">Campo obbligatorio: compila per proseguire</span></div></div><div class="col-md-3 col-sm-3 col-xs-3"></div><!--\r\n                        <div class="col-md-1 col-sm-1 col-xs-1" ng-show="ctrl.erroreOldPasswordVuota || ctrl.erroreOldPassword">\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 1 && !ctrl.erroreOldPasswordVuota && !ctrl.erroreOldPassword" src="/ib/public/guestarea/assets/stepTratteggiatoCorto.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 1 && ctrl.erroreOldPasswordVuota" src="/ib/public/guestarea/assets/stepTratteggiatoMedio.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 1 && ctrl.erroreOldPassword" src="/ib/public/guestarea/assets/stepTratteggiatoLungo.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 2 && !ctrl.erroreOldPasswordVuota && !ctrl.erroreOldPassword" src="/ib/public/guestarea/assets/stepContinuoCorto.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 2 && ctrl.erroreOldPasswordVuota" src="/ib/public/guestarea/assets/stepContinuoMedio.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 2 && ctrl.erroreOldPassword" src="/ib/public/guestarea/assets/stepContinuoLungo.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 3 && !ctrl.erroreOldPasswordVuota && !ctrl.erroreOldPassword" src="/ib/public/guestarea/assets/stepContinuoCorto.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 3 && ctrl.erroreOldPasswordVuota" src="/ib/public/guestarea/assets/stepContinuoMedio.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 3 && ctrl.erroreOldPassword" src="/ib/public/guestarea/assets/stepContinuoLungo.png"/>\r\n                        </div>--></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><p class="textOverInput"><b>Nuova password</b></p><input type="password" maxlength="35" style="letter-spacing: 5px" class="col-md-22 col-sm-22 col-xs-23 inputTextRegistrazione" id="password" name="password" ng-blur="ctrl.checkPassword()" ng-change="ctrl.checkCampoVuotoPassword()" ng-focus="ctrl.pallinoEvidenziato = 2" ng-class="{\'erroreEditText\': ctrl.errorePassword || ctrl.errorePasswordVuota}" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.password" required></div><div class="col-md-3 col-sm-3 col-xs-3"><div ng-show="ctrl.pallinoEvidenziato == 1"><img src="/ib/public/guestarea/assets/stepIntermedioGrigio.png" style="margin:-1px 0px -1px 0px"></div><div ng-show="ctrl.pallinoEvidenziato == 2 "><img src="/ib/public/guestarea/assets/stepIntermedioParziale.png" style="margin:-1px 0px -1px 0px"></div><div ng-show="ctrl.pallinoEvidenziato == 3"><img src="/ib/public/guestarea/assets/stepIntermedioTotale.png" style="margin:-1px 0px -1px 0px"></div></div></div><div ng-class="{\'row shift3step tratteggiato\' : ctrl.pallinoEvidenziato == 1 || ctrl.pallinoEvidenziato == 2,\r\n                                    \'row shift3step continuo\' : ctrl.pallinoEvidenziato == 3}"><div class="col-md-21 col-sm-21 col-xs-21"><div ng-show="ctrl.errorePassword"><span class="errore">La password deve essere composta da almeno 8 caratteri e deve contenere almeno un numero, una lettera minuscola, una lettera maiuscola e un carattere speciale. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errorePasswordVuota"><span class="errore">Campo obbligatorio: compila per proseguire</span></div></div><div class="col-md-3 col-sm-3 col-xs-3"></div><!--\r\n                        <div class="col-md-1 col-sm-1 col-xs-1" ng-show="ctrl.errorePasswordVuota || ctrl.errorePassword">\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 1 && !ctrl.errorePasswordVuota && !ctrl.errorePassword" src="/ib/public/guestarea/assets/stepTratteggiatoCorto.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 1 && ctrl.errorePasswordVuota" src="/ib/public/guestarea/assets/stepTratteggiatoMedio.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 1 && ctrl.errorePassword" src="/ib/public/guestarea/assets/stepTratteggiatoLungo.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 2 && !ctrl.errorePasswordVuota && !ctrl.errorePassword" src="/ib/public/guestarea/assets/stepTratteggiatoCorto.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 2 && ctrl.errorePasswordVuota" src="/ib/public/guestarea/assets/stepTratteggiatoMedio.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 2 && ctrl.errorePassword" src="/ib/public/guestarea/assets/stepTratteggiatoLungo.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 3 && !ctrl.errorePasswordVuota && !ctrl.errorePassword" src="/ib/public/guestarea/assets/stepContinuoCorto.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 3 && ctrl.errorePasswordVuota" src="/ib/public/guestarea/assets/stepContinuoMedio.png"/>\r\n                            <img ng-show="ctrl.pallinoEvidenziato == 3 && ctrl.errorePassword" src="/ib/public/guestarea/assets/stepContinuoLungo.png"/>\r\n                        </div>--></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><p class="textOverInput"><b>Conferma nuova password</b></p><input type="password" maxlength="35" style="letter-spacing: 5px" class="col-md-22 col-sm-22 col-xs-23 inputTextRegistrazione" id="confirmPassword" name="confirmPassword" ng-blur="ctrl.checkConfirmPassword()" ng-change="ctrl.checkCampoVuotoConfirmPassword()" ng-focus="ctrl.pallinoEvidenziato = 3" ng-class="{\'erroreEditText\': ctrl.erroreConfirmPassword || ctrl.erroreConfirmPasswordVuota}" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.confirmPassword" required></div><div class="col-md-3 col-sm-3 col-xs-3"><div ng-show="ctrl.pallinoEvidenziato == 1"><img src="/ib/public/guestarea/assets/stepUltimoVuoto.png"></div><div ng-show="ctrl.pallinoEvidenziato == 2 "><img src="/ib/public/guestarea/assets/stepUltimoVuoto.png"></div><div ng-show="ctrl.pallinoEvidenziato == 3"><img src="/ib/public/guestarea/assets/stepUltimoPieno.png"></div></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21"><div ng-show="ctrl.erroreConfirmPassword"><span class="errore">La password deve essere composta da almeno 8 caratteri e deve contenere almeno un numero, una lettera minuscola, una lettera maiuscola e un carattere speciale. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreConfirmPasswordVuota"><span class="errore">Campo obbligatorio: compila per proseguire</span></div></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.passwordMatch === false"><span class="errore">Le password inserite non coincidono. Per favore, verifica e riprova.</span></div></div></div><div class="col-md-12 col-sm-12 col-xs-24"><p ng-show="(ctrl.pallinoEvidenziato == 1 && ctrl.isLogged == true) || (!ctrl.isLogged && ctrl.expired)" class="boxTextDx">Inserisci la tua vecchia password e poi quella nuova che desideri creare</p><p ng-show="ctrl.pallinoEvidenziato == 1 && ctrl.isLogged == false && !ctrl.expired" class="boxTextDx">Inserisci la password temporanea che ti abbiamo inviato per email e poi quella nuova che desideri creare</p><p ng-show="ctrl.pallinoEvidenziato == 2" class="boxTextDx" ng-class="{\'height132\': !ctrl.erroreOldPassword && !ctrl.erroreOldPasswordVuota,\'height150\': ctrl.erroreOldPassword || ctrl.erroreOldPasswordVuota}">La password deve essere composta da almeno 8 caratteri con almeno un numero, una lettera minuscola, una lettera maiuscola ed un carattere speciale e ha una durata massima di 90 giorni, trascorsi i quali dovrai modificarla.<br>Per la tua sicurezza, evita di inserire informazioni facilmente reperibili come, per esempio, la data di nascita.</p><p ng-show="ctrl.pallinoEvidenziato == 3" class="boxTextDx" ng-class="{\r\n                            \'height230\': !ctrl.erroreOldPassword && !ctrl.erroreOldPasswordVuota && !ctrl.errorePassword && !ctrl.errorePasswordVuota, \r\n                            \'height251\': !ctrl.erroreOldPassword && !ctrl.erroreOldPasswordVuota && !ctrl.errorePassword && ctrl.errorePasswordVuota,\r\n                            \'height315\': !ctrl.erroreOldPassword && !ctrl.erroreOldPasswordVuota && ctrl.errorePassword && !ctrl.errorePasswordVuota,\r\n                            \'height250\': ctrl.erroreOldPassword && !ctrl.erroreOldPasswordVuota && !ctrl.errorePassword && !ctrl.errorePasswordVuota,\r\n                            \'height280\': !ctrl.erroreOldPassword && ctrl.erroreOldPasswordVuota && !ctrl.errorePassword && !ctrl.errorePasswordVuota,\r\n                            \'height370\': ctrl.erroreOldPassword && !ctrl.erroreOldPasswordVuota && ctrl.errorePassword && !ctrl.errorePasswordVuota,\r\n                            \'height300\': ctrl.erroreOldPassword && !ctrl.erroreOldPasswordVuota && !ctrl.errorePassword && ctrl.errorePasswordVuota,\r\n                            \'height270\': !ctrl.erroreOldPassword && ctrl.erroreOldPasswordVuota && !ctrl.errorePassword && ctrl.errorePasswordVuota,\r\n                            \'height330\': !ctrl.erroreOldPassword && ctrl.erroreOldPasswordVuota && ctrl.errorePassword && !ctrl.errorePasswordVuota\r\n                        }">Conferma la password che hai scelto.</p><br></div></div><div class="col-md-20 col-md-offset-2 col-sm-22 col-sm-offset-1 col-xs-8 col-xs-offset-8"><div class="row text-center"><button class="col-md-4 col-sm-10 col-xs-24 customBtn greyButton" style="margin-right:10px" type="button" ng-click="ctrl.bottoneAnnulla()" ng-disabled="ctrl.bottoneDisabilitatoStep1">ANNULLA</button> <button class="col-md-4 col-sm-10 col-xs-24 customBtn greenBackground" style="float:right" type="button" ng-class="{\'customBtnDisabled disabled\': ctrl.bottoneDisabilitatoStep1}" ng-click="ctrl.changePwd()" ng-disabled="ctrl.bottoneDisabilitatoStep1">CONFERMA</button></div></div></div><!-- step 1 cambio passowrd per scadenza per utenti non loggati --><!-- commento tutto perchè casistica non più possibile, da riabilitare nel caso in cui ci fossero problemi col il passaggio del parametro email dall\'url --><!--\r\n        <div ng-if="ctrl.currentStep === 1 && !ctrl.isLogged && ctrl.emailFromUrl == false">\r\n            <div class="row box col-md-20 col-md-offset-2 col-sm-22 col-sm-offset-1 col-xs-20 col-xs-offset-2">\r\n                <div class="col-md-12 col-sm-14 col-xs-20">\r\n                    <div class="row">\r\n                        <div class="col-md-21 col-sm-21 col-xs-21">\r\n                            <p class="textOverInput"><b>E-mail</b></p>\r\n                            <input type="text" maxlength="35" class="col-md-23 col-sm-22 col-xs-23 inputTextRegistrazione" id="email"\r\n                                name="email" ng-blur="ctrl.checkEmail()" ng-change="ctrl.checkCampoVuotoEmail()" ng-focus="ctrl.pallinoEvidenziato = 1" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.email" required/>\r\n                        </div>\r\n                        <div class="col-md-3 col-sm-3 col-xs-3" style="padding-top: 30px">\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 1">\r\n                                <img src="/ib/public/guestarea/assets/stepPrimoVuoto.png"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 2">\r\n                                <img src="/ib/public/guestarea/assets/stepPrimoPieno.png"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 3">\r\n                                <img src="/ib/public/guestarea/assets/stepPrimoPieno.png"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 4">\r\n                                <img src="/ib/public/guestarea/assets/stepPrimoPieno.png"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-class="{\'row shift4step tratteggiato\' : ctrl.pallinoEvidenziato == 1,\r\n                                    \'row shift4step continuo\' : ctrl.pallinoEvidenziato == 2 || ctrl.pallinoEvidenziato == 3 || ctrl.pallinoEvidenziato == 4}">\r\n                        <div class="col-md-21 col-sm-21 col-xs-21">\r\n                            <div ng-show="ctrl.erroreEmail">\r\n                                <span class="errore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova. </span>\r\n                            </div>\r\n                            <div ng-show="ctrl.erroreEmailVuota">\r\n                                <span class="errore">Campo obbligatorio: compila per proseguire. </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 col-sm-3 col-xs-3">\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-md-21 col-sm-21 col-xs-21">\r\n                            <p class="textOverInput"><b>Vecchia password</b></p>\r\n                            <input type="password" maxlength="35" style="letter-spacing: 5px;" class="col-md-23 col-sm-22 col-xs-23 inputTextRegistrazione" id="oldPassword"\r\n                                name="oldPassword" ng-blur="ctrl.checkOldPassword()" ng-change="ctrl.checkCampoVuotoOldPassword()" ng-focus="ctrl.pallinoEvidenziato = 2" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.oldPassword" required/>\r\n                        </div>\r\n                        <div class="col-md-3 col-sm-3 col-xs-3">\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 1">\r\n                                <img src="/ib/public/guestarea/assets/stepIntermedioGrigio.png" style="margin:-1px 0px -1px 0px"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 2">\r\n                                <img src="/ib/public/guestarea/assets/stepIntermedioParziale.png" style="margin:-1px 0px -1px 0px"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 3">\r\n                                <img src="/ib/public/guestarea/assets/stepIntermedioTotale.png" style="margin:-1px 0px -1px 0px"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 4">\r\n                                <img src="/ib/public/guestarea/assets/stepIntermedioTotale.png" style="margin:-1px 0px -1px 0px"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-class="{\'row shift4step tratteggiato\' : ctrl.pallinoEvidenziato == 1 || ctrl.pallinoEvidenziato == 2,\r\n                                    \'row shift4step continuo\' : ctrl.pallinoEvidenziato == 3 || ctrl.pallinoEvidenziato == 4}">\r\n                        <div class="col-md-21 col-sm-21 col-xs-21">\r\n                            <div ng-show="ctrl.erroreOldPassword">\r\n                                <span class="errore">La password deve essere composta da almeno 8 caratteri tra lettere e numeri. Per favore, verifica e riprova.</span>\r\n                            </div>\r\n                            <div ng-show="ctrl.erroreOldPasswordVuota">\r\n                                <span class="errore">Campo obbligatorio: compila per proseguire </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 col-sm-3 col-xs-3">\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-md-21 col-sm-21 col-xs-21">\r\n                            <p class="textOverInput"><b>Nuova password</b></p>\r\n                            <input type="password" maxlength="35" style="letter-spacing: 5px;" class="col-md-23 col-sm-22 col-xs-23 inputTextRegistrazione" id="password"\r\n                                name="password" ng-blur="ctrl.checkPassword()" ng-change="ctrl.checkCampoVuotoPassword()" ng-focus="ctrl.pallinoEvidenziato = 3" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.password" required/>\r\n                        </div>\r\n                        <div class="col-md-3 col-sm-3 col-xs-3">\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 1">\r\n                                <img src="/ib/public/guestarea/assets/stepIntermedioGrigio.png" style="margin:-1px 0px -1px 0px"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 2">\r\n                                <img src="/ib/public/guestarea/assets/stepIntermedioGrigio.png" style="margin:-1px 0px -1px 0px"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 3">\r\n                                <img src="/ib/public/guestarea/assets/stepIntermedioParziale.png" style="margin:-1px 0px -1px 0px"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 4">\r\n                                <img src="/ib/public/guestarea/assets/stepIntermedioTotale.png" style="margin:-1px 0px -1px 0px"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-class="{\'row shift4step tratteggiato\' : ctrl.pallinoEvidenziato == 1 || ctrl.pallinoEvidenziato == 2 || ctrl.pallinoEvidenziato == 3,\r\n                                    \'row shift4step continuo\' : ctrl.pallinoEvidenziato == 4}">\r\n                        <div class="col-md-21 col-sm-21 col-xs-21">\r\n                            <div ng-show="ctrl.errorePassword">\r\n                                <span class="errore">La password deve essere composta da almeno 8 caratteri tra lettere e numeri. Per favore, verifica e riprova.</span>\r\n                            </div>\r\n                            <div ng-show="ctrl.errorePasswordVuota">\r\n                                <span class="errore">Campo obbligatorio: compila per proseguire </span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 col-sm-3 col-xs-3">\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-md-21 col-sm-21 col-xs-21">\r\n                            <p class="textOverInput"><b>Conferma nuova password</b></p>\r\n                            <input type="password" maxlength="35" style="letter-spacing: 5px;" class="col-md-23 col-sm-22 col-xs-23 inputTextRegistrazione" id="confirmPassword"\r\n                                name="confirmPassword" ng-blur="ctrl.checkConfirmPassword()" ng-change="ctrl.checkCampoVuotoConfirmPassword()" ng-focus="ctrl.pallinoEvidenziato = 4" ng-init="ctrl.pallinoEvidenziato = 1" ng-model="ctrl.confirmPassword" required/>\r\n                        </div>\r\n                        <div class="col-md-3 col-sm-3 col-xs-3">\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 1">\r\n                                <img src="/ib/public/guestarea/assets/stepUltimoVuoto.png"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 2 ">\r\n                                <img src="/ib/public/guestarea/assets/stepUltimoVuoto.png"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 3">\r\n                                <img src="/ib/public/guestarea/assets/stepUltimoVuoto.png"/>\r\n                            </div>\r\n                            <div ng-show="ctrl.pallinoEvidenziato == 4">\r\n                                <img src="/ib/public/guestarea/assets/stepUltimoPieno.png"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-md-21 col-sm-21 col-xs-21">\r\n                            <div ng-show="ctrl.erroreConfirmPassword">\r\n                                <span class="errore">La password deve essere composta da almeno 8 caratteri tra lettere e numeri. Per favore, verifica e riprova.</span>\r\n                            </div>\r\n                            <div ng-show="ctrl.erroreConfirmPasswordVuota">\r\n                                <span class="errore">Campo obbligatorio: compila per proseguire </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-24 col-sm-24 col-xs-24">\r\n                        <div ng-show="ctrl.passwordMatch === false">\r\n                            <span class="errore">Le password inserite non coincidono. Per favore, verifica e riprova.</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-10 col-sm-8 col-xs-24">\r\n                    <p class="boxTextDx">Inserisci la tua vecchia password.</p><br>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-18 col-md-offset-3 col-sm-20 col-sm-offset-2 col-xs-8 col-xs-offset-8">\r\n                <div class="row text-center">\r\n                    <button class="col-md-4 col-sm-10 col-xs-24 customBtn greyButton" style="margin-right:10px;" type="button"\r\n                            ng-click="ctrl.bottoneAnnulla()" ng-disabled="ctrl.bottoneDisabilitatoStep1"> ANNULLA </button>\r\n                    <button class="col-md-4 col-sm-10 col-xs-24 customBtn greenBackground" style="float:right;" type="button"\r\n                            ng-class="{\'customBtnDisabled disabled\': ctrl.bottoneDisabilitatoStep1}" ng-click="ctrl.changePwd()"\r\n                            ng-disabled="ctrl.bottoneDisabilitatoStep1">\r\n                                CONFERMA </button>\r\n                </div>\r\n            </div>\r\n        </div> --><!-- pagina di esito --><div ng-if="ctrl.currentStep === 2 && ctrl.changePwdError === 0"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/ok.png"></div><div class="row text-center"><p class="titoloEsito">Password modificata</p></div><div class="row text-center"><button class="col-md-6 col-md-offset-9 col-sm-6 col-sm-offset-9 col-xs-12 col-xs-offset-6 text-center customBtn greyButton" ng-click="ctrl.bottoneTornaAllaGuestArea()">VAI ALL\'AREA GUEST</button></div><div style="margin-bottom:100px"></div></div><!-- pagina di esito negativo --><div ng-if="ctrl.currentStep === 2 && ctrl.changePwdError !== 0"><div class="row text-center" style="margin-top:50px"><img src="/ib/public/guestarea/assets/errore.png"></div><div class="row text-center"><p class="titoloEsito" ng-if="ctrl.changePwdError === 1">Si &egrave; verificato un problema.<br>La tua password non &egrave; stata cambiata.</p><p class="titoloEsito" ng-if="ctrl.changePwdError === 2">La vecchia password inserita non è valida. Per favore, verifica e riprova.</p></div><div class="row text-center"><button class="col-md-6 col-md-offset-9 col-sm-6 col-sm-offset-9 col-xs-12 col-xs-offset-6 text-center customBtn greyButton" ng-click="ctrl.bottoneTornaAllaGuestArea()">TORNA ALL\'AREA GUEST</button></div><div style="margin-bottom:100px"></div></div></div></div>'),
e.put("app/ricordamidi/ricordamidi-modal.html",'<div id="ricordamidiModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div ng-if="ricordamidiModalCtrl.firstStep"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">ELIMINA PROFILO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Sei sicuro di voler eliminare il tuo profilo nell\'area ospiti?</p><p>Eliminandolo perderai le simulazioni salvate, i tuoi mi piace e i tuoi appuntamenti in filiale.</p></div></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greyButton col-md-12 col-sm-12 col-xs-12" type="button" ng-click="$dismiss()" style="float:left">NO, ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greenBackground col-md-12 col-sm-12 col-xs-12" type="button" ng-click="ricordamidiModalCtrl.eliminaProfilo()" style="float:right">SI, CONFERMA</button></div></div></div><div ng-if="!ricordamidiModalCtrl.firstStep && !ricordamidiModalCtrl.resetProfileError"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">IL TUO PROFILO È STATO ELIMINATO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Il tuo profilo &egrave; stato eliminato con successo.</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="ricordamidiModalCtrl.logout()">TORNA ALLA HOME</button></div></div></div><div ng-if="!ricordamidiModalCtrl.firstStep && ricordamidiModalCtrl.resetProfileError"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">ERRORE NELL\'ELIMINAZIONE DEL PROFILO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Ci scusiamo ma, per un problema tecnico, l\'eliminazione del profilo non è andato a buon fine. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="$dismiss()">TORNA ALLA HOME</button></div></div></div></div>'),e.put("app/ricordamidi/ricordamidi.html",'<div id="ricordamidi"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="text-center titolo">Promemoria</label></div></div><guestarea-toolbar page="ricordamidi" badge-count="ricordamidiCtrl.badgeCount"></guestarea-toolbar><div class="container"><div class="row" style="padding-bottom: 15px"><div class="col-md-24 col-md-offset-0 col-sm-22 col-sm-offset-1 col-xs-22 col-xs-offset-1"><div class="content"><div class="row"><div class="col-md-6 col-sm-6 col-xs-24"><button class="appt_customBtn customBtn greyButton col-md-24 col-sm-24 col-xs-24" type="button" ng-click="nav.makeAppointment()">PRENDI APPUNTAMENTO</button></div><div class="col-md-6 col-sm-6 col-xs-24"><button ng-if="ricordamidiCtrl.enableCMB" class="appt_customBtn customBtn greyButton col-md-24 col-sm-24 col-xs-24" type="button" ng-click="ricordamidiCtrl.callmeback()">TI RICHIAMIAMO NOI</button></div><div class="col-md-6 col-sm-6 col-xs-6"><div class="row"><!-- <h1 class="text-center sottoTitolo">Prossimi appuntamenti</h1> --></div></div><div class="col-md-6 col-sm-6 col-xs-24"><button class="ricordami_customBtn customBtn greyButton col-xs-24" type="button" ng-click="ricordamidiCtrl.modifica = true" style="float:right" ng-if="!ricordamidiCtrl.modifica && ricordamidiCtrl.numAppuntamentiTotali > 0">ELIMINA</button> <button class="ricordami_customBtn customBtn greyButton col-xs-24" type="button" ng-click="ricordamidiCtrl.modifica = false" style="float:right" ng-if="ricordamidiCtrl.modifica && ricordamidiCtrl.numAppuntamentiTotali > 0">FINE</button></div></div><div class="loading" ng-show="!ricordamidiCtrl.ready"><img src="/ib/public/guestarea/assets/loading.gif"></div><div ng-show="ricordamidiCtrl.ready"><div class="col-md-24" ng-show="ricordamidiCtrl.numAppuntamentiTotali < 1"><div class="row"><h1 class="text-center">In questa pagina saranno presenti i tuoi promemoria e gli appuntamenti futuri fissati in filiale</h1></div></div><div class="col-md-24 col-sm-24 col-xs-24" ng-show="ricordamidiCtrl.numAppuntamentiTotali > 0" style="margin-top: -25px"><appuntamento ng-repeat="apt in ricordamidiCtrl.listaTotale" dettaglio="apt" modifica="ricordamidiCtrl.modifica"></appuntamento></div></div></div></div></div></div><!-- ci hanno ripensato... ricambieranno idea?\r\n    <div class="row">\r\n        <div class="jumbotronFooter footer col-md-24 col-sm-24 col-xs-24">\r\n            <div class="col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-14 col-xs-offset-5"> \r\n                <div class="row text-center">\r\n                    <div class="col-md-6 col-sm-6 col-xs-6">\r\n                        <button class="col-md-24 col-sm-24 col-xs-24 customBtn greyButton"  type="button" id="ga-elimina-profilo" \r\n                            ng-click="ricordamidiCtrl.open()">\r\n                            ELIMINA PROFILO\r\n                        </button>\r\n                    </div>\r\n                    <div class="col-md-6 col-sm-6 col-xs-6" style="float:right">\r\n                        <button class="col-md-24 col-sm-24 col-xs-24 customBtn greyButton"  type="button" id="ga-cambia-password" \r\n                            ng-click="nav.changePassword()">\r\n                            CAMBIA PASSWORD\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div> \r\n        </div>\r\n    </div> --></div>'),e.put("app/vorrei/vorrei-modal.html",'<div id="vorreiModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div ng-if="vorreiModalCtrl.firstStep"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">ELIMINA PROFILO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Sei sicuro di voler eliminare il tuo profilo nell\'area guest?</p><p>Eliminandolo perderai le simulazioni salvate, i tuoi mi piace e i tuoi appuntamenti in filiale.</p></div></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greyButton col-md-12 col-sm-12 col-xs-12" type="button" ng-click="$dismiss()" style="float:left">NO, ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greenBackground col-md-12 col-sm-12 col-xs-12" type="button" ng-click="vorreiModalCtrl.eliminaProfilo()" style="float:right">SI, CONFERMA</button></div></div></div><div ng-if="!vorreiModalCtrl.firstStep"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">IL TUO PROFILO È STATO ELIMINATO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>lorem ipsum</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="$dismiss()">TORNA ALLA HOME</button></div></div></div></div>'),e.put("app/vorrei/vorrei.html",'<div id="vorrei"><div ng-if="!vorreiCtrl.checkOts && !vorreiCtrl.sessionExpired"><!-- vorrei --><div ng-if="!vorreiCtrl.presaVisione"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="text-center titolo">Carrello</label></div></div><guestarea-toolbar page="vorrei" badge-count="vorreiCtrl.badgeCount"></guestarea-toolbar><div class="container"><div class="row"><div class="col-md-24 col-md-offset-0 col-sm-22 col-sm-offset-1 col-xs-22 col-xs-offset-1"><div class="content"><!-- carrello --><div class="carrello" ng-if="vorreiCtrl.numCarrello > 0 || vorreiCtrl.numDesideri > 0"><div class="row"><div class="col-md-offset-6 col-sm-offset-6 col-md-12 col-sm-12 col-xs-24"><h1 class="text-center sottoTitolo" style="margin-bottom: 16px">Acquisti in sospeso</h1></div><!--<div class="col-md-6 col-sm-6 col-xs-24">\r\n                                        <button class="vorrei_customBtn customBtn greyButton  col-xs-24" type="button"\r\n                                                ng-click="vorreiCtrl.isModificaCarrello = true" style="float:right" ng-if="!vorreiCtrl.isModificaCarrello && vorreiCtrl.ready && vorreiCtrl.numCarrello > 0">\r\n                                            MODIFICA\r\n                                        </button>\r\n                                        <button class="vorrei_customBtn customBtn greyButton  col-xs-24" type="button"\r\n                                                ng-click="vorreiCtrl.isModificaCarrello = false" style="float:right" ng-if="vorreiCtrl.isModificaCarrello && vorreiCtrl.ready && vorreiCtrl.numCarrello > 0" >\r\n                                            FINE\r\n                                        </button>\r\n                                    </div>--></div><div class="row"><div class="loading" ng-show="!vorreiCtrl.ready"><img src="/ib/public/guestarea/assets/loading.gif" style="margin-top: -16px"></div><div ng-show="vorreiCtrl.ready"><div ng-if="vorreiCtrl.numCarrello < 1"><h1 class="text-center" style="margin-top:20px">Non &egrave; presente nessun acquisto in sospeso</h1></div><div ng-if="vorreiCtrl.numCarrello > 0"><carrello ng-repeat="item in vorreiCtrl.listCarrello" dettaglio="item" modifica="vorreiCtrl.isModificaCarrello" on-pre-remove="vorreiCtrl.invalidate()" on-post-remove="vorreiCtrl.removeCarrello"></carrello></div></div></div></div><!-- fine carrello --><!-- lista desideri --><!--<div class="lista_desideri" ng-if="vorreiCtrl.numCarrello > 0 || vorreiCtrl.numDesideri > 0">\r\n                                <div class="row">\r\n                                    <div class="col-md-offset-6 col-sm-offset-6 col-md-12 col-sm-12 col-xs-24">\r\n                                        <h1 class="text-center sottoTitolo">Mi piace</h1>\r\n                                    </div>\r\n                                    <div class="col-md-6 col-sm-6 col-xs-24">\r\n                                        <button class="vorrei_customBtn greyButton col-xs-24" type="button"\r\n                                                ng-click="vorreiCtrl.isModificaMipiace = true" style="float:right"  ng-if="!vorreiCtrl.isModificaMipiace && vorreiCtrl.ready && vorreiCtrl.numDesideri > 0">\r\n                                            MODIFICA\r\n                                        </button>\r\n                                        <button class="vorrei_customBtn greyButton col-xs-24" type="button"\r\n                                                ng-click="vorreiCtrl.isModificaMipiace = false" style="float:right"  ng-if="vorreiCtrl.isModificaMipiace && vorreiCtrl.ready && vorreiCtrl.numDesideri > 0">\r\n                                            FINE\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="loading" ng-show="!vorreiCtrl.ready">\r\n                                        <img src="/ib/public/guestarea/assets/loading.gif">\r\n                                    </div>\r\n                                    <div ng-show="vorreiCtrl.ready">\r\n                                        <div ng-if="vorreiCtrl.numDesideri < 1">\r\n                                            <h1 class="text-center" style="margin-top:20px;">Non &egrave; presente niente nella lista dei desideri</h1>\r\n                                        </div>\r\n                                        <div ng-if="vorreiCtrl.numDesideri > 0">\r\n                                            <wish ng-repeat="wish in vorreiCtrl.wishList" dettaglio="wish" modifica="vorreiCtrl.isModificaMipiace" on-pre-remove="vorreiCtrl.invalidate()" on-post-remove="vorreiCtrl.removeWish"></wish>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>--><!-- fine lista desideri --><!-- nel caso sia tutto vuoto --><div ng-if="vorreiCtrl.numDesideri < 1 && vorreiCtrl.numCarrello < 1" class="row" style="padding-top:50px"><div ng-show="vorreiCtrl.ready" style="display: flex; flex-direction:column;  align-items: center"><img style="margin-bottom:30px" src="/ib/public/guestarea/assets/carrello.png" width="150" height="140"><h1 class="text-center" style="margin-top: 25px">Al momento il carrello è vuoto</h1></div><div class="loading" ng-show="!vorreiCtrl.ready"><img src="/ib/public/guestarea/assets/loading.gif"></div></div></div></div></div></div></div><!-- vorrei --><!-- CJConti presa visione--><div ng-if="vorreiCtrl.presaVisione"><div class="row text-center"><img class="faccina" ng-if="vorreiCtrl.presaVisioneOk" src="/ib/public/guestarea/assets/ok.png"> <img class="faccina" ng-if="!vorreiCtrl.presaVisioneOk" src="/ib/public/guestarea/assets/errore.png"></div><div class="row PresaVisioneRow text-center"><label class="PresaVisioneResult">{{vorreiCtrl.presaVisioneMsg}}</label></div><div class="row text-center PresaVisioneButtonRow"><button class="whiteBackgroundBtn col-md-8 col-md-offset-8 col-sm-8 col-sm-offset-8 col-xs-10 col-xs-offset-7" type="button" ng-click="vorreiCtrl.exitPresaVisione()">{{vorreiCtrl.exitBtn}}</button></div></div><!-- CJConti presa visione--></div></div><!-- ots --><div id="ots" ng-if="vorreiCtrl.checkOts && !vorreiCtrl.sessionExpired"><div class="container" ng-init="vorreiCtrl.resetOts()"><div class="row text-center"><p class="titolo">{{vorreiCtrl.nomeTizio}}, stai per proseguire con l\'acquisto del conto corrente.</p></div><div class="row text-center"><p class="sottotitolo">Per garantire la tua privacy ti chiediamo di inserire il codice di sicurezza che ti abbiamo inviato al numero di telefono che hai precedentemente indicato.</p></div><div class="row box"><div class="col-md-20 col-md-offset-2 col-sm-20 col-sm-offset-2 col-xs-23 col-xs-offset-1 text-xs-center"><div class="col-md-12 col-sm-12 col-xs-21"><div class="row" style="margin-top: 20px"><p class="boxTextTitle"><b>Il tuo numero di cellulare</b></p></div><div class="row"><p class="boxText">+39 *** ****{{vorreiCtrl.maskedCellulare}}</p></div></div><div class="col-md-10 col-sm-10 col-xs-24"><div class="row" style="margin-top: 20px"><p class="boxTextTitle"><b>Inserisci il codice ricevuto via SMS*</b>&nbsp; <span class="carrello_help icon ico-comuni-c-help-n" style="cursor:pointer" popover-class="OTS_popover" popover-append-to-body="true" popover-placement="top" popover-trigger="outsideClick" uib-popover="È il codice di sei cifre necessario per proseguire con l\'apertura del conto"></span></p></div><div class="row"><div class="col-md-23 col-sm-23 col-xs-24"><input maxlength="6" class="col-md-23 col-sm-23 col-xs-24 inputText" id="ots" name="ots" ng-focus="vorreiCtrl.resetOtsErrors()" ng-blur="vorreiCtrl.checkOtsFunction()" ng-class="{\'erroreEditText\': vorreiCtrl.erroreCodiceOts || vorreiCtrl.erroreCodiceOtsVuoto}" ng-model="vorreiCtrl.codiceOts" required></div></div><div class="row"><div class="col-md-21 col-sm-21 col-xs-21" style="margin-top:40px"><div ng-show="vorreiCtrl.erroreCodiceOts"><span class="errore">Il codice ots deve essere composta da almeno 6 numeri. Per favore, verifica e riprova.</span></div><div ng-show="vorreiCtrl.erroreCodiceOtsVuoto"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div><div ng-show="vorreiCtrl.erroreCodiceOtsNonValido"><span class="errore">Ci scusiamo ma, per un problema tecnico, la verifica del codice di sicurezza non è andata a buon fine. Per favore, riprova più tardi.<br>Per maggiori informazioni contattaci.</span></div></div></div><div class="row" style="margin-top: -20px"><p class="boxText" ng-if="vorreiCtrl.richiestaCodice == false">Non trovi il codice? <a class="link" ng-click="vorreiCtrl.resendCode()">INVIA DI NUOVO <span class="icon ico-login-freccia-dx" style="font-size: 10px"></span></a></p><p class="boxText" ng-if="vorreiCtrl.richiestaCodice == true">Stiamo inviando il codice di sicurezza via SMS sul tuo numero +39 *** ****{{vorreiCtrl.maskedCellulare}}<br>Attendi qualche istante...</p></div></div></div></div><div class="row" style="margin-top:-30px;margin-bottom: 20px"><p class="col-md-18 col-sm-18 col-xs-20 boxText text-left" style="padding-left:10px">* Campi obbligatori</p></div><div class="row text-center"><div class="col-md-20 col-md-offset-2 col-sm-22 col-sm-offset-1 col-xs-8 col-xs-offset-8"><button class="col-md-4 col-sm-10 col-xs-24 customBtn greyButton" style="margin-right:10px" type="button" ng-click="vorreiCtrl.bottoneAnnulla()" ng-disabled="vorreiCtrl.bottoneDisabilitato">ANNULLA</button> <button class="col-md-4 col-sm-10 col-xs-24 customBtn greenBackground" style="float:right" type="button" ng-class="{\'customBtnDisabled disabled\': vorreiCtrl.bottoneDisabilitato}" ng-click="vorreiCtrl.bottoneConferma()" ng-disabled="vorreiCtrl.bottoneDisabilitato">CONFERMA</button></div></div></div></div><div class="ErroreSessioneScaduta" ng-if="vorreiCtrl.sessionExpired"><div class="container col-12"><img style="margin-bottom:30px" src="/ib/public/guestarea/assets/icn-sessione_scaduta_green.svg"><p class="title">Sessione scaduta</p><p class="subtitle">La connessione si è interrotta per inattività.</p><p class="subtitle">Accedi di nuovo.</p></div><div class="button-container"><button class="customBtn greyButton" id="keepAliveLogin" ng-click="vorreiCtrl.vaiAPaginaAccesso()">ACCEDI ALL’AREA OSPITI</button></div></div><toast-message toast-name="\'carrelloToast\'" toast-msg-duration="10000"></toast-message>'),e.put("app/cms_components/homeLogin/homeLogin-modal.html",'<div id="pwdModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div ng-if="homeLoginModalCtrl.firstStep"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">RECUPERA PASSWORD</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Hai dimenticato la tua password?</p><p>Inserisci l’indirizzo email che hai inserito in fase di registrazione.</p></div></div></div><div class="row"><div class="col-md-offset-7 col-sm-offset-7 col-xs-offset-2 col-md-10 col-sm-10 col-xs-20"><input type="text" class="inputText" ng-blur="homeLoginModalCtrl.checkEmail()" ng-model="homeLoginModalCtrl.lostEmail" placeholder="Email" name="lostEmail" ng-class="{\'erroreEditText\': homeLoginModalCtrl.lostEmailWrong || homeLoginModalCtrl.lostEmailDifferent}" required></div></div><div class="row"><div class="col-md-offset-2 col-sm-offset-2 col-xs-offset-2 col-md-20 col-sm-20 col-xs-20"><div ng-show="homeLoginModalCtrl.lostEmailWrong"><span class="errore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div><div ng-show="homeLoginModalCtrl.lostEmailDifferent"><span class="errore">L\'indirizzo email inserito non &egrave; quello utilizzato per la registrazione. Per favore, verifica e riprova.</span></div></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greyButton col-md-9 col-md-offset-1" type="button" ng-class="{\'customBtnDisabled\': homeLoginModalCtrl.blocked}" ng-disabled="homeLoginModalCtrl.blocked" ng-click="$dismiss()">ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greenBackground col-md-9 col-md-offset-1" type="button" ng-click="homeLoginModalCtrl.resetPwd()" ng-class="{\'customBtnDisabled\': homeLoginModalCtrl.blocked}" ng-disabled="homeLoginModalCtrl.blocked">CONTINUA</button></div></div></div><div ng-if="!homeLoginModalCtrl.firstStep"><div ng-if="!homeLoginModalCtrl.resetPwdError"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">RECUPERA PASSWORD</label></div></div><div class="row"><div class="col-md-5 col-sm-5 col-xs-24"><img class="faccina" src="/ib/public/guestarea/assets/ok.png"></div><div class="scritte col-md-offset-1 col-sm-offset-1 col-xs-offset-0 col-md-18 col-sm-18 col-xs-24"><p>Controlla la tua casella di posta elettronica: ti abbiamo inviato una email con un link per recuperare la tua password.</p></div></div><div class="row"><button class="customBtn greenBackground text-center" type="button" ng-click="$dismiss()" style="padding: 2px 25px 0">CHIUDI</button></div></div><div ng-if="homeLoginModalCtrl.resetPwdError"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">RECUPERA PASSWORD</label></div></div><div class="row"><div class="col-md-5 col-sm-5 col-xs-24"><img class="faccina" src="/ib/public/guestarea/assets/errore.png"></div><div class="scritte col-md-offset-1 col-sm-offset-1 col-xs-offset-0 col-md-18 col-sm-18 col-xs-24"><p>Ci scusiamo ma, per un problema tecnico, non è possibile recuperare la password. Per favore, riprova più tardi. Per maggiori informazioni contattaci al 800.303.303.</p></div></div><div class="row"><button class="customBtn greenBackground text-center" type="button" ng-click="$dismiss()" style="padding: 2px 25px 0">CHIUDI</button></div></div></div></div>'),e.put("app/cms_components/homeLogin/homeLogin.html",'<div id="homelogin"><div class="col-md-24 col-sm-24 col-xs-24" ng-if="!homeLoginCtrl.isLogged || (homeLoginCtrl.isLogged && homeLoginCtrl.isFromDem)"><!-- versione desktop --><div class="row hidden-sm hidden-xs" autocomplete="off"><div class="col-md-10 div-input"><input type="text" class="inputText" ng-model="homeLoginCtrl.email" placeholder="E-mail" autocomplete="off" ng-class="{\'erroreEditText\': homeLoginCtrl.emailWrong || homeLoginCtrl.emailEmpty}" required><div ng-show="homeLoginCtrl.emailWrong"><span class="errore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div><div ng-show="homeLoginCtrl.emailEmpty"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div><div class="col-md-10 div-input"><input type="password" class="inputText" maxlength="35" ng-model="homeLoginCtrl.password" autocomplete="new-password" ng-class="{\'erroreEditText\': homeLoginCtrl.pwdWrong || homeLoginCtrl.pwdEmpty}" placeholder="Password" required><div ng-show="homeLoginCtrl.pwdWrong"><span class="errore">La password deve essere composta da almeno 8 caratteri tra lettere e numeri. Per favore, verifica e riprova.</span></div><div ng-show="homeLoginCtrl.pwdEmpty"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div><div class="col-md-4 div-button"><button class="loginBtn" ng-click="homeLoginCtrl.entra()" type="submit" ng-class="{\'customBtnDisabled disabled\': homeLoginCtrl.blocked}" ng-disabled="homeLoginCtrl.blocked">ENTRA</button></div><div style="margin-top:5px"><div class="row mb-25p"><div class="col-md-24 text-right mw-750p"><div class="row"><a class="link" ng-click="homeLoginCtrl.open()">Recupera Password</a> <input type="checkbox" id="rememberMe2"><label for="rememberMe2" class="link">Mantieni L\'accesso</label></div></div></div><div class="col-md-24"><a class="link text-uppercase mr-15p" ng-click="homeLoginCtrl.goToRegistrazione()" ng-keypress="homeLoginCtrl.goToRegistrazione($event)">Registrati</a></div></div><!-- casistica con errori--><div ng-show="homeLoginCtrl.loginError"><div class="col-md-16" style="margin-right: -2px"><div ng-switch on="homeLoginCtrl.codeError"><div ng-switch-when="LOGIN_ERROR"><span class="errore">L\'email e la password inserite non combaciano. Per favore, verifica e riprova.</span></div><div ng-switch-when="NO_LONGER_A_PROSPECT"><span class="errore">Risulta che sei gi&agrave; nostro cliente. Accedi alla tua Banca Online.</span></div><div ng-switch-when="PWD_EXPIRED"><span class="errore" ng-init="homeLoginCtrl.goToExpiredPwd()">La tua password &grave; scaduta</span></div><div ng-switch-when="BECAME_IB_CLIENT"><span class="errore">{{homeLoginCtrl.msgBecameIBClient}}</span></div><div ng-switch-default><span class="errore">Ci scusiamo ma, per un problema tecnico, il login non è andato a buon fine. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</span></div></div></div></div></div><!-- versione tablet e mobile --><div class="row visible-sm visible-xs mt-15p"><div class="col-sm-23 col-xs-23 form-group"><input type="text" class="inputText" ng-model="homeLoginCtrl.email" placeholder="E-mail" autocomplete="off" ng-class="{\'erroreEditText\': homeLoginCtrl.emailWrong || homeLoginCtrl.emailEmpty}" required><div class="row visible-sm visible-xs" style="margin-left: 5px"><div ng-show="homeLoginCtrl.emailWrong"><span class="errore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div><div ng-show="homeLoginCtrl.emailEmpty"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div></div></div><div class="col-sm-23 col-xs-23 form-group"><input type="password" class="inputText" maxlength="35" ng-model="homeLoginCtrl.password" autocomplete="new-password" ng-class="{\'erroreEditText\': homeLoginCtrl.pwdWrong || homeLoginCtrl.pwdEmpty}" placeholder="Password" required><div class="row" style="margin-left: 5px"><div ng-show="homeLoginCtrl.pwdWrong"><span class="errore">La password deve essere composta da almeno 8 caratteri tra lettere e numeri. Per favore, verifica e riprova.</span></div><div ng-show="homeLoginCtrl.pwdEmpty"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div><div class="row"><div class="col-sm-24 col-xs-24"><div ng-show="homeLoginCtrl.loginError"><div ng-switch on="homeLoginCtrl.codeError"><div ng-switch-when="LOGIN_ERROR"><span class="errore">L\'email e la password inserite non combaciano. Per favore, verifica e riprova.</span></div><div ng-switch-when="NO_LONGER_A_PROSPECT"><span class="errore">Risulta che sei gi&agrave; nostro cliente. Accedi alla tua Banca Online.</span></div><div ng-switch-when="PWD_EXPIRED"><span class="errore" ng-init="homeLoginCtrl.goToExpiredPwd()">La tua password &grave; scaduta</span></div><div ng-switch-when="BECAME_IB_CLIENT"><span class="errore">{{homeLoginCtrl.msgBecameIBClient}}</span></div><div ng-switch-default><span class="errore">Ci scusiamo ma, per un problema tecnico, il login non è andato a buon fine. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</span></div></div></div></div></div></div></div><div class="col-sm-12 col-xs-12 center-block float-none"><button class="customBtn greenBackground col-sm-24 col-xs-24" ng-click="homeLoginCtrl.entra()" type="submit" style="height: 40px; margin-top: 0px;border-radius: 1px;font-size:14px" ng-class="{\'customBtnDisabled disabled\': homeLoginCtrl.blocked}" ng-disabled="homeLoginCtrl.blocked">ENTRA</button></div><div class="row"><div class="col-sm-24 col-xs-24 text-center mb-40p mt-15p"><a class="link" ng-click="homeLoginCtrl.open()">Recupera password</a></div><div class="col-sm-24 col-xs-24 mb-25p"><span class="middle-lined">Non sei ancora cliente?</span></div><div class="col-sm-12 col-xs-12 center-block float-none"><button class="customBtn greenBackground col-sm-24 col-xs-24 mb-25p" ng-click="homeLoginCtrl.goToRegistrazione()" type="submit" style="height: 40px; margin-top: 0px;border-radius: 1px;font-size:14px" ng-class="{\'customBtnDisabled disabled\': homeLoginCtrl.blocked}" ng-disabled="homeLoginCtrl.blocked">REGISTRATI</button></div></div></div></div><!-- loggato --><div class="boxLogged" ng-if="homeLoginCtrl.isLogged && !homeLoginCtrl.isFromDem"><div class="row hidden-sm hidden-xs" autocomplete="off"><div class="row"><div class="col-md-24"><p>Stai navigando come</p><label class="nomeUtente">{{::homeLoginCtrl.nome}}</label><button class="customBtn greenBackground pull-right" ng-click="homeLoginCtrl.entra()" type="submit" style="height: 40px; margin-top: 0px;border-radius: 5px; padding: 0 10px" ng-class="{\'customBtnDisabled disabled\': homeLoginCtrl.blocked}" ng-disabled="homeLoginCtrl.blocked">AREA OSPITI</button></div></div><div class="row"><div class="col-md-24"><a ng-click="homeLoginCtrl.esci()">Non sei {{::homeLoginCtrl.nome}}? Esci</a> <img style="margin-top:-2px;margin-left:1px" src="/ib/public/guestarea/assets/freccia_dx.png"></div></div></div><div class="row visible-sm visible-xs"><div class="row"><div class="col-xs-24 col-sm-24"><p>Stai navigando come</p><label class="nomeUtente">{{::homeLoginCtrl.nome}}</label><button class="customBtn greenBackground pull-right" ng-click="homeLoginCtrl.entra()" type="submit" style="height: 40px; margin-top: 0px;border-radius: 5px; padding: 0 10px" ng-class="{\'customBtnDisabled disabled\': homeLoginCtrl.blocked}" ng-disabled="homeLoginCtrl.blocked">AREA OSPITI</button></div></div><div class="row"><div class="col-xs-24 col-sm-24"><a ng-click="homeLoginCtrl.esci()">Non sei {{::homeLoginCtrl.nome}}? Esci</a> <img style="margin-top:-2px;margin-left:1px" src="/ib/public/guestarea/assets/freccia_dx.png"></div></div></div></div></div>'),e.put("app/cms_components/cjConti/cjConti.html",'<div id="cjContiModal"><!--title--><div class="row"><label class="text-center cjContiTitle">COMPLETA L\'ULTIMO PASSAGGIO PER OTTENERE IL TUO CONTO!</label></div><!--description--><div class="row cjContiRow"><div><p class="text-center cjContiDescr">Hai ricevuto la documentazione contrattuale via mail.</p></div></div><!--subtitle--><div class="row cjContiRow"><div><label class="text-center cjContiSubT">Cliccando su "Conferma e Concludi" dichiaro di aver ricevuto il contratto del CONTO appena firmato</label></div></div><!--arrow--><div class="row"><span class="ico-comuni-freccia-accordion-apri cjContiArrow"></span></div><div class="row cjContiButtonRow"><button class="customBtn greenBackground col-md-8 col-md-offset-8 col-sm-8 col-sm-offset-8 col-xs-10 col-xs-offset-7" type="button" ng-click="cjContiCtrl.confirm()" ng-class="{\'customBtnDisabled\': cjContiCtrl.blocked}" ng-disabled="cjContiCtrl.blocked">CONFERMA E CONCLUDI</button></div></div>'),e.put("app/cms_components/menuGuest/menuGuest-button.html",'<div id="menuguest" ng-if="ctrl.nomeTizio"><!-- galleggiante sulla barra nera --><div class="container hidden-xs"><div class="row galleggianteNero"><div class="col-md-24 col-sm-24 col-xs-24"><button class="bottoniTendinaNero" ng-click="ctrl.toggle()"><p>CIAO<b class="testoNomeTizio"> {{ ctrl.nomeTizio }}</b></p><img ng-show="!ctrl.opened" src="/ib/public/guestarea/assets/freccinaBiancaGiu.png"> <img ng-show="ctrl.opened" src="/ib/public/guestarea/assets/freccinaBianca.png"><br></button></div></div></div><!-- galleggiante solo per versione mobile --><div class="container visible-xs"><div class="row galleggianteMobile"><div class="col-xs-24"><span uib-dropdown class="dropdownMobile"><a uib-dropdown-toggle ng-click="ctrl.toggle()"><button class="bottoniTendinaMobile dropdownMobile" ng-style="{\'height\' : ctrl.opened? \'70px\' : \'\'}"><img ng-show="!ctrl.opened" src="/ib/public/guestarea/assets/navbar-gestore.png"> <img ng-show="ctrl.opened" src="/ib/public/guestarea/assets/menusu.png"></button></a><ul class="dropdown-menuMobile" uib-dropdown-menu role="button"><li role="menuitem"><a ng-click="ctrl.areaOspiti()"><p>Area ospiti</p></a></li><li class="divider"></li><li ng-show="ctrl.isLoggedViaFB == false" role="menuitem"><a ng-click="ctrl.modifica()"><p>Modifica password</p></a></li><li ng-show="ctrl.isLoggedViaFB == false" class="divider"></li><li role="menuitem"><a ng-click="ctrl.open()"><p>Elimina profilo</p></a></li><li class="divider"></li><li role="menuitem"><a ng-click="ctrl.logout()"><span class="icona icon ico-menu-esci"></span>&nbsp;&nbsp;<p style="display:inline">Esci</p></a></li></ul></span></div></div></div></div>'),
e.put("app/cms_components/menuGuest/menuGuest-collapse.html",'<div id="menuguest"><div class="jumbotron hidden-xs" ng-show="menuGuestCtrl.openDropdown"><div class="container"><button class="customBtn blackButton col-md-6 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-12" type="button" ng-click="menuGuestCtrl.areaOspiti()" style="float:left">Area ospiti</button> <button class="customBtn blackButton col-md-6 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-12" type="button" ng-show="menuGuestCtrl.isLoggedViaFB == false" ng-click="menuGuestCtrl.modifica()" style="float:left">Modifica password</button> <button class="customBtn blackButton col-md-6 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-12" type="button" ng-click="menuGuestCtrl.open()" style="float:left">Elimina profilo</button><div class="imgEsci col-md-2 col-md-offset-1 col-sm-3 col-sm-offset-1 col-xs-12" type="button" ng-click="menuGuestCtrl.logout()"><span class="icona icon ico-menu-esci" style="font-size: 25px;color: #fc9700"></span>&nbsp;&nbsp;<p>Esci</p></div></div></div></div>'),e.put("app/cms_components/menuGuest/menuGuest-modal.html",'<div id="menuGuestModal"><div ng-if="menuGuestModalCtrl.firstStep"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">ELIMINA PROFILO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Sei sicuro di voler eliminare il tuo profilo nell\'area ospiti?</p><p>Eliminandolo perderai le simulazioni salvate, i tuoi mi piace e i tuoi appuntamenti in filiale.</p></div></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greyButton col-md-12 col-sm-12 col-xs-24" type="button" ng-click="$dismiss()" style="float:left">NO, ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greenBackground col-md-12 col-sm-12 col-xs-24" type="button" ng-click="menuGuestModalCtrl.eliminaProfilo()" style="float:right" ng-class="{\'customBtnDisabled\': menuGuestModalCtrl.buttonDisabled}" ng-disabled="menuGuestModalCtrl.buttonDisabled">SI, CONFERMA</button></div></div></div><div ng-if="!menuGuestModalCtrl.firstStep && !menuGuestModalCtrl.resetProfileError" ui-outer-click="menuGuestModalCtrl.logout()"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="menuGuestModalCtrl.logout()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">IL TUO PROFILO È STATO ELIMINATO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Il tuo profilo &egrave; stato eliminato con successo.</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="menuGuestModalCtrl.logout()">TORNA ALLA HOME</button></div></div></div><div ng-if="!menuGuestModalCtrl.firstStep && menuGuestModalCtrl.resetProfileError"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">ERRORE NELL\'ELIMINAZIONE DEL PROFILO</label></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row scritte"><p>Ci scusiamo ma, per un problema tecnico, l\'eliminazione del profilo non è andato a buon fine. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="$dismiss()">TORNA ALLA HOME</button></div></div></div></div>'),e.put("app/cms_components/miPiace/miPiace.html",'<div id="miPiaceComponent" ng-if="isVisible"><div ng-if="hLayout" class="mipiace hLayout" ng-click="isEnabled() && toggleSelected()" popover-class="mipiace_popover_hLayout" uib-popover-template="htmlPopover" popover-append-to-body="true" popover-placement="{{position}}" popover-trigger="outsideClick" popover-is-open="isToOpen"><div class="mipiace_ico"><div class="mipiace_sx_div"><a ng-class="{\'mipiace_text enabled_black\': isEnabled(), \'mipiace_text disabled\': !isEnabled()}">Mi Piace</a></div><div class="mipiace_dx_div"><span ng-if="!isSelected()" class="mipiace_icon_hLayout icon ico-vorrei-c-cuore-n" ng-class="{\'enabled\': isEnabled(), \'disabled\': !isEnabled()}"></span> <span ng-if="isSelected()" class="mipiace_icon_hLayout icon cmb-ico-mipiace-cuore-pieno" ng-class="{\'enabled\': isEnabled(), \'disabled\': !isEnabled()}"></span></div></div></div><div ng-if="!hLayout" class="mipiace vLayout" ng-click="isEnabled() && toggleSelected()" popover-class="mipiace_popover_vLayout" uib-popover-template="htmlPopover" popover-append-to-body="true" popover-placement="{{position}}" popover-trigger="outsideClick" popover-is-open="isToOpen"><div class="mipiace_ico"><span ng-if="!isSelected()" class="mipiace_icon_vLayout icon ico-vorrei-c-cuore-n" ng-class="{\'enabled\': isEnabled(), \'disabled\': !isEnabled()}"></span> <span ng-if="isSelected()" class="mipiace_icon_vLayout icon cmb-ico-mipiace-cuore-pieno" ng-class="{\'enabled\': isEnabled(), \'disabled\': !isEnabled()}"></span></div><span ng-class="{\'mipiace_text enabled\': isEnabled(), \'mipiace_text disabled\': !isEnabled()}">MI PIACE</span></div></div>'),e.put("app/cms_components/miPiace/miPiacePopover.html",'<div class="mipiace_popover"><span ng-if="!isLogged()">Per aggiungere <span ng-bind-html="getDescription()"></span> ai mi piace nella sezione Vorrei, registrati all\'area ospiti </span><span ng-if="isLogged()">Troverai <span ng-bind-html="getDescription()"></span> nella sezione Vorrei dell\'area ospiti</span><div class="mipiace_accedi"><a ng-click="accedi()">Accedi Subito</a></div></div>'),e.put("app/cms_components/miPiace/miPiacePopoverError.html",'<div class="mipiace_popover_error"><span>Si è verificato un errore! Riprova più tardi.</span></div>'),e.put("app/cms_components/toolbar/toolbar.html",'<div id="toolbar"><div class="jumbotron"><div class="container"><div class="row"><div class="col-md-24 col-md-offset-0 col-sm-22 col-sm-offset-1 col-xs-22 col-xs-offset-1"><div class="col-md-4 col-md-offset-1 col-sm-5 col-sm-offset-1 col-xs-9 col-xs-offset-1"><button class="customToolbarBtn col-md-24 col-sm-24 col-xs-24" type="button" ng-mouseover="ctrl.manageMouseHover(0)" ng-mouseleave="ctrl.manageMouseLeave(0)" ng-click="ctrl.ricordamidi()" ng-class="{\'toolBarButton\' : ctrl.buttonSelected != \'ricordamidi\',\'toolBarButtonAttivo\' : ctrl.buttonSelected == \'ricordamidi\'}"><div class="text-center col-md-24 col-sm-24 col-xs-24"><span id="ga_ricordami_icon" class="icon ico-servizio-ricordamidi" ng-class="{\'icona\' : ctrl.buttonSelected != \'ricordamidi\',\'icona-attiva\' : ctrl.buttonSelected == \'ricordamidi\'}"></span></div><div class="text-center col-md-24 col-sm-24 col-xs-24">PROMEMORIA</div></button></div><div class="col-md-4 col-sm-5 col-xs-9"><button class="customToolbarBtn aggiustamentoSpazi col-md-24 col-sm-24 col-xs-24" type="button" ng-mouseover="ctrl.manageMouseHover(1)" ng-mouseleave="ctrl.manageMouseLeave(1)" ng-click="ctrl.vorrei()" ng-class="{\'toolBarButton\' : ctrl.buttonSelected != \'vorrei\',\'toolBarButtonAttivo\' : ctrl.buttonSelected == \'vorrei\'}"><div class="text-center col-md-24 col-sm-24 col-xs-24"><span id="ga_vorrei_icon" class="icon ico-servizio-vorrei" ng-class="{\'icona\' : ctrl.buttonSelected != \'vorrei\',\'icona-attiva\' : ctrl.buttonSelected == \'vorrei\'}"></span> <span class="badge vorreiBadgeAttivo" ng-show="ctrl.badgeCount > 0">{{ctrl.badgeCount}}</span><!-- ng-class="{\'badge vorreiBadge\': ctrl.buttonSelected != \'vorrei\', \'badge vorreiBadgeAttivo\': ctrl.buttonSelected == \'vorrei\'}" --></div><div class="text-center col-md-24 col-sm-24 col-xs-24">CARRELLO</div></button></div></div></div></div></div></div>'),e.put("app/cms_components/ripresaDeeplink/ripresaDeeplink.html",'<div id="ripresaDeeplink"><div ng-if="!ctrl.erroreGenerico && !ctrl.errore5 && !ctrl.errore6 && ctrl.pageLoaded"><div class="col-sm-17 center-block text-center"><img src="/ib/public/guestarea/assets/deeplink-forward.svg" alt="" height="110" class="center-block mb-20p"><h1 class="mb-20p">Stai riprendendo il processo di apertura del XME Conto</h1><p class="mb-20p">Per garantire la tua privacy ti chiediamo di inserire il codice di sicurezza che ti abbiamo inviato al numero di telefono che hai indicato in fase di registrazione</p></div><div class="ots-container text-center"><span role="text" aria-label="I campi contrassegnati con l’asterisco sono obbligatori"></span><p class="mb-20p">Abbiamo inviato il codice di sicurezza al numero <b>{{ctrl.prefisso}} {{ctrl.maskedCell}}</b></p><div class="col-sm-8 col-xs-24 center-block"><p class="boxTextTitleDeeplink text-left"><b>Codice SMS*</b></p><div class="flex-center"><input maxlength="6" class="inputBox" id="ots" name="ots" ng-focus="ctrl.resetOtsErrors()" ng-blur="ctrl.checkOtsFunction()" ng-change="ctrl.checkOtsFunctionChange()" ng-class="{\'erroreEditText\': ctrl.erroreCodiceOts || ctrl.erroreCodiceOtsNonValido}" ng-model="ctrl.codiceOts" required=""> <span role="button" class="carrello_help icon ico-comuni-c-help-n" popover-class="DEM_popover" popover-append-to-body="true" popover-placement="auto right" popover-trigger="outsideClick" aria-label="Apri suggerimento È il codice di sei cifre che abbiamo inviato al tuo numero di cellulare" uib-popover="È il codice di sei cifre che abbiamo inviato al tuo numero di cellulare"></span></div><div class="row"><div class="col-md-20 col-sm-20 col-xs-21 errorMessage text-left"><div ng-if="ctrl.erroreCodiceOts"><span class="erroreDeeplink" aria-label="Il codice ots deve essere composto da almeno 6 numeri. Per favore, verifica e riprova.">Il codice ots deve essere composto da almeno 6 numeri. Per favore, verifica e riprova.</span></div><div ng-if="ctrl.erroreCodiceOtsNonValido"><span class="erroreDeeplink" aria-label="Il codice inserito non è corretto. Prova a reinserire il codice che hai ricevuto via SMS. Per favore, verifica e riprova.">Il codice inserito non è corretto. Prova a reinserire il codice che hai ricevuto via SMS. Per favore, verifica e riprova.</span></div></div></div><p class="boxTextTitleDeeplink text-left"><b>Non l\'hai ricevuto? <a ng-click="ctrl.inviaOts()">INVIA DI NUOVO</a></b></p></div></div><p class="info mb-20p" aria-hidden="true">*Campo obbligatorio</p><button class="center-block greenBackground btnContinua" ng-class="{\'disabled\': ctrl.disabledButton}" ng-disabled="ctrl.disabledButton" ng-click="ctrl.bottoneConferma()">Continua</button> <span ng-if="ctrl.erroreCodiceOtsNonValido"><span role="text" aria-label="Il codice inserito non è corretto. Prova a reinserire il codice che hai ricevuto via SMS. Per favore, verifica e riprova."></span></span></div><div ng-if="ctrl.erroreGenerico || ctrl.errore5 || ctrl.errore6"><div ng-if="ctrl.erroreGenerico"><div class="col-sm-17 center-block text-center"><img src="/ib/public/guestarea/assets/deeplink-expired.svg" alt="" height="110" class="center-block mb-20p"><h1 class="mb-20p">Ci scusiamo, a causa di un problema tecnico la tua richiesta non è andata a buon fine.</h1><p class="mb-20p">Se hai ancora una pratica valida puoi riprenderla seguendo queste istruzioni:</p></div><div class="ots-container"><div class="col-sm-22 col-xs-21 center-block"><ul><li type="disc">Clicca su <b>ACCESSO CLIENTI > ENTRA COME OSPITE</b></li><li type="disc">Accedi <b>nell\'Area Ospiti</b> con la tua email e la password che ti abbiamo inviato tramite email</li><li type="disc">Entra nella <b>sezione CARRELLO e riprendi la pratica salvata</b></li></ul></div></div></div><div ng-if="ctrl.errore5"><div class="col-sm-17 center-block text-center"><img src="/ib/public/guestarea/assets/deeplink-expired.svg" alt="" height="110" class="center-block mb-20p"><h1 class="mb-20p">Sessione scaduta</h1></div></div><div ng-if="ctrl.errore6"><div class="col-sm-17 center-block text-center"><img src="/ib/public/guestarea/assets/deeplink-forward.svg" alt="" height="110" class="center-block mb-20p"><h1 class="mb-20p">Hai già una richiesta di apertura XME Conto<br>che risulta in carico alla banca per le verifiche.</h1><h1 class="mb-20p">A breve riceverai via mail le informazioni necessarie<br>per concludere l\'apertura del conto.</h1></div></div></div></div>'),e.put("app/cms_components/xmeGaRegistrazione/xmeGaRegistrazione-modal.html",'<div id="modale"><div class="row"><div class="testoInfo text-center"><p ng-bind-html="ctrl.info.title"></p></div><button class="x-close" ng-click="$dismiss()"><span class="eliminaModale icon ico-azioni-elimina"></span></button></div><div class="row"><div class="infoModale text-center icon ico-comuni-c-alert-n"></div><div class="info"><p ng-bind-html="ctrl.info.message"></p></div></div><div class="row"><div class="text-center" style="margin-top: 2%"><button type="button" class="buttonPadding customBtn greenBackground fixAllineamento" ng-click="$dismiss()">CHIUDI</button></div></div></div>'),e.put("app/cms_components/xmeGaRegistrazione/xmeGaRegistrazione.html",'<div id="xmeGaRegistrazione"><div class="white-bg row"><div class="text-center row"><div ng-if="ctrl.currentStep === 0 && !ctrl.checkOts && !ctrl.isFromCarrello"><div class="header col-md-24 col-sm-24 col-xs-24"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row row-margin-bottom"><div class="col-md-24 col-sm-24 col-xs-24"><div class="dividing-line"><div class="isp-dividing-line isp-default"><div class="dividing-line-container"><div class="dividing-line-left col-md-9 col-sm-9 col-xs-4"><hr class="hrStyle"></div><div class="dividing-line-center col-md-6 col-sm-6 col-xs-16"><span class="dividing-line-title text-center">Inserisci le tue informazioni</span></div><div class="dividing-line-right col-md-9 col-sm-9 col-xs-4"><hr class="hrStyle"></div></div></div></div></div></div><div class="isp-alertbox" style="margin-bottom:30px"><div class="nbpAlertContainer2"><div class="nbpAlertIconContainer2"><span class="icon ico-comuni-c-alert-n"></span></div><div class="nbpAlertMessageContainer"><div><p style="font-size: 16px">Ricorda di inserire i <b>dati anagrafici</b> cos&igrave; <b>come riportati nel documento di identit&agrave;</b>. Fai attenzione a nomi e cognomi composti, secondi nomi e ad utilizzare correttamente lettere accentate e/o apostrofi.</p></div></div></div></div><div class="row"><div class="col-md-8 col-sm-8 col-xs-24 input-box"><div class="text-left" ng-if="!ctrl.disableUserField"><p class="text-left textOverInput alignNome"><b>Nome *</b></p><input type="text" class="inputTextRegistrazione" id="nome" name="nome" required ng-blur="ctrl.checkNome()" style="text-transform: capitalize" ng-change="ctrl.disableContinua()" ng-class="{\'erroreEditText\': ctrl.erroreNome || ctrl.erroreNomeVuoto}" ng-model="ctrl.nome" aria-selected="{{ctrl.erroreNome || ctrl.erroreNomeVuoto}}"></div><div class="text-left" ng-if="ctrl.disableUserField"><p class="text-left alignNome" style="text-transform: capitalize"><b>Nome</b></p><span class="no-modify-input alignNome" style="text-transform: capitalize">{{ctrl.nome}}</span></div><div ng-if="ctrl.erroreNome === true" class="error-label-align"><span class="erroreInputGuest alignNome" style="display: inline-flex" aria-selected="true">Il campo prevede solo caratteri alfabetici, inclusi caratteri accentati e apostrofi. Non sono ammessi numeri e caratteri speciali. Verifica e riprova.</span></div><div ng-if="ctrl.erroreNomeVuoto === true" class="error-label-align"><span class="erroreInputGuest alignNome" style="display: inline-flex" aria-selected="true">Campo obbligatorio: compila per proseguire</span></div></div><div class="col-md-8 col-sm-8 col-xs-24 input-box"><div class="text-center" ng-if="!ctrl.disableUserField"><p class="text-left textOverInput alignCognome"><b>Cognome *</b></p><input type="text" class="inputTextRegistrazione" id="cognome" name="cognome" required ng-blur="ctrl.checkCognome()" style="text-transform: capitalize" ng-change="ctrl.disableContinua()" ng-disabled="ctrl.onlyActivation" ng-class="{\'erroreEditText\': ctrl.erroreCognome || ctrl.erroreCognomeVuoto}" ng-model="ctrl.cognome" aria-selected="{{ctrl.erroreCognome || ctrl.erroreCognomeVuoto}}"></div><div class="text-left" ng-if="ctrl.disableUserField"><p class="text-left alignCognome"><b>Cognome</b></p><span class="no-modify-input alignCognome" style="text-transform: capitalize">{{ctrl.cognome}}</span></div><div ng-if="ctrl.erroreCognome === true" class="error-label-align"><span class="erroreInputGuest alignErroriCognome" style="display: inline-flex">Il campo prevede solo caratteri alfabetici, inclusi caratteri accentati e apostrofi. Non sono ammessi numeri e caratteri speciali. Verifica e riprova.</span></div><div ng-if="ctrl.erroreCognomeVuoto === true" class="error-label-align"><span class="erroreInputGuest alignErroriCognome" style="display: inline-flex">Campo obbligatorio: compila per proseguire</span></div></div><div class="col-md-8 col-sm-8 col-xs-24 input-box" style="float: right"><div class="text-left cf-input-box" ng-if="!ctrl.disableUserField"><p class="text-left textOverInput"><b>Codice Fiscale *</b></p><input type="text" class="inputTextRegistrazione" id="codiceFiscale" name="codiceFiscale" required ng-blur="ctrl.checkCodiceFiscale()" style="text-transform: uppercase" ng-change="ctrl.disableContinua()" ng-class="{\'erroreEditText\': ctrl.erroreCodiceFiscaleVuoto || ctrl.erroreCodiceFiscale || ctrl.erroreCodiceFiscaleLunghezza|| ctrl.errorCFWrong || ctrl.erroreCodiceFiscaleMinore}" ng-model="ctrl.codiceFiscale" aria-selected="{{ctrl.erroreCodiceFiscaleVuoto || ctrl.erroreCodiceFiscaleMinore ||\r\n                                               ctrl.erroreCodiceFiscale || ctrl.erroreCodiceFiscaleLunghezza || ctrl.errorCFWrong}}"></div><div class="text-left" ng-if="ctrl.disableUserField"><p class="text-left alignCf"><b>Codice Fiscale</b></p><span class="no-modify-input alignCf">{{ctrl.codiceFiscale}}</span></div><div ng-if="ctrl.erroreCodiceFiscaleVuoto === true" class="error-label-align"><span class="erroreInputGuest alignCf" style="display: inline-flex">Campo obbligatorio: compila per proseguire</span></div><div ng-if="ctrl.erroreCodiceFiscaleMinore === true" class="error-label-align"><span class="erroreInputGuest alignCf" style="display: inline-flex">Il codice fiscale inserito è di un minorenne.</span></div><div ng-if="ctrl.erroreCodiceFiscale === true" class="error-label-align"><span class="erroreInputGuest alignCf" style="display: inline-flex">Il codice fiscale inserito potrebbe essere errato.<br>Per favore, verifica e riprova.</span></div><div ng-if="ctrl.erroreCodiceFiscaleLunghezza === true" class="error-label-align"><span class="erroreInputGuest alignCf" style="display: inline-flex">Il Codice fiscale deve essere composto da 16 caratteri alfanumerici. Per favore, verifica e riprova.</span></div><div ng-if="ctrl.errorCFWrong === true" class="error-label-align"><span class="erroreInputGuest alignCf" style="display: inline-flex">Codice fiscale e dati anagrafici non congruenti.</span></div></div></div><div class="row margin-row-email"><div class="col-md-8 col-sm-8 col-xs-24 input-box"><div class="text-left" ng-if="!ctrl.disableEmailField"><p class="text-left textOverInput alignEmail"><b>Email *</b></p><input type="text" class="inputTextRegistrazione" id="email" name="email" ng-blur="ctrl.checkEmail()" ng-change="ctrl.checkCampoVuotoEmail() || ctrl.disableContinua()" ng-class="{\'erroreEditText\': ctrl.erroreEmail || ctrl.erroreEmailVuota}" ng-model="ctrl.email" required aria-selected="{{ctrl.erroreEmail || ctrl.erroreEmailVuota}}"></div><div class="text-left" ng-if="ctrl.disableEmailField"><p class="text-left alignEmail"><b>Email</b></p><span class="no-modify-input">{{ctrl.email}}</span></div><div ng-if="ctrl.erroreEmail" class="error-label-align ng-scope"><span class="erroreInputGuest alignEmail" style="display: inline-flex">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div><div ng-if="ctrl.erroreEmailVuota" class="error-label-align ng-scope"><span class="erroreInputGuest alignEmail" style="display: inline-flex">Campo obbligatorio: compila per proseguire.</span></div></div></div><div class="row row-margin-bottom text-left" ng-if="!ctrl.savedPrivacy"><div id="modalPrivacy"><div ng-if="!ctrl.showError"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><p class="titolo">{{ctrl.info.titolo}}</p></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><p class="boxTextPrivacy">{{ctrl.info.corpoP1}}</p></div></div><div class="row"><div class="col-md-10 col-sm-offset-2 col-sm-24 col-xs-24"><div class="col-md-7 col-sm-7 col-xs-24 check-container"><input type="radio" class="align-input-content" ng-model="ctrl.trattamentoDatiPersonali" value="{{ctrl.info.valoreConsenso}}" id="radio_consenso" name="radio_consenso" ng-click="ctrl.setConsenso()"> <span class="textcheckbox" ng-class="{\'checked\': ctrl.flagAccettoConsenso == 1 }">{{ctrl.info.consenso}}</span></div><div class="col-md-8 col-sm-8 col-xs-24 check-container"><input type="radio" class="align-input-content" ng-model="ctrl.trattamentoDatiPersonali" value="{{ctrl.info.valoreDissenso}}" id="radio_dissenso" name="radio_dissenso" ng-click="ctrl.setConsenso()"> <span class="textcheckbox" ng-class="{\'checked\': ctrl.flagNegoConsenso == 1 }">{{ctrl.info.dissenso}}</span></div><div ng-if="ctrl.erroreCheckConsenso"><br><span class="errore">{{ctrl.info.errore}}</span></div><div ng-if="ctrl.erroreMancatoConsenso"><br><span class="errore">{{ctrl.info.mancatoConsenso}}</span></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><p class="boxTextPrivacy" style="margin-bottom: 10px">{{ctrl.info.corpoP2}}</p></div></div></div><div ng-if="ctrl.showError"><div class="row text-center error-face"><span class="icona icon ico-comuni-esito-face-ko"></span></div><div class="row text-center"><p class="titoloEsito">{{ctrl.info.erroreTecnico}}</p></div><div class="row text-center"><button class="col-md-6 col-md-offset-9 col-sm-8 col-sm-offset-8 col-xs-18 col-xs-offset-3 text-center customBtn greenButton" ng-click="ctrl.riprova();$dismiss()">RIPROVA</button></div><div style="margin-bottom:20px"></div></div></div></div><!-- captcha v2 commentato, implementato v3\r\n                            <div class="row row-margin-bottom text-left">\r\n                                <div class="col-md-24 col-sm-24 col-xs-24">\r\n                                    <div class="row">\r\n                                        <div class="col-md-24 col-sm-24 col-xs-24">\r\n                                            <p class="text-left boxTextStep2">Per motivi di sicurezza, metti un\r\n                                                segno di spunta accanto alla seguente voce e segui le istruzioni.</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row text-left" id="captchaId" style="padding: 11px 0px 9px 0px;">\r\n                                        <div class="col-lg-6 col-md-8 col-sm-10 col-xs-18" vc-recaptcha key="ctrl.captchaKey" ng-model="ctrl.gRecaptchaResponse" on-success="ctrl.setResponse(response)" on-expire="ctrl.cbExpiration()" lang="it">\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row text-left" style="margin-left: 10px;">\r\n                                        <div ng-if="ctrl.erroregRecaptchaResponse">\r\n                                            <span class="text-center erroreCaptcha">Per continuare, metti un segno\r\n                                                    di spunta accanto alla voce di questo box e segui le indicazioni.</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            --><!-- fine captcha v2--><div ng-if="ctrl.errorReCaptcha" class="row row-margin-bottom text-left"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row text-center"><span class="text-center erroreCaptcha">Ci scusiamo ma, per un problema tecnico, la registrazione non è andata a buon fine. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</span></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-if="ctrl.erroreCodiceConfermaMaxOts"><span class="errore errorStyle">Non hai ricevuto il codice? Verifica la tua email e riprova più tardi.</span></div></div></div></div></div></div><div class="row" style="padding: 15px"><div class="col-md-24 col-sm-24 col-xs-24 row-margin-bottom-20 row-margin-top-10 text-left"><br><span class="boxTextStep2" style="padding-left: 0px !important">*Campo obbligatorio</span></div><div class="col-md-24 col-md-offset-2 col-sm-24 col-xs-24 nopadding row-margin-bottom-20" ng-if="!ctrl.savedPrivacy"><div class="isp-alertbox"><div class="nbpAlertContainer"><div class="nbpAlertIconContainer hidden-xs"><span class="icon ico-comuni-c-info-n"></span></div><div class="isp-alertbox-sb-personalize-icon-box-mobile hidden-sm hidden-md hidden-lg"><div class="ico-comuni-c-info-n isp-alertbox-sb-infoPositive alertbox-sb-icon-font" aria-hidden="true"></div></div><div class="nbpAlertMessageContainer"><div><span>Cliccando su Continua dichiaro di aver preso visione dell&apos;</span> <span class="greenLink" ng-click="ctrl.openPrivacyModal()" aria-haspopup="dialog" role="button"><b>INFORMATIVA</b></span> <span>ai sensi degli artt. 13 e 14 del regolamento (UE) 2016/679.</span></div></div></div></div></div><div class="row" style="margin-top:10px"></div><div class="text-center" style="margin-bottom:30px"><div class="button-row"><button class="col-md-4 col-md-offset-0 col-sm-4 col-xs-24 customBtnRegistrazione greyBackgroundGreenBorder" type="button" ng-click="ctrl.bottoneIndietro()">INDIETRO</button> <button class="col-md-4 col-md-offset-0 col-sm-4 col-xs-24 customBtnRegistrazione greenBackground continua" type="button" ng-click="ctrl.runService()" ng-disabled="ctrl.disableStep1" ng-class="{\'disabledBtn\': ctrl.disableStep1}">CONTINUA</button></div></div></div></div><div ng-if="ctrl.currentStep === 1 && ctrl.migrazione"><div class="container"><div class="row row-margin-bottom"><div class="row text-center" style="margin-top:50px"><span class="esito-neutral isp-font-cf-face-neutral-n"></span></div><div class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom"><h2 style="margin: 30px 10px 0 10px">Siamo spiacenti, ma non puoi iniziare il processo di apertura conto online poichè sei un cliente in perimetro di migrazione.</h2></div></div></div></div><div ng-if="ctrl.currentStep === 1 && !ctrl.isLogged"><div ng-if="ctrl.giaRegistrato || ctrl.giaCliente"><!--<gaaccedi></gaaccedi>--><div class="container"><div class="row row-margin-bottom"><div class="row text-center" style="margin-top:50px"><span class="esito-ok ico-cf-face-good-n"></span></div><div ng-if="ctrl.giaRegistrato" class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom" style="margin-top: 20px"><h1>Sei già registrato alla nostra area ospiti</h1></div><div ng-if="ctrl.giaCliente" class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom" style="margin-top: 20px"><h1>Sei già nostro cliente</h1></div><div class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom"><h2 style="margin: 0 10px">Effettua l\'accesso per proseguire con la sottoscrizione</h2></div><div class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom"><button type="button" class="buttonPadding customBtn greenBackground fixAllineamento" ng-click="ctrl.redirectCheckUser()">CONTINUA</button></div></div></div></div><div ng-if="!ctrl.giaRegistrato && !ctrl.giaCliente"><div ng-if="!ctrl.erroreSalvaProposta && !ctrl.erroreCheckUser && !ctrl.genericErrorSimulation && !ctrl.genericErrorExecution && !ctrl.errorCaptchaTimeout"><div class="container"><div class="row-margin-bottom-20 row-margin-top-20"><div class="col-md-24 col-sm-24 col-xs-24"><p class="boxTextPrivacy titleStep3">{{ctrl.step2.title}}</p></div></div><div class="row-margin-bottom"><div class="col-md-22 col-sm-offset-1 col-sm-22 col-md-offset-1 col-xs-24"><p class="boxTextPrivacy">{{ctrl.step2.text1}}<b>{{ctrl.email}}</b>{{ctrl.step2.text2}}</p></div></div></div><span role="text" aria-label="I campi contrassegnati con l’asterisco sono obbligatori"></span><div class="headerStep2 col-md-24 col-sm-24 col-xs-24"><div class="row"><div class="col-sm-4 col-xs-24"></div><div class="col-sm-16 col-xs-24"><div class="col-md-12 col-md-offset-1 col-sm-13 col-sm-offset-6 col-xs-24"><p class="text-left textOverInput textOverInputEmail"><b>Password *</b></p><input type="password" class="inputTextRegistrazione inputTextRegistrazionePsw" id="codConferma" name="codConferma" required placeholder="Inserisci la password" ng-change="ctrl.checkCodConferma()" ng-model="ctrl.codConferma" ng-class="{\'erroreEditText\': ctrl.erroreCodConfermaVuoto || ctrl.erroreCodConferma || ctrl.erroreCodiceLogin4 || ctrl.erroreCodiceLogin5 || ctrl.erroreCodiceConfermaMaxOts || ctrl.erroreCodiceMaxTry || ctrl.erroreCodiceLogin9}"> <span ng-click="ctrl.viewPassword()" class="green-vg-text" ng-class="{\'eye icon cmb-ico-ga-occhio\': ctrl.showPwd, \'eye icon cmb-ico-ga-occhio-barrato\': !ctrl.showPwd}" aria-label="{{ctrl.pswMessageAriaLabel}}" aria-label="{{ariaLabelPassword}}" role="button"></span></div></div><div class="col-sm-4 col-xs-24"></div></div><div class="row" ng-if="ctrl.erroreCodConfermaVuoto || ctrl.erroreCodConferma || ctrl.erroreCodiceLogin4 || ctrl.erroreCodiceLogin5 || ctrl.erroreCodiceConfermaMaxOts || ctrl.erroreCodiceMaxTry || ctrl.erroreCodiceLogin9"><div class="col-sm-4 col-xs-24"></div><div class="col-sm-16 col-xs-24"><div class="col-md-12 col-md-offset-1 col-sm-13 col-sm-offset-6 col-xs-24"><div class="col-md-24 col-sm-24 col-xs-24"><div ng-if="ctrl.erroreCodConfermaVuoto"><span class="errore errorStyle">Campo obbligatorio: compila per proseguire.</span></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-if="ctrl.erroreCodConferma"><span class="errore errorStyle">Il codice di conferma inserito non è corretto, verifica nuovamente la mail che ti abbiamo inviato.</span></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-if="ctrl.erroreCodiceLogin4"><span class="errore errorStyle">Il codice di conferma inserito non è corretto, verifica nuovamente la mail che ti abbiamo inviato.</span></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-if="ctrl.erroreCodiceLogin5"><span class="errore errorStyle">Errore, codice di verifica scaduto.</span></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-if="ctrl.erroreCodiceConfermaMaxOts"><span class="errore errorStyle">Non hai ricevuto il codice? Verifica la tua email e riprova più tardi.</span></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-if="ctrl.erroreCodiceMaxTry"><span class="errore errorStyle">Non hai ricevuto il codice? Verifica la tua email e riprova più tardi</span></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-if="ctrl.erroreCodiceLogin9"><span class="errore errorStyle">Si è verificato un errore.<br>Attendi qualche istante e clicca su INVIA DI NUOVO. Controlla l’email e ripeti l’operazione di verifica inserendo il nuovo codice che troverai nella posta.</span></div></div></div></div><div class="col-sm-4 col-xs-24"></div></div><div class="row row-margin-bottom" ng-if="!ctrl.erroreCodiceConfermaMaxOts"><div class="col-md-4 col-sm-4 col-xs-24"></div><div class="col-md-16 col-sm-16 col-xs-24"><div class="col-md-12 col-md-offset-1 col-sm-13 col-sm-offset-6 col-xs-24"><p class="text-left textOverInput textOverInputEmail" style="font-size: 14px"><b>Non hai ricevuto l\'e-mail? <a class="green-vg-text" ng-click="ctrl.richiediCodice()">INVIA DI NUOVO</a></b></p></div></div><div class="col-md-4 col-sm-4 col-xs-24"></div></div></div><div class="col-md-24 col-sm-24 col-xs-24 row-margin-bottom text-left"><br><span class="boxTextStep2" style="padding-left: 10px !important">*Campo obbligatorio</span></div><div class="col-md-24 col-sm-24 col-xs-24" style="margin-top: 10px;padding: 0 10px"><div class="isp-alertbox" style="margin-bottom:30px;width: 99%;margin-left: auto;margin-right: auto"><div class="nbpAlertContainer"><div class="nbpAlertIconContainer"><span class="icon ico-comuni-c-alert-n"></span></div><div class="nbpAlertMessageContainer"><div><p style="font-size: 16px">Ricordati che questo codice sar&agrave; <b>la password</b> per accedere alla tua Area Ospiti e ti servir&agrave; per riprendere l\'apertura del conto se salvi o interrompi il processo</p></div></div></div></div></div><div style="padding: 0px 10px; display: flex;flex-direction: column"><div><div class="marginButtonVerifica button-row" popover-class="carrello_popover" popover-trigger="none" popover-placement="top" popover-is-open="ctrl.showPopover" uib-popover="{{ctrl.info.popoverVerifica}}"><button class="col-md-4 col-md-offset-0 col-sm-4 col-xs-24 customBtnRegistrazione greyBackgroundGreenBorder" type="button" ng-click="ctrl.bottoneIndietro(0)">INDIETRO</button> <button class="col-md-4 col-md-offset-0 col-sm-4 col-xs-24 customBtnRegistrazione greenBackground continua" type="button" ng-click="ctrl.runService()" ng-disabled="ctrl.disableStep2" ng-class="{\'disabledBtn\': ctrl.disableStep2}">CONTINUA</button></div></div></div></div><div ng-if="ctrl.erroreSalvaProposta || ctrl.erroreCheckUser || ctrl.genericErrorSimulation || ctrl.genericErrorExecution || ctrl.errorReCaptcha"><div class="row text-center" style="margin-top:50px"><span class="esito-ko ico-cf-face-bad-n"></span></div><div class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom" style="margin-top: 20px"><h1 class="col-xs-24">{{ctrl.info.erroreTecnico}}</h1></div><div class="col-md-24 col-sm-24 col-xs-24 text-center margin-bottom-100"><button type="button" class="buttonPadding customBtn greenBackground fixAllineamento" ng-click="ctrl.riprova()">RIPROVA</button></div></div><div ng-if="ctrl.errorCaptchaTimeout"><div class="row text-center" style="margin-top:50px"><span class="esito-neutral ico-cf-face-neutral-n"></span></div><div class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom" style="margin-top: 20px"><h1 class="col-xs-24 mb-10p">{{ctrl.info.erroreRecaptcha}}</h1></div><div class="col-md-24 col-sm-24 col-xs-24 text-center margin-bottom-100"><button type="button" class="buttonPadding customBtn greenBackground fixAllineamento" ng-click="ctrl.riprova()">RIPROVA</button></div></div></div></div><div ng-if="ctrl.currentStep === 1 && ctrl.isLogged"><div ng-if="ctrl.giaCliente"><!--<gaaccedi></gaaccedi>--><div class="container"><div class="row row-margin-bottom"><div class="row text-center" style="margin-top:50px"><span class="esito-ok ico-cf-face-good-n"></span></div><div ng-if="ctrl.giaCliente" class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom" style="margin-top: 20px"><h1>Sei già nostro cliente</h1></div><div class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom"><h2 style="margin: 0 10px">Effettua l\'accesso per proseguire con la sottoscrizione</h2></div><div class="col-md-24 col-sm-24 col-xs-24 text-center row-margin-bottom"><button type="button" class="buttonPadding customBtn greenBackground fixAllineamento" ng-click="ctrl.redirectCheckUserGiaCliente()">CONTINUA</button></div></div></div></div></div><div ng-if="ctrl.currentStep === 2"><div ng-if="!ctrl.errorGeneric && !ctrl.errorFrodatore && !ctrl.errorUpdateGeneric && !ctrl.errore3OTS && !ctrl.errorFaccinaGialla"><div class="container"><div class="row row-margin-bottom-20 row-margin-top-20"><div class="col-md-24 col-sm-24 col-xs-24"><div class="boxTextPrivacy titleStep3">Certifica il cellulare</div><div class="boxTextPrivacy subTitleStep3">Invieremo al tuo numero di cellulare un codice di sicurezza per certificare il contatto</div></div></div></div><span role="text" aria-label="I campi contrassegnati con l’asterisco sono obbligatori"></span><div class="header col-md-24 col-sm-24 col-xs-24"><div class="row"><div style="margin-top: 20px"><div class="row row-margin-bottom"></div><div class="row"><div class="isp-alertbox" ng-if="ctrl.showAlertBannerCellEstero"><div class="nbpAlertContainer2"><div class="nbpAlertIconContainer2"><span class="icon ico-comuni-c-alert-n"></span></div><div class="nbpAlertMessageContainer2"><div class="row"><div class="col-md-22 col-sm-22 col-xs-22"><span>Non è possibile attivare gli avvisi via SMS poiché è stato fornito un numero estero.</span></div><!--div role="button" class="isp-alertbox-x-close" ng-click="ctrl.visible =! ctrl.visible">\r\n                                                        <span class="icon ico-azioni-elimina"></span>\r\n                                                    </div--></div></div></div></div></div><div class="row mb-10p" ng-if="!ctrl.codiceFiscale"><div class="text-left col-sm-12 col-md-12 col-xs-24"><div class="col-md-24"><p class="text-left mb-10p"><b>Codice Fiscale *</b></p></div><div class="row"><div class="col-sm-12 col-md-12 col-xs-24"><input type="text" class="inputTextRegistrazione" id="codiceFiscale" placeholder="Inserisci" name="codiceFiscale" required="" maxlength="16" ng-class="{\'erroreEditText\': ctrl.erroreCodiceFiscaleVuoto || ctrl.erroreCodiceFiscale || ctrl.erroreCodiceFiscaleLunghezza || ctrl.errorCFWrong || ctrl.erroreCodiceFiscaleMinore}" ng-model="ctrl.codiceFiscale"></div></div><div class="row"><div ng-if="ctrl.erroreCodiceFiscaleVuoto === true" class="error-label-align"><span class="erroreInputGuest alignCfCert" style="display: inline-flex">Campo obbligatorio: compila per proseguire</span></div><div ng-if="ctrl.erroreCodiceFiscaleMinore === true" class="error-label-align"><span class="erroreInputGuest alignCfCert" style="display: inline-flex">Il codice fiscale inserito è di un minorenne.</span></div><div ng-if="ctrl.erroreCodiceFiscale === true" class="error-label-align"><span class="erroreInputGuest alignCfCert" style="display: inline-flex">Il codice fiscale inserito potrebbe essere errato.<br>Per favore, verifica e riprova.</span></div><div ng-if="ctrl.erroreCodiceFiscaleLunghezza === true" class="error-label-align"><span class="erroreInputGuest alignCfCert" style="display: inline-flex">Il Codice fiscale deve essere composto da 16 caratteri alfanumerici. Per favore, verifica e riprova.</span></div><div ng-if="ctrl.errorCFWrong === true" class="error-label-align"><span class="erroreInputGuest alignCfCert" style="display: inline-flex">Codice fiscale e dati anagrafici non congruenti.</span></div></div></div></div><div class="row mb-10p"><div class="text-left col-sm-12 col-md-12 col-xs-24"><div class="col-md-24"><p class="text-left mb-10p"><b>Cellulare *</b></p></div><div class="row"><div class="col-sm-7 col-xs-9 col-md-6" style="margin-right: 10px"><button class="btn-dropdown btn-default dropdown-toggle button-prefisso" type="button" data-toggle="dropdown" ng-model="value" ng-class="{\'open-dropdown-green-border\': ctrl.openDropdown}"><span class="number-prefisso">{{ctrl.selectedPrefisso}}</span><!--<span class="line-button-divider"> </span>--> <span class="dropdown-span"><span id="spanIdimg" class="glyphicon glyphicon-triangle-bottom glyphicon-color glyphicon-dropdown-sizing"></span> </span><!--                                               <img class="freccia"\r\n                                                                                                        src="/ib/public/guestarea/assets/menugiu.png"/>--></button><ul class="col-xs-16 col-xs-offset-2 dropdown-menu" role="menu" id="isp-scrollbar"><li role="presentation"><a ng-repeat="prefisso in ctrl.prefissiInternazionali track by $index" ng-click="ctrl.setPrefisso(prefisso)" class="text-left menuItem item-dropdown" role="menuitem" required><p>{{prefisso.text}}</p></a></li></ul></div><!--cellulare--><div class="col-sm-10 col-md-9 col-xs-14" style="margin-bottom: 2%"><div class="flex-center"><input name="cellulare" type="text" class="inputTextRegistrazione input-cellulare" inputmode="tel" placeholder="Inserisci" ng-class="{\'erroreEditText\': ctrl.erroreCellulareVuoto || ctrl.erroreCellulare}" ng-change="ctrl.checkCancellaCell()" ng-model="ctrl.cellulare"><!--tooltip1 stepCell--> <span role="button" class="help icon ico-comuni-c-help-n" style="font-size: 30px; margin-right: 5px" popover-class="stepCell_popover" popover-trigger="none" popover-placement="auto bottom" popover-is-open="ctrl.checkPopover1" popover-auto-close="true" ng-click="ctrl.setCheckPopover1(true)" uib-popover-template="\'stepCellPopoverTemplate1.html\'" aria-label="PREMI PER APRIRE TOOLTIP" role="button"></span><script type="text/ng-template" id="stepCellPopoverTemplate1.html"><div class="popover-inner">\r\n                                                            <div class="popover-content">\r\n                                                                <span ng-bind-html="ctrl.cmsText.certificaCellulare"></span>\r\n                                                            </div>\r\n                                                            <button class="eliminaTooltip1 icon ico-azioni-elimina"\r\n                                                                    role="button" aria-label="Chiudi suggerimento"\r\n                                                                    ng-click="ctrl.setCheckPopover1(false)"></button>\r\n                                                        </div></script></div><div class="row"><div class="col-md-20 col-sm-20 col-xs-22 text-left"><div ng-if="ctrl.erroreCellulareVuoto === true"><span class="erroreInputGuest alignCellulare" style="display: inline-flex">Campo obbligatorio: compila per proseguire</span></div></div><div class="col-md-20 col-sm-20 col-xs-22 text-left"><div ng-if="ctrl.erroreCellulare === true"><span class="erroreInputGuest alignCellulare" style="display: inline-flex">{{ctrl.erroreCellulareText}}</span></div></div></div></div><!--bottone--><div class="col-sm-5 col-md-5 col-xs-24 col-sm-offset-0 col-md-offset-0 text-center" style="margin-top: -0.25%" ng-if="!ctrl.visualizzaInviaDiNuovo"><button type="button" class="buttonPadding customBtnCert greenBackground" ng-class="{ \'disabledBtn\' : ctrl.error429 }" ng-click="ctrl.openBottoneSms()">RICHIEDI CODICE VIA SMS</button></div><div class="col-sm-6 col-md-6 col-xs-22 col-xs-offset-1 col-sm-offset-0 col-md-offset-0 text-left" style="margin-top: -1.25%" ng-if="ctrl.visualizzaInviaDiNuovo" aria-selected="{{ctrl.visualizzaInviaDiNuovo}}"><div class="infoSms"><p>Controlla il cellulare e inserisci il<br>codice di sicurezza appena<br>inviato via SMS</p></div></div></div></div><div class="text-left col-sm-12 col-md-12 col-xs-24" ng-class="{\'disabledBtn\': !ctrl.visualizzaInviaDiNuovo}"><div class="row"><p class="text-left col-sm-offset-8 col-md-offset-8 col-xs-offset-0 mb-10p send-code-title"><b>Inserisci il codice ricevuto via SMS *</b></p></div><div class="row"><div class="col-sm-17 col-sm-offset-7 col-xs-24 col-xs-offset-0 col-md-16 col-md-offset-7"><div class="flex-center"><input type="password" placeholder="Inserisci" ng-disabled="!ctrl.visualizzaInviaDiNuovo" class="inputTextRegistrazione2 ng-pristine ng-invalid ng-invalid-required ng-touched" style="letter-spacing: 0px" maxlength="6" id="codiceSms" required="" ng-model="ctrl.codiceSms" ng-class="{\'erroreEditText\': ctrl.erroreCodiceSmsVuoto || ctrl.erroreCodiceSmsLunghezza || ctrl.error401OTSErrato}"><!--tooltip2 stepCell--> <span role="button" class="help icon ico-comuni-c-help-n" style="font-size: 30px; margin-right: 8px" popover-class="stepCell_popover" popover-placement="auto bottom" popover-is-open="ctrl.checkPopover2" popover-auto-close="true" ng-click="ctrl.setCheckPopover2(true)" popover-trigger="none" uib-popover-template="\'stepCellPopoverTemplate2.html\'" aria-label="PREMI PER APRIRE TOOLTIP" role="button"></span><script type="text/ng-template" id="stepCellPopoverTemplate2.html"><div class="popover-inner" style="margin-top: 4px;">\r\n                                                            <div class="popover-content">\r\n                                                                <span ng-bind-html="ctrl.cmsText.inserisciCodiceSms"></span>\r\n                                                            </div>\r\n                                                            <button class="eliminaTooltip2 icon ico-azioni-elimina"\r\n                                                                    role="button" aria-label="Chiudi suggerimento"\r\n                                                                    ng-click="ctrl.setCheckPopover2(false)"></button>\r\n                                                        </div></script></div><div class="row"><div class="col-sm-20 col-xs-22 col-md-20 text-left"><div ng-if="ctrl.error401OTSErrato === true"><span class="erroreInputGuest alignCodSms" style="display: inline-flex">Il codice inserito non è corretto. Per favore verifica e riprova</span></div></div></div><div class="row"><div class="col-sm-24 col-xs-22 col-md-24 text-left"><div ng-if="ctrl.erroreCodiceSmsVuoto === true"><span class="erroreInputGuest alignCodSms" style="display: inline-flex">Campo obbligatorio: compila per proseguire</span></div></div></div><div class="row"><div class="col-sm-20 col-xs-22 col-md-20 text-left"><div ng-if="ctrl.erroreCodiceSmsLunghezza === true"><span class="erroreInputGuest alignCodSms" style="display: inline-flex">Il codice di sicurezza può contenere solo 6 caratteri numerici. Per favore, verifica e riprova.</span></div></div></div></div><div class="row"><div class="col-sm-16 col-sm-offset-8 col-xs-23 col-xs-offset-1 col-md-16 col-md-offset-8 row-margin-bottom ng-scope"><div class="row"><p class="text-left send-code" style="font-size: 14px"><b>Non hai ricevuto il codice? <a class="green-vg-text" ng-click="ctrl.certifyguest(true)">INVIA DI NUOVO</a></b></p></div></div></div></div></div></div><div class="isp-alertbox ng-scope" ng-if="ctrl.error504"><div class="nbpAlertContainer2"><div class="nbpAlertIconContainer2"><span class="icon ico-comuni-c-alert-n"></span></div><div class="nbpAlertMessageContainer2"><div class="row"><div class="col-md-22 col-sm-22 col-xs-22"><span>{{ ctrl.info.errore504 }}<br></span></div></div></div></div></div></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24 row-margin-bottom text-left"><br><span class="boxTextStep2" aria-hidden="true" style="padding-left: 10px !important">*Campo obbligatorio</span></div><div style="padding: 0px 15px; display: flex; flex-direction: column"><div><div class="marginButtonVerifica button-row" ng-mouseover="ctrl.setShowPopover(true)" ng-mouseleave="ctrl.setShowPopover(false)" popover-class="carrello_popover" popover-trigger="none" popover-placement="top" popover-is-open="ctrl.showPopover" uib-popover="{{ctrl.info.popoverVerifica}}"><button class="col-md-4 col-md-offset-0 col-sm-4 col-xs-24 customBtnRegistrazione greyBackgroundGreenBorder" type="button" ng-click="ctrl.bottoneIndietro(0, \'certificazioneCellulare\')">INDIETRO</button> <button class="col-md-4 col-md-offset-0 col-sm-4 col-xs-24 customBtnRegistrazione greenBackground continua" type="button" ng-mouseleave="ctrl.setShowPopover(false)" ng-mouseover="ctrl.setShowPopover(true)" ng-click="ctrl.runService()">CONTINUA</button></div></div></div></div></div><!--gestione errori--><div ng-if="ctrl.errorGeneric || ctrl.errorFrodatore || ctrl.errorUpdateGeneric || ctrl.errore3OTS || ctrl.errorFaccinaGialla"><div ng-if="ctrl.errorGeneric"><div class="row text-center row-margin-top"><span class="esito-ko ico-cf-face-bad-n"></span></div><div class="col-md-24 col-sm-24 col-xs-24 text-center margin-bottom-100 errorTesto"><h1 class="col-xs-24">{{ctrl.info.erroreTecnico}}</h1></div></div><div ng-if="ctrl.errorFaccinaGialla"><div class="row text-center row-margin-top"><span class="esito-neutral ico-cf-face-bad-n"></span></div><div class="col-md-24 col-sm-24 col-xs-24 text-center margin-bottom-100 errorTesto"><h1 class="col-xs-24">{{ctrl.info.erroreFaccinaGiallaTitle}}</h1><br><h2 class="col-xs-24">{{ctrl.info.erroreFaccinaGiallaSubTitle}}</h2><br><div class="col-md-24 col-sm-24 col-xs-24 text-center"><button type="button" class="customBtn greenBackground" style="margin-top: 20px" ng-click="ctrl.refresh()">RICARICA LA PAGINA</button></div></div></div><div ng-if="ctrl.errorFrodatore"><div class="row text-center row-margin-top"><span class="esito-ko ico-cf-face-bad-n"></span></div><div class="col-md-24 col-sm-24 col-xs-24 text-center margin-bottom-100 errorTesto"><h1 class="col-xs-24">{{ctrl.info.errorFrodatore}}</h1></div><div class="footerIframe2 col-md-24 col-sm-24 col-xs-24"><div class="helpFooter"><div class="infoHelp2 text-left"><p><span class="infoA"><b>Hai bisogno di aiuto?</b></span><br><span class="infoB">Siamo a tua disposizione, chiamaci!</span></p></div><div class="flex-center numeroHelp"><div class="iconCell ico-parlacon-chiama"></div><div class="infoHelp text-left"><p><span class="infoC"><b>800 303 303</b></span></p></div></div><span class="infoB">Dall\'estero <b>+39 011 8019200</b></span></div></div><div class="footerIframeGreen col-md-24 col-sm-24 col-xs-24"><div class="col-md-24 col-sm-24 col-xs-24 text-center"><button type="button" class="buttonPadding customBtn homeButton" ng-click="ctrl.home()">VAI ALLA HOME</button></div></div></div><div ng-if="ctrl.errorUpdateGeneric"><div class="row text-center row-margin-top"><span class="esito-ko ico-cf-face-bad-n"></span></div><div class="col-md-24 col-sm-24 col-xs-24 text-center margin-bottom-100 errorTesto"><h1 class="col-xs-24">{{ctrl.info.errorUpdateGeneric}}</h1></div></div><div ng-if="ctrl.errore3OTS"><div class="row text-center row-margin-top"><span class="esito-neutral ico-cf-face-neutral-n"></span></div><div class="col-md-24 col-sm-24 col-xs-24 text-center margin-bottom-100 errorTesto"><h1 class="col-xs-24">{{ctrl.info.errore3OTS}}</h1></div><div class="footerIframe col-md-24 col-sm-24 col-xs-24"><div class="helpFooter"><div class="flex-center row-margin-top"><div class="iconHelp ico-parlacon-galleggiante"></div><div class="infoHelp text-left"><p><span><b>Serve aiuto?</b></span><br><span>Parla con la filiale online</span></p></div></div></div></div><div class="footerIframeGreen col-md-24 col-sm-24 col-xs-24"><div class="col-md-24 col-sm-24 col-xs-24 text-center"><button type="button" class="buttonPadding customBtn homeButton" ng-click="ctrl.home()">VAI ALLA HOME</button></div></div></div></div></div><!-- FINE STEP 2 --><!-- ots --><div id="ots" ng-if="ctrl.checkOts"><div class="container" ng-init="ctrl.resetOts()"><div class="text-center row-margin-bottom-20 row-margin-top-20" style="padding-inline: 5px"><p class="boxTextPrivacy titleStep3">{{ctrl.nome}}, stai per proseguire con l\'acquisto del conto corrente.</p></div></div><div class="row box"><div class="col-md-12 col-sm-12 col-xs-21 row-cellulare"><div><p class="boxTextTitle">Per garantire la tua privacy ti chiediamo di inserire il codice di sicurezza che ti abbiamo inviato al numero</p></div><div class="row"><br><p class="boxTextTitle"><b>{{ctrl.prefisso}} *** ****{{ctrl.maskedCellulare}}</b></p></div></div><div class="col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-24"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row" style="margin-top: 20px"><div class="col-md-24 col-sm-24 col-xs-24"><div class="col-md-12 col-md-offset-1 col-sm-15 col-sm-offset-6 col-xs-24"><p class="text-left textOverInput"><b>Codice SMS *</b></p></div><div class="col-md-12 col-md-offset-1 col-sm-13 col-sm-offset-6 col-xs-24" style="display: flex"><input maxlength="6" type="password" class="col-md-20 col-sm-20 col-xs-21 inputTextRegistrazione" id="ots" name="ots" ng-focus="ctrl.resetOtsErrors()" ng-blur="ctrl.checkOtsFunction()" ng-class="{\'erroreEditText\': ctrl.erroreCodiceOts || ctrl.erroreCodiceOtsVuoto}" ng-model="ctrl.codiceOts" required><div class="tooltip-cellulare col-md-4 col-sm-4 col-xs-3"><span class="carrello_help icon ico-comuni-c-help-n" style="cursor:pointer; font-size:30px;margin: auto;margin-left: 10px; display: flex" popover-class="OTSCell_popover" popover-append-to-body="true" popover-placement="top" popover-trigger="outsideClick" uib-popover="È il codice di sei cifre necessario per proseguire con l\'apertura del conto" aria-label="È il codice di sei cifre necessario per proseguire con l\'apertura del conto" role="button"></span></div></div></div></div><div class="row" ng-if="ctrl.erroreCodiceOts || ctrl.erroreCodiceOtsVuoto || ctrl.erroreCodiceOtsNonValido"><div class="col-md-12 col-md-offset-1 col-sm-13 col-sm-offset-6 col-xs-21 errore-cellulare-ots"><div ng-show="ctrl.erroreCodiceOts"><span class="errore">Il codice ots deve essere composto da almeno 6 numeri. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.erroreCodiceOtsVuoto"><span class="errore">Campo obbligatorio: compila per proseguire.</span></div><div ng-show="ctrl.erroreCodiceOtsNonValido"><span class="errore">Ci scusiamo ma, per un problema tecnico, la verifica del codice di sicurezza non è andata a buon fine. Per favore, riprova più tardi.<br>Per maggiori informazioni contattaci.</span></div></div></div><div class="col-md-19 col-md-offset-6 col-sm-15 col-sm-offset-6 col-xs-24"><p class="text-left textOverInput send-code" ng-if="ctrl.richiestaCodice == false" style="font-size: 14px; margin-bottom: 0px"><b>Non hai ricevuto il codice? <a class="link green-vg-text" ng-click="ctrl.resendCode()">INVIA DI NUOVO</a></b></p><p class="boxText" ng-if="ctrl.richiestaCodice == true">Stiamo inviando il codice di sicurezza via SMS sul tuo numero +39 *** ****{{ctrl.maskedCellulare}}<br>Attendi qualche istante...</p></div></div></div></div><div class="col-md-24 col-sm-24 col-xs-24 row-margin-bottom text-left"><br><span class="boxTextStep2" aria-hidden="true" style="padding-left: 10px !important">*Campo obbligatorio</span></div><div style="padding: 0px 10px; display: flex;flex-direction: column"><div><div class="marginButtonVerifica button-row" popover-class="carrello_popover" popover-trigger="none" popover-placement="top" popover-is-open="ctrl.showPopover" uib-popover="{{ctrl.info.popoverVerifica}}"><button class="col-md-4 col-md-offset-0 col-sm-4 col-xs-24 customBtnRegistrazione greyBackgroundGreenBorder" type="button" ng-click="ctrl.bottoneAnnulla()" ng-disabled="ctrl.bottoneDisabilitato">ANNULLA</button> <button class="col-md-4 col-md-offset-0 col-sm-4 col-xs-24 customBtnRegistrazione greenBackground continua" style="float:right" type="button" ng-class="{\'customBtnDisabled disabled\': ctrl.bottoneDisabilitato}" ng-click="ctrl.bottoneConferma()" ng-disabled="ctrl.bottoneDisabilitato">CONTINUA</button></div></div></div></div><!-- FINE ots --></div></div></div>'),
e.put("app/ricordamidi/appuntamento/appuntamento-modal-elimina-appt.html",'<div id="appuntamentoModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row" style="margin-bottom: 20px;font-size:15px"><b>CANCELLA APPUNTAMENTO</b></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row"></div></div></div><div class="row"><div class="col-md-5 col-sm-5 hidden-xs"><div class="row"><span class="icona icon ico-comuni-esito-face-ko" style="width:100px;height:75px;padding-left:25px;font-size:80px;color:#C83200"></span></div></div><div class="col-md-16 col-sm-18 col-xs-23 col-xs-offset-1"><div class="row text-center"><p class="scritte">Ci scusiamo ma, per un problema tecnico, non &egrave; possibile cancellare l\'appuntamento. Per favore, riprova pi&ugrave; tardi. Per maggiori informazioni contattaci</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-6 col-md-offset-9 col-sm-8 col-sm-offset-8 col-xs-24" type="button" ng-click="$dismiss()">CHIUDI</button></div></div></div>'),e.put("app/ricordamidi/appuntamento/appuntamento-modal.html",'<div id="appuntamentoModal"><div ng-if="appuntamentoModalCtrl.firstStep"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row" style="margin-bottom: 20px;font-size:15px"><b>{{appuntamentoModalCtrl.titoloModale}}</b></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row"></div></div></div><!-- appuntamento in filiale --><div class="row" ng-if="!appuntamentoModalCtrl.isCMB && !appuntamentoModalCtrl.isCMN"><div class="col-md-5 col-sm-5 hidden-xs"><div class="row"><span class="icona icon ico-comuni-calendario" style="width:100px;height:75px;padding-left:25px;font-size:80px;color:#2b8804"></span></div></div><div class="col-md-16 col-sm-18 col-xs-23 col-xs-offset-1"><div class="row"><label>Presso: filiale di {{appuntamentoModalCtrl.appuntamento.dettaglioFiliale.indirizzo}}, {{appuntamentoModalCtrl.appuntamento.dettaglioFiliale.cap}}, {{appuntamentoModalCtrl.appuntamento.dettaglioFiliale.comune}}</label></div><br><div class="row"><label>Quando: {{appuntamentoModalCtrl.appuntamento.dettaglioAppuntamento.dataEOra.dataInizio | dotDate}}</label><br><label>Ora: {{appuntamentoModalCtrl.appuntamento.dettaglioAppuntamento.dataEOra.dataInizio | hours}} - {{appuntamentoModalCtrl.appuntamento.dettaglioAppuntamento.dataEOra.dataFine | hours}}</label></div><br><div class="row"><label>Argomento: {{appuntamentoModalCtrl.appuntamento.dettaglioAppuntamento.descArgomento}}</label></div><br><div class="row" ng-show="appuntamentoModalCtrl.appuntamento.dettaglioAppuntamento.descNote != null && appuntamentoModalCtrl.appuntamento.dettaglioAppuntamento.descNote != \'\'"><label>Note: {{appuntamentoModalCtrl.appuntamento.dettaglioAppuntamento.descNote}}</label></div></div></div><!-- appuntamento telefonico --><div class="row" ng-if="appuntamentoModalCtrl.isCMB || appuntamentoModalCtrl.isCMN"><div class="col-md-5 col-sm-5 hidden-xs"><div class="row"><span class="icona icon ico-parlacon-callme-back" style="width:100px;height:75px;padding-left:25px;font-size:80px;color:#2b8804"></span></div></div><div class="col-md-16 col-sm-18 col-xs-23 col-xs-offset-1"><div class="row"><label>La filiale online ti richiamer&agrave;</label></div><div class="row"><label>- al numero {{appuntamentoModalCtrl.numero}}</label></div><div class="row" ng-if="appuntamentoModalCtrl.isCMB"><label>- il {{appuntamentoModalCtrl.data}}</label></div><div class="row" ng-if="appuntamentoModalCtrl.isCMB"><label>- tra le {{appuntamentoModalCtrl.oraInizio}} e le {{appuntamentoModalCtrl.oraFine}}</label></div><div class="row"><label>- per parlare di {{appuntamentoModalCtrl.argomentiformat}}</label></div><br><!-- commentato defect 14025\r\n                <div class="row" ng-show="appuntamentoModalCtrl.descNote != null && appuntamentoModalCtrl.descNote != \'\'">\r\n                    <label>Le rue note: {{appuntamentoModalCtrl.descNote}}</label>\r\n                </div> --></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-24"><button class="customBtn ibButton col-md-11 col-sm-11 col-xs-24" type="button" ng-class="{\'customBtnDisabled disabled\': !appuntamentoModalCtrl.isRemovable}" data-dismiss="modal" ng-click="appuntamentoModalCtrl.isRemovable && appuntamentoModalCtrl.elimina()" style="float:left">ELIMINA</button> <button ng-if="!appuntamentoModalCtrl.isCMB && !appuntamentoModalCtrl.isCMN" class="customBtn ibButton col-md-11 col-md-offset-1 col-sm-11 col-sm-offset-1 col-xs-24" type="button" data-dismiss="modal" ng-click="appuntamentoModalCtrl.modifica()" style="float:left">MODIFICA</button> <button ng-if="appuntamentoModalCtrl.isCMB || appuntamentoModalCtrl.isCMN" class="customBtn ibButton col-md-11 col-md-offset-1 col-sm-11 col-sm-offset-1 col-xs-24" type="button" ng-class="{\'customBtnDisabled disabled\': !appuntamentoModalCtrl.isEditable}" data-dismiss="modal" ng-click="appuntamentoModalCtrl.isEditable && appuntamentoModalCtrl.modificaApptTel()" style="float:left">MODIFICA</button></div><div class="col-md-12 col-sm-12 col-xs-24"><button class="customBtn greenBackground col-md-11 col-sm-11 col-xs-24" type="button" ng-click="$dismiss()" style="float:right">CHIUDI</button></div></div></div><div ng-if="!appuntamentoModalCtrl.firstStep"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24"><label class="labelNeraGrande">ELIMINA</label></div></div><div class="row"><div class="col-md-5 col-sm-5 col-xs-6" style="top: 10px"><div class="row"><span class="icona icon ico-comuni-c-alert-n" style="width:100px;height:75px;padding-left:25px;font-size:80px;color:#2b8804"></span></div></div><div class="col-md-17 col-sm-18 col-xs-17 col-xs-offset-1"><div class="row scritte" style="margin-top: 30px"><p ng-if="!appuntamentoModalCtrl.isCMB && !appuntamentoModalCtrl.isCMN">Sei sicuro di voler annullare l\'appuntamento con il tuo gestore?</p><p ng-if="appuntamentoModalCtrl.isCMB || appuntamentoModalCtrl.isCMN">Sei sicuro di voler annullare l\'appuntamento online?</p></div></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greyButton col-md-12 col-sm-12 col-xs-12" type="button" ng-class="{\'customBtnDisabled\': appuntamentoModalCtrl.blocked}" ng-disabled="appuntamentoModalCtrl.blocked" ng-click="$dismiss()" style="float:left">CANCELLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greenBackground col-md-12 col-sm-12 col-xs-12" type="button" ng-class="{\'customBtnDisabled\': appuntamentoModalCtrl.blocked}" ng-disabled="appuntamentoModalCtrl.blocked" ng-click="appuntamentoModalCtrl.eliminaAppt()" style="float:right">CONFERMA</button></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="appuntamentoModalCtrl.erroreEliminaApt == true" style="padding-top:20px"><span class="errore">L\'eliminazione dell\'appuntamento non &egrave; andata a buon fine.</span></div></div></div></div></div>'),e.put("app/ricordamidi/appuntamento/appuntamento.html",'<div id="appuntamento"><div class="row riga" ng-click="appt.openModalAppt(appt.appuntamento)"><div class="loading" ng-show="!appt.ready"><img src="/ib/public/guestarea/assets/loading.gif"></div><div ng-show="appt.ready"><div class="text-center col-md-2 col-sm-2 col-xs-6"><span ng-if="!appt.isApptCMB && !appt.isApptCMN" class="icona icon icon-circleImage ico-comuni-calendario"></span> <span ng-if="appt.isApptCMB || appt.isApptCMN" class="icona icon icon-circleImage ico-parlacon-callme-back"></span></div><div class="col-md-5 col-sm-5 col-xs-18" style="padding: 15px"><label class="labelNeraGrande">{{appt.tipo}}</label></div><div class="col-md-9 col-sm-9 col-xs-10" style="padding: 15px"><div ng-if="!appt.isApptCMB && !appt.isApptCMN" class="row"><label class="labelNeraMedia">Alle ore {{appt.appuntamento.dettaglioAppuntamento.dataEOra.dataInizio | hours}}</label></div><div ng-if="!appt.isApptCMB && !appt.isApptCMN" class="row"><label class="labelGrigia">{{appt.appuntamento.dettaglioFiliale.indirizzo}}</label></div><div ng-if="appt.isApptCMB" class="row"><label class="labelNeraMedia">Tra le {{appt.oraInizio}} e le {{appt.oraFine}} con la filiale online</label></div><div ng-if="appt.isApptCMN" class="row"><label class="labelNeraMedia">Verrai richiamato dalla tua filiale online il prima possibile</label></div></div><div class="col-md-8 col-sm-8 col-xs-14"><div class="col-md-21 col-sm-20 col-xs-21" style="padding: 15px" ng-show="!appt.isApptCMN"><div class="row"><label ng-class="{\'labelNeraPiccola\': !appt.expireThings.alarm, labelRossaPiccola: appt.expireThings.alarm}"><span ng-show="appt.expireThings.alarm" class="ico-comuni-campanella">&nbsp;</span> {{ appt.expireThings.remainingDaysString }}</label></div><div class="row"><label class="labelGrigia">{{ appt.expireThings.expirationDateString }}</label></div></div><div class="col-md-21 col-sm-20 col-xs-21" style="padding: 15px" ng-show="appt.isApptCMN">&nbsp;</div><div class="col-md-3 col-sm-4 col-xs-3" style="padding: 23px 15px 0px 10px"><a ng-show="appt.modifica && appt.isRemovable" ng-click="appt.showDiv = true"><span class="iconaElimina icon ico-comuni-esito-ko"></span> </a><a ng-show="!appt.modifica || !appt.isRemovable"><span class="icona-freccia icon ico-comuni-freccia-dx"></span></a></div></div><div ng-show="appt.showAskConfirm()" class="boxAnnullaConferma col-md-8 col-sm-8 col-xs-24 pull-right"><div class="col-md-11 col-md-offset-1 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 vorrei_removeAnnulla greyButton" type="button" ng-click="appt.showDiv = false">ANNULLA</button></div><div class="col-md-11 col-md-offset-1 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 vorrei_removeConferma greyButton" type="button" ng-click="appt.eliminaAppt()">CONFERMA</button></div></div></div></div></div>'),e.put("app/vorrei/carrello/carrello-modal-alert-elimina.html",'<div id="appuntamentoModal" style="padding: 0; margin:-5px"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="visible-xs"><div class="col-xs-24"><button type="button" class="close" ng-click="$dismiss()" style="padding-left: 5px"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div><div class="col-xs-24"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row" style="margin-bottom: 20px;font-size:15px"><p>ELIMINA RICHIESTA SOSPESA</p></div></div></div></div><div class="hidden-xs"><div class="col-xs-24 col-sm-22" style="margin-left: 15px"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row" style="margin-bottom: 20px;font-size:15px"><p>ELIMINA RICHIESTA SOSPESA</p></div></div></div><div class="col-xs-1" style="margin-left: 6px"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div></div></div><div><div class="row"><div class="col-md-23 col-sm-23 col-xs-23"><div class="row text-center"><p class="scritte">Sei sicuro di voler eliminare questa richiesta di {{::carrelloModalAlertEliminaCtrl.getCategory}}?</p></div></div></div></div><div class="row buttons"><div class="row"><div class="col-md-6 col-sm-12 col-xs-24"><button class="customBtn greyBackgroundGreenBorder" type="button" ng-click="$dismiss()" style="width: 100%">ANNULLA</button></div><div class="col-md-6 col-sm-12 col-xs-24 col-md-offset-11"><button class="customBtn greenBackground" type="button" ng-click="carrelloModalAlertEliminaCtrl.elimina(); $dismiss();" style="width: 100%">CONFERMA</button></div></div></div></div>'),e.put("app/vorrei/carrello/carrello-modal-elimina.html",'<div id="appuntamentoModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row" style="margin-bottom: 20px;font-size:15px"><b>ELIMINA PRATICA</b></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row"></div></div></div><div class="row"><div class="col-md-5 col-sm-5 hidden-xs"><div class="row"><span class="icona icon ico-comuni-esito-face-ko" style="width:100px;height:75px;padding-left:25px;font-size:80px;color:#C83200"></span></div></div><div class="col-md-16 col-sm-18 col-xs-23 col-xs-offset-1"><div class="row text-center"><p class="scritte">Ci scusiamo ma, per un problema tecnico, non &egrave; possibile eliminare la pratica. Per favore, riprova pi&ugrave; tardi. Per maggiori informazioni contattaci</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-6 col-md-offset-9 col-sm-8 col-sm-offset-8 col-xs-24" type="button" ng-click="$dismiss()">CHIUDI</button></div></div></div>'),e.put("app/vorrei/carrello/carrello.html",'<div id="carrello"><div class="row riga-carrello"><div class="riga-section col-xs-24 col-md-10 dettagli"><div class="row"><p class="typology">{{::carrelloCtrl.typology}}</p></div><div class="row"><label class="labelNeraGrande">{{::carrelloCtrl.categoryAndProposal}}</label></div><div class="row" ng-if="carrelloCtrl.isConto"><label class="labelGrigiaLight" style="padding-left:1px">{{carrelloCtrl.numPratiche()}}{{carrelloCtrl.getProducts()}}</label></div></div><div class="riga-section col-xs-24 col-md-6 date-container" style="margin-bottom: 9px"><div class="row"><label ng-class="{\'labelNeraPiccola\': !carrelloCtrl.expireThings.alarm, labelRossaPiccola: carrelloCtrl.expireThings.alarm}"><span ng-show="carrelloCtrl.expireThings.alarm" class="ico-comuni-campanella">&nbsp;</span> {{ ::carrelloCtrl.expireThings.remainingDaysString }}</label></div><div class="row"><p style="font-size: 15px">{{ ::carrelloCtrl.expireThings.expirationDateString }}</p></div></div><div class="riga-section col-xs-24 col-md-7 buttons-container"><div ng-if="::carrelloCtrl.getStatusLabel === \'\'" style="width: 100%"><div class="col-xs-11 col-md-9"><span class="icon-content-button" ng-click="carrelloCtrl.showAlertRemove(); $event.stopPropagation();"><span class="ico-azioni-elimina-cestino icon-button" style="line-height: 2"></span> <span class="icon-text-button">ELIMINA</span></span></div><div class="col-xs-11 col-md-15"><button class="vorrei_customBtn customBtn greyButton" style="margin-right:0" type="button" ng-click="carrelloCtrl.completaPratica(); $event.stopPropagation();">CONTINUA</button></div></div><div ng-if="::carrelloCtrl.getStatusLabel !== \'\'" style="width: 100%" class="status-label row"><div class="col-xs" style="margin-left: 2px"><label class="labelGrigiaBold">{{::carrelloCtrl.getStatusLabel}}</label></div><div class="col-xs-1 col-md-4"><div class="hintstato"><span role="button" class="help icon ico-comuni-c-help-n" style="font-size: 20px; margin-right: 5px; position: relative; top: -3px" popover-class="stepCell_popover" popover-trigger="none" popover-placement="auto bottom" popover-is-open="carrelloCtrl.popOverStato" popover-auto-close="true" ng-click="carrelloCtrl.changePopOverState()" uib-popover-template="\'stepCellPopoverTemplate1.html\'" aria-label="PREMI PER APRIRE TOOLTIP" role="button"></span><script type="text/ng-template" id="stepCellPopoverTemplate1.html"><div class="popover-inner">\r\n                                <button class="eliminaTooltip1 icon ico-azioni-elimina" style="margin-top: 0 !important;"\r\n                                        role="button" aria-label="Chiudi suggerimento"\r\n                                        ng-click="carrelloCtrl.changePopOverState()"></button>\r\n                                <div class="popover-content">\r\n                                    <span class="popover-binding" style="color: white; font-size: 11px;" ng-bind-html="::carrelloCtrl.getPopoverStatusText"></span>\r\n                                </div>\r\n\r\n                            </div></script></div></div></div></div><div class="col-xs-offset-1 col-xs-22" ng-show="carrelloCtrl.showError" style="margin-top: 12px"><span class="errore">Ci scusiamo ma, per un problema tecnico, questa pratica non è al momento disponibile. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</span></div></div></div>'),e.put("app/vorrei/carrello/carrello_old.html",'<div id="carrello"><div class="row riga"><!--<div class="carrello_card_center col-md-2 col-sm-2 col-xs-4">\r\n            <span ng-class="carrelloCtrl.icon"></span>\r\n        </div>--><div class="row"><div class="carrello_text_center carrello_center col-md-10 col-sm-6 col-xs-19"><div class="row"><p class="typology">{{::carrelloCtrl.typology}}</p></div><div class="row"><label ng-class="{\'labelNeraGrande\': carrelloCtrl.isConto, \'labelNeraGrandeCentro\': carrelloCtrl.isPrestito}">{{::carrelloCtrl.category}}</label></div><div class="row" ng-if="carrelloCtrl.isConto"><label class="labelGrigia" style="padding-left:1px">{{::carrelloCtrl.numPratiche}}{{carrelloCtrl.getProducts()}}</label></div></div><!--\r\n            <div class="carrello_text_center col-md-offset-0 col-sm-offset-0 col-xs-offset-4 col-md-8 col-sm-9 col-xs-20">\r\n                <div class="row">\r\n\r\n                </div>\r\n                <div class="row" ng-show="carrelloCtrl.from !== \'\'">\r\n                    <label class="labelVerdePiccola">{{::carrelloCtrl.from}}</label>\r\n                </div>\r\n            </div>--><div class="col-md-6"><div class=""><div class="row"><label ng-class="{\'labelNeraPiccola\': !carrelloCtrl.expireThings.alarm, labelRossaPiccola: carrelloCtrl.expireThings.alarm}"><span ng-show="carrelloCtrl.expireThings.alarm" class="ico-comuni-campanella">&nbsp;</span> {{ ::carrelloCtrl.expireThings.remainingDaysString }}</label></div><div class="row"><p style="font-size: 15px">{{ ::carrelloCtrl.expireThings.expirationDateString }}</p></div></div><!--<div ng-class="{\'wfm-state col-md-offset-0 col-sm-offset-0 col-xs-offset-4 col-md-4 col-sm-6 col-xs-12\': carrelloCtrl.isConto,\r\n                            \'wfm-state col-md-offset-0 col-sm-offset-0 col-xs-offset-4 col-md-7 col-sm-6 col-xs-18\': carrelloCtrl.isPrestito}"\r\n                    ng-if="carrelloCtrl.dettaglio.particular">\r\n                    <label class="labelNeraGrandeCentro">{{::carrelloCtrl.dettaglio.descrizioneWFM}}</label>\r\n                </div>--></div><!--<div ng-if="carrelloCtrl.isConto" ng-hide="carrelloCtrl.modifica && carrelloCtrl.showConfirm" class="col-xs-offset-0 col-md-offset-0 col-sm-offset-0 col-md-3 col-sm-3 col-xs-5"\r\n                style="padding-top: 22px;">\r\n                <label class="labelGrigia">{{::carrelloCtrl.status}}</label>\r\n            </div>\r\n            <div class="carrello_icon_center col-md-offset-3 col-sm-offset-0 col-xs-offset-5 col-md-2 col-sm-13 col-xs-2" ng-if="carrelloCtrl.isConto"\r\n                ng-hide="carrelloCtrl.modifica && carrelloCtrl.showConfirm">\r\n                <span class="custom-icon" ng-if="!carrelloCtrl.modifica" ng-class="{\'carrello_accordion icon ico-comuni-freccia-accordion-apri\': !carrelloCtrl.showDetail,\r\n                                 \'carrello_accordion icon ico-comuni-freccia-accordion-chiudi\': carrelloCtrl.showDetail}"></span>\r\n                <span ng-if="carrelloCtrl.modifica" class="custom-icon carrello_remove icon ico-comuni-esito-ko"></span>\r\n            </div>\r\n            <div class="carrello_icon_center col-md-1 col-sm-1 col-xs-2" ng-if="carrelloCtrl.isPrestito" ng-hide="carrelloCtrl.modifica && carrelloCtrl.showConfirm">\r\n                <span ng-if="!carrelloCtrl.modifica || !carrelloCtrl.dettaglio.eraseable" class="carrello_arrow icon ico-comuni-freccia-dx"></span>\r\n                <span ng-if="carrelloCtrl.modifica && carrelloCtrl.dettaglio.eraseable" class="carrello_remove icon ico-comuni-esito-ko"></span>\r\n            </div>--><div class="col-md-8 col-sm-7 col-xs-24 pull-right carrello_center" style="padding: 11px 0 11px 0; display: flex; align-items: center"><!--<div class="col-md-11 col-md-offset-1 col-sm-12 col-xs-12">\r\n                    <button class="col-xs-24 vorrei_removeAnnulla greyButton" type="button" ng-click="carrelloCtrl.cancelRemove(); $event.stopPropagation();">\r\n                        ANNULLA\r\n                    </button>\r\n                </div>--><div ng-if="::carrelloCtrl.getStatusLabel === \'\'" style="width: 100%"><span class="hideable-content-button" ng-click="carrelloCtrl.showAlertRemove(); $event.stopPropagation();"><span class="ico-azioni-elimina-cestino hideable-icon-button" style="line-height: 2"></span> <span class="hideable-text-button">ELIMINA</span> </span><button class="vorrei_customBtn customBtn greyButton" style="margin-right:0" type="button" ng-click="carrelloCtrl.completaPratica(); $event.stopPropagation();">CONTINUA</button></div><div ng-if="::carrelloCtrl.getStatusLabel !== \'\'" style="width: 100%"><label class="labelGrigia">{{::carrelloCtrl.getStatusLabel}}</label></div><!--<div class="col-md-11 col-md-offset-1 col-sm-12 col-xs-12">\r\n                    <button class="col-xs-24 vorrei_removeConferma greyButton" type="button" ng-click="carrelloCtrl.confirmRemove(); $event.stopPropagation();">\r\n                        CONTINUA\r\n                    </button>\r\n                </div>--><div class="col-md-3 hidden-sm col-xs-2"></div></div></div><div class="col-xs-offset-1 col-xs-22" ng-show="carrelloCtrl.showError" style="margin-top: 12px"><span class="errore">Ci scusiamo ma, per un problema tecnico, questa pratica non è al momento disponibile. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</span></div><!--dettaglio pratiche--><!--<div ng-if="carrelloCtrl.isConto && !carrelloCtrl.modifica" ng-show="carrelloCtrl.showDetail">\r\n            <div class="categoriaPratiche col-md-24 col-sm-24 col-xs-24" ng-click="$event.stopPropagation();">\r\n                <label class="labelNeraMedia" style="padding: 5px 10px 0px 0px; cursor: default !important">PRODOTTI BASE</label>\r\n                <span class="carrello_help icon ico-comuni-c-help-n" style="cursor:pointer" popover-class="carrello_popover"\r\n                    popover-append-to-body="true" popover-placement="top"  popover-trigger="outsideClick"\r\n                    uib-popover="Sono: XME Conto, Bancocard o Nextcard, Jiffy, XMe Salvadanaio">\r\n                </span>\r\n            </div>\r\n            <div ng-if="carrelloCtrl.dettaglio.prodottiBase.length > 0">\r\n                <div class="col-xs-24 rigaBianca">\r\n                    <div class="col-md-18 col-sm-18 col-xs-10">\r\n                        <label class="labelGrigia" style="padding: 22px 10px 22px 10px;">{{::carrelloCtrl.dettaglio.descrizioneProdottoBase}}</label>\r\n                    </div>\r\n                    <div class="carrello_text_center col-md-6 col-sm-6 col-xs-8 col-xs-offset-6 col-sm-offset-0">\r\n                        <button class="vorrei_customBtn customBtn greyButton" type="button" ng-click="carrelloCtrl.completaPratica(); $event.stopPropagation();">\r\n                            {{::carrelloCtrl.dettaglio.descrizioneWFM}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div ng-if="carrelloCtrl.dettaglio.online.length > 0" ng-click="$event.stopPropagation();">\r\n                <div class="categoriaPratiche col-md-24 col-sm-24 col-xs-24">\r\n                    <label class="labelNeraMedia" style="padding: 5px 10px 0px 0px; cursor: default !important">ATTIVABILI ONLINE</label>\r\n                    <span class="carrello_help icon ico-comuni-c-help-n" style="cursor:pointer" popover-class="carrello_popover"\r\n                        popover-append-to-body="true" popover-placement="top"  popover-trigger="outsideClick"\r\n                        uib-popover="Puoi acquistare i prodotti presenti in questa sezione direttamente dal sito della banca online.">\r\n                    </span>\r\n                </div>\r\n                <div class="col-xs-24 rigaBianca" style="cursor: default !important" ng-repeat="po in carrelloCtrl.dettaglio.online">\r\n                    <div class="col-md-24 col-sm-24 col-xs-24">\r\n                        <label class="labelGrigia" style="padding: 22px 10px 22px 19px; cursor: default !important">{{::po.descrizione}}</label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div ng-if="carrelloCtrl.dettaglio.filiale.length > 0">\r\n                <div class="categoriaPratiche col-md-24 col-sm-24 col-xs-24" ng-click="$event.stopPropagation();">\r\n                    <label class="labelNeraMedia" style="padding: 5px 10px 0px 0px; cursor: default !important">ATTIVABILI IN FILIALE</label>\r\n                    <span class="carrello_help icon ico-comuni-c-help-n" style="cursor:pointer" popover-class="carrello_popover"\r\n                        popover-append-to-body="true" popover-placement="top"  popover-trigger="outsideClick"\r\n                        uib-popover="Questi prodotti non sono acquistabili online. Prendi un appuntamento in filiale dalla sezione PARLA CON NOI, un gestore di riferimento ti aiuterà a completare la tua scelta.">\r\n                    </span>\r\n                </div>\r\n                <div class="col-xs-24 rigaBianca" ng-repeat="pf in carrelloCtrl.dettaglio.filiale" ng-click="carrelloCtrl.prendiAppuntamento(); $event.stopPropagation();">\r\n                    <div class="col-md-16 col-sm-16 col-xs-13">\r\n                        <label class="labelGrigia" style="padding: 22px 10px 22px 19px;">{{::pf.descrizione}}</label>\r\n                    </div>\r\n                    <div class="carrello_text_center col-md-6 col-sm-6 col-xs-9">\r\n                        <label class="labelGrigia">PRENDI APPUNTAMENTO IN FILIALE</label>\r\n                    </div>\r\n                    <div class="carrello_icon_center_internal col-md-2 col-sm-2 col-xs-3">\r\n                        <a><span class="carrello_arrow carrello_arrow_appt icon ico-comuni-freccia-dx"></span></a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>--><!--dettaglio pratiche--></div></div>'),e.put("app/tools/callmeback/cmb.html",'<div id="cmbMain" ng-if="cmb.enableCMB"><script>document.body.scrollTop = document.documentElement.scrollTop = 0;</script><!-- layout vetrina --><div ng-if="!cmb.fromgalleggiante" ng-init="cmb.manageSuspect()"><div ng-show="!cmb.showesito" class="row text-center containerCmb"><cmb-arguments arguments="cmb.arguments" notaargomenti="cmb.notaargomenti" fromgalleggiante="cmb.fromgalleggiante" errors="cmb.errors"></cmb-arguments><cmb-fasce fasce="cmb.fasce" dataselected="cmb.dataselected" fasciaselected="cmb.fasciaselected" arguments="cmb.arguments" istoday="cmb.istoday" fromgalleggiante="cmb.fromgalleggiante" errors="cmb.errors"></cmb-fasce><cmb-contacts nome="cmb.nome" cognome="cmb.cognome" cellulare="cmb.cellulare" email="cmb.email" flagsms="cmb.flagsms" flagemail="cmb.flagemail" privacy="cmb.privacy" istoday="cmb.istoday" disabilitabtn="cmb.disabilitabtn" fromgalleggiante="cmb.fromgalleggiante" errors="cmb.errors"></cmb-contacts><div class="row text-center" style="margin-top: 50px;margin-bottom: 30px"><div class="col-lg-14 col-lg-offset-5 col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><button class="col-md-4 col-sm-6 col-xs-24 customBtn greyButton" type="button" ng-click="cmb.btnAnnulla()">ANNULLA</button> <button class="col-md-4 col-sm-6 col-xs-24 customBtn greenBackground continua" type="button" ng-class="{\'customBtnDisabled disabled\': cmb.disabilitabtn == true}" ng-disabled="cmb.disabilitabtn == true" ng-click="cmb.btnContinua()">CONFERMA</button></div></div></div><div ng-show="cmb.showesito" class="row text-center"><cmb-esito esitook="cmb.esitook" showesito="cmb.showesito" disabilitabtn="cmb.disabilitabtn" arguments="cmb.arguments" argomentiformat="cmb.argomentiformat" fasciaselected="cmb.fasciaselected" dataselected="cmb.dataselected" cellulare="cmb.cellulare" nome="cmb.nome" flagsms="cmb.flagsms" flagemail="cmb.flagemail" istoday="cmb.istoday" fromgalleggiante="cmb.fromgalleggiante"></cmb-esito></div></div><!-- layout galleggiante --><div ng-if="cmb.fromgalleggiante"><div ng-if="!cmb.showesito" class="row text-center"><div ng-if="cmb.step == 1"><cmb-button esitook="cmb.esitook" fasciagalleggiante="cmb.fasciagalleggiante" argumentsgalleggiante="cmb.argumentsgalleggiante" fasciaselected="cmb.fasciaselected" cellulare="cmb.cellulare" flagsms="cmb.flagsms" flagemail="cmb.flagemail" fromgalleggiante="cmb.fromgalleggiante" email="cmb.email" cliente="cmb.cliente" appuntamento="cmb.appuntamento" logged="cmb.logged" orariovisualizzatoappt="cmb.orariovisualizzatoappt"></cmb-button></div><div ng-if="cmb.step == 2"><cmb-arguments argumentsgalleggiante="cmb.argumentsgalleggiante" notaargomenti="cmb.notaargomenti" fromgalleggiante="cmb.fromgalleggiante" errors="cmb.errors"></cmb-arguments></div><div ng-if="cmb.step == 3"><cmb-phone-number cellulare="cmb.cellulare" errors="cmb.errors" cliente="cmb.cliente" fromgalleggiante="cmb.fromgalleggiante" argumentsgalleggiante="cmb.argumentsgalleggiante" callmebackpersonal="cmb.callmebackpersonal" modalpersonalclient="cmb.modalpersonalclient"></cmb-phone-number></div><div ng-if="cmb.step == 4"><cmb-fasce fasce="cmb.fasce" dataselected="cmb.dataselected" fasciaselected="cmb.fasciaselected" argumentsgalleggiante="cmb.argumentsgalleggiante" fromgalleggiante="cmb.fromgalleggiante" fasciagalleggiante="cmb.fasciagalleggiante" fasciaselezionata="cmb.fasciaselezionata" dataselezionata="cmb.dataselezionata" istoday="cmb.istoday" errors="cmb.errors"></cmb-fasce></div><!-- nuova gestione promemoria\r\n          <div ng-if="cmb.step == 5">\r\n              <cmb-contacts nome="cmb.nome"\r\n                            cognome="cmb.cognome"\r\n                            cellulare="cmb.cellulare"\r\n                            email="cmb.email"\r\n                            flagsms="cmb.flagsms"\r\n                            flagemail="cmb.flagemail"\r\n                            fromgalleggiante="cmb.fromgalleggiante"\r\n                            istoday="cmb.istoday"\r\n                            errors="cmb.errors"\r\n                            argumentsgalleggiante="cmb.argumentsgalleggiante">\r\n              </cmb-contacts>\r\n          </div> --><!--Struttura bottoni--><div ng-show="cmb.verticalButton"><div class="row"><div class="col-md-12 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteAnnulla" ng-click="cmb.btnAnnullaIndietroGalleggiante()">{{cmb.labelBtnAnnullaIndietro}}</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteOK" ng-click="cmb.btnContinuaGalleggiante()">{{cmb.labelBtnContinua}}</button></div></div></div><div ng-show="cmb.horizontalButton"><!--contenitore bottoni step 2--><!--──────────────────────────────────CLIENTE PERSONAL - BTN CHE RIMANDA STEP ESITO DIRETTAMENTE───────────────────────────────--><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button class="col-md-22 col-sm-22 col-xs-22 customBtnPhoneNumberOK" ng-click="cmb.btnContinuaGalleggiante()">{{cmb.labelBtnContinua}}</button></div></div><div class="row" ng-if="cmb.callmebackpersonal"><div class="col-md-24 col-sm-24 col-xs-24"><button class="col-md-22 col-sm-22 col-xs-22 customBtnPhoneNumberOK" ng-click="cmb.isPersonalClient(true)">RICHIAMIAMI SUBITO</button></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button class="col-md-22 col-sm-22 col-xs-22 customBtnPhoneNumberAnnulla" ng-click="cmb.btnAnnullaIndietroGalleggiante()">{{cmb.labelBtnAnnullaIndietro}}</button></div></div></div><!--fine contenitore bottoni step 2--></div><!--fine struttura bottoni--><div ng-if="cmb.showesito" class="row text-center"><div ng-if="cmb.step == 5"><cmb-esito esitook="cmb.esitook" showesito="cmb.showesito" disabilitabtn="cmb.disabilitabtn" argumentsgalleggiante="cmb.argumentsgalleggiante" fasciaselected="cmb.fasciaselected" cellulare="cmb.cellulare" nome="cmb.nome" flagsms="cmb.flagsms" flagemail="cmb.flagemail" fromgalleggiante="cmb.fromgalleggiante" riepilogo="{{cmb.riepilogo}}" email="cmb.email" istoday="cmb.istoday" fasciagalleggiante="cmb.fasciagalleggiante" callmebackpersonal="cmb.callmebackpersonal" , errstorico="cmb.erroreStorico" errelimina="cmb.erroreElimina" errhouravailable="cmb.errhouravailable" riprova-cb="cmb.btnNewAppt()"></cmb-esito></div></div><div class="row" ng-if="cmb.showButtonEsito && !(cmb.erroreStorico || cmb.erroreElimina)"><button class="col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6 customBtnGallegianteOK" ng-click="cmb.btnContinuaGalleggiante()">{{cmb.labelBtnContinua}}</button></div><div class="row" ng-if="cmb.showButtonEsito && (cmb.erroreStorico || cmb.erroreElimina)"><button class="col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6 customBtnGallegianteOK" ng-click="cmb.close()">RIPROVA</button></div></div></div>'),
e.put("app/vorrei/timeoutSessione/timeoutSessione.html",'<div class="ErroreSessioneScaduta"><div class="container col-12"><img style="margin-bottom:30px" src="/ib/public/guestarea/assets/icn-sessione_scaduta_green.svg"><p class="title">Sessione scaduta</p><p class="subtitle">La connessione si è interrotta per inattività.</p><p class="subtitle">Accedi di nuovo.</p></div><div class="button-container"><isp-button class="isp-ib-submit" ng-click="timeoutSessioneCtrl.vaiAPaginaAccesso()">ACCEDI ALL’AREA OSPITI</isp-button></div></div>'),e.put("app/vorrei/wish/wish-modal-elimina.html",'<div id="appuntamentoModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="icon ico-comuni-chiudi" style="cursor:pointer; font-size: 20px"></span></button></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row" style="margin-bottom: 20px;font-size:15px"><b>{{wishModalEliminaCtrl.titolo}}</b></div></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row"></div></div></div><div class="row"><div class="col-md-5 col-sm-5 hidden-xs"><div class="row"><span class="icona icon ico-comuni-esito-face-ko" style="width:100px;height:75px;padding-left:25px;font-size:80px;color:#C83200"></span></div></div><div class="col-md-16 col-sm-18 col-xs-23 col-xs-offset-1"><div class="row text-center"><p class="scritte">Ci scusiamo ma, per un problema tecnico, non &egrave; possibile eliminare {{wishModalEliminaCtrl.testo}}. Per favore, riprova pi&ugrave; tardi. Per maggiori informazioni contattaci</p></div></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-6 col-md-offset-9 col-sm-8 col-sm-offset-8 col-xs-24" type="button" ng-click="$dismiss()">CHIUDI</button></div></div></div>'),e.put("app/vorrei/wish/wish.html",'<div id="wish"><div class="row riga" ng-click="wishCtrl.clickOnRow()"><div class="wish_card_center col-md-1 col-sm-1 col-xs-2"><span ng-class="wishCtrl.icon"></span></div><div class="whish_cuore col-md-1 col-sm-1 col-xs-2"><span class="icona_cuore ico-vorrei-c-cuore-n" ng-show="wishCtrl.dettaglio.isSimulazione"></span></div><div class="wish_text_center col-md-5 col-sm-6 col-xs-19"><label class="labelNeraGrande"><span ng-bind-html="wishCtrl.category"></span></label></div><div class="wish_text_center col-md-offset-0 col-sm-offset-0 col-xs-offset-4 col-md-8 col-sm-8 col-xs-20"><label class="labelNeraGrande"><span ng-bind-html="wishCtrl.description"></span></label></div><div class="expiration col-md-offset-0 col-sm-offset-0 col-xs-offset-4 col-md-7 col-sm-5 col-xs-18" ng-hide="wishCtrl.modifica && wishCtrl.showConfirm"><div class="row"><label ng-class="{\'labelNeraPiccola\': !wishCtrl.expireThings.alarm, labelRossaPiccola: wishCtrl.expireThings.alarm}"><span ng-show="wishCtrl.expireThings.alarm" class="ico-comuni-campanella">&nbsp;</span> {{ ::wishCtrl.expireThings.remainingDaysString }}</label></div><div class="row"><label class="labelGrigia">{{ ::wishCtrl.expireThings.expirationDateString }}</label></div></div><div class="col-md-1 col-sm-1 col-xs-2 wish_adjustments" style="padding: 0px 15px 0px 0px"><div class="wish_icon_center col-md-1 col-sm-1 col-xs-2" ng-hide="wishCtrl.modifica && wishCtrl.showConfirm"><span ng-if="!wishCtrl.modifica || !wishCtrl.eraseable" class="wish_arrow icon ico-comuni-freccia-dx"></span> <span ng-if="wishCtrl.modifica && wishCtrl.eraseable" class="wish_remove icon ico-comuni-esito-ko"></span></div></div><div ng-if="wishCtrl.showAskConfirm()" class="removeConfirm col-md-8 col-sm-7 col-xs-24 pull-right"><div class="col-md-11 col-md-offset-1 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 vorrei_removeAnnulla greyButton" type="button" ng-click="wishCtrl.cancelRemove(); $event.stopPropagation();">ANNULLA</button></div><div class="col-md-11 col-md-offset-1 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 vorrei_removeConferma greyButton" type="button" ng-click="wishCtrl.confirmRemove(); $event.stopPropagation();">CONFERMA</button></div></div><div class="col-xs-offset-1 col-xs-22" ng-show="wishCtrl.showError" style="margin-top: 12px"><span class="errore">Ci scusiamo ma, per un problema tecnico, questa configurazione conto non è al momento disponibile. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</span></div></div></div>'),e.put("app/services/sessionAliveManager/modal/sessionIsExpiringModal.html",'<style>.session-modal {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n    .session-is-expiring {\r\n        font-size: 15px;\r\n    }\r\n\r\n    .session-seconds-expiring {\r\n        font-size: 2.7em;\r\n        font-weight: bold;\r\n        /*margin-top: 10px;\r\n        margin-bottom: 10px;*/\r\n    }\r\n\r\n    .my_custom_button_to_stay_connected{\r\n        background-color: lightgreen;\r\n    }\r\n\r\n    .buttons{\r\n        display: flex;\r\n        justify-content: center;\r\n    }</style><!--<div class="row">\r\n    <div class="col-xs-24">\r\n        <p class="text-center" style="font-size: 20px; margin-top: -30px;">SESSIONE IN SCADENZA!</p>\r\n    </div>\r\n    <div class="col-xs-24">\r\n        <div class="session-modal">\r\n            <div class="session-is-expiring">\r\n                La sessione sta per scadere tra:\r\n            </div>\r\n            <div class="session-seconds-expiring">\r\n                {{keepaliveModalCtrl.remainingSecondsModal}} secondi\r\n            </div>\r\n            <div>\r\n                <b>Premi il bottone</b> per rimanere connesso al sito\r\n            </div>\r\n            <div>\r\n                <br>\r\n                <isp-button ng-click="stayConnected();" class="btn btn-primary isp-ib-submit">\r\n                    <div>RIMANI CONNESSO</div>\r\n                </isp-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n--><div><div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="text-center row" style="margin-bottom: 20px;font-size:20px"><b>SESSIONE IN SCADENZA!</b></div></div></div><div class="row session-modal"><div class="session-is-expiring">La sessione sta per scadere tra:</div><div class="session-seconds-expiring">{{keepaliveModalCtrl.remainingSeconds}} secondi</div></div><div style="font-size: 15px; text-align: center"><b>Premi il bottone</b> per rimanere connesso al sito</div></div><div class="row buttons"><div class="col-xs-14"><button class="customBtn greenBackground" type="button" ng-click="keepaliveModalCtrl.stayConnectedButton();" style="width: 100%" id="keepAliveButton">RIMANI CONNESSO</button></div></div></div>'),e.put("app/tools/callmeback/widgets/cmbButton/cmbButton.html",'<div id="cmbButton" ng-if="!ctrl.fromgalleggiante"><div ng-if="!ctrl.appuntamento"><button class="customBtn greyButton" type="submit" style="height: 41px; margin-top: 0px;border-radius: 5px" ng-click="ctrl.callmeback()" ng-disabled="ctrl.disabled" ng-class="{\'customBtnDisabled disabled\': ctrl.disabled}"><span class="ico-parlacon-callme-back">TI RICHIAMIAMO NOI</span></button></div><div ng-if="ctrl.appuntamento"><div class="box text-center"><p>Ti richiamiamo noi il</p><p><b>{{ctrl.date}}</b>, ore {{ctrl.hour}}</p><hr><div class="row"><div class="col-xs-10" ng-if="model.isCMB"><a class="link" ng-class="{\'disabled\': !ctrl.editable}" ng-click="ctrl.editable && ctrl.modifica()">MODIFICA</a></div><div class="col-xs-10" ng-class="{\'col-xs-offset-7\': !model.isCMB, \'col-xs-offset-4\': model.isCMB}"><a class="link" ng-class="{\'disabled\': !ctrl.removable}" ng-click="ctrl.removable && ctrl.elimina()">ELIMINA</a></div></div></div></div></div><!-- Appt Galleggiante--><div id="cmbButtonGalleggiante" ng-if="ctrl.fromgalleggiante"><div ng-if="ctrl.showCmbButton" ng-click="ctrl.hideBlock()"><div class="col-md-4 col-sm-4 col-xs-4"><span class="icona ico ico-parlacon-callme-back iconaParlaconNoi pull-left"></span></div><div class="col-md-20 col-sm-20 col-xs-20"><p><a class="linkParlaconNoi pull-left">TI RICHIAMIAMO NOI</a></p></div></div><!-- Utente loggato --><div ng-if="ctrl.logged && !ctrl.showCmbButton"><!-- Appt esistente --><div ng-if="ctrl.appuntamento"><div ng-if="!ctrl.modalElimina && !ctrl.datiMancanti" style="margin-top: 10px"><div class="customContainer"><p class="cmbSottotitoloParagrafoGalleggiante">Il <b>{{ctrl.orariovisualizzatoappt.giorno}}</b> hai preso un appuntamento telefonico per parlare con noi di <b>{{ctrl.riepilogo}}</b>.</p><p class="cmbSottotitoloParagrafoGalleggiante">Hai scelto di essere contattato tra le <b>{{ctrl.orariovisualizzatoappt.ora[0]}}</b> e le <b>{{ctrl.orariovisualizzatoappt.ora[1]}}</b>. Ti richiameremo al numero <b>{{ctrl.cellulare}}</b>.</p><p class="cmbSottotitoloParagrafoGalleggiante">Se lo desideri, puoi modificare il tuo appuntamento o integrarlo con altri argomenti o eliminarlo.</p><div class="row"><div class="col-sm-24 col-xs-24"><hr class="customHr"></div></div><div class="row"><div class="col-md-12 col-sm-12 col-xs-12" ng-if="ctrl.isCMB"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteAnnulla" ng-class="{\'disabled\': !ctrl.editable}" ng-click="ctrl.editable && ctrl.gestioneAppuntamento(\'modAppt\')">MODIFICA</button></div><div ng-class="{\'col-md-24 col-sm-24 col-xs-24\': !ctrl.isCMB, \'col-md-12 col-sm-12 col-xs-12\': ctrl.isCMB}"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteOK" ng-class="{\'disabled\': !ctrl.removable}" ng-click="ctrl.removable && ctrl.gestioneAppuntamento(\'openModal\')">ELIMINA</button></div></div></div></div><!-- Modale elimina--><div ng-if="ctrl.modalElimina"><div class="row text-center"><div class="col-md-24 col-sm-24 col-xs-24"><div class="row text-center"><p class="cmbTitoloGalleggiante">ELIMINA APPUNTAMENTO TELEFONICO</p></div><div class="row text-center" style="margin-top:20px"><span class="icona ico ico-comuni-c-alert-n iconaGalleggiante"></span></div><div class="row text-center"><p class="cmbTestoGalleggiante">Sei sicuro di voler eliminare l\'appuntamento telefonico?</p></div></div></div><div class="row"><div class="col-md-12 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteAnnulla" ng-click="ctrl.gestioneAppuntamento(\'annullaAppt\')">NO, ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteOK" ng-click="ctrl.gestioneAppuntamento(\'delAppt\')">Si, ELIMINA</button></div></div></div><!--fine modale elimina--></div><!--fine appt esistente --><!-- Appt non esistente --><div ng-if="!ctrl.appuntamento" ng-init="ctrl.gestioneAppuntamento(\'richiamiamoNoi\')"></div><!-- fine Appt non esistente --></div><!--fine utente loggato --><!-- Utente non loggato --><div ng-if="!ctrl.logged && !ctrl.showCmbButton"><div class="row text-center"><p class="cmbTitoloGalleggiante">TI RICHIAMIAMO NOI</p></div><div class="row text-center"><p class="cmbSottotitoloParagrafoGalleggiante">Scegli di essere chiamato dalla filiale online nel giorno e all\'ora che preferisci. Per continuare registrati all\'area ospiti. Se sei già registrato, entra subito.</p></div><div style="margin-top: 50px"><div class="row" style="margin-bottom: 20px"><div class="col-md-24 col-sm-24 col-xs-24"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteAnnulla" ng-click="ctrl.gestioneUtente()">REGISTRATI</button></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteOK" ng-click="ctrl.gestioneUtente(\'accedi\')">ENTRA</button></div></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24 text-center" style="margin-top: 20px"><p class="cmbSottotitoloParagrafoGalleggiante">Sei già cliente?</p><p><a class="linkParlaconNoi" ng-click="ctrl.entraIB()">ENTRA NELLA BANCA ONLINE</a></p></div></div></div></div><!-- fine utente non loggato --></div><!-- fine appt Galleggiante-->'),e.put("app/tools/callmeback/widgets/cmbButton/eliminaAppt.html",'<div id="eliminaApptModal"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><button type="button" class="close" ng-click="$dismiss()"><span class="ico-comuni-chiudi" style="font-size: 20px"></span></button></div></div><div ng-if="eliminaApptCtrl.firstStep"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24" style="margin-bottom: 15px"><label class="labelNeraGrande">ELIMINA APPUNTAMENTO</label></div></div><div class="row"><div class="div-alert col-md-5 col-sm-5 col-xs-24"><span class="icona-alert ico-comuni-c-alert-n"></span></div><div class="scritte col-md-offset-1 col-sm-offset-1 col-xs-offset-0 col-md-18 col-sm-18 col-xs-24" style="margin-top: 35px; margin-bottom: 15px"><p>Sei sicuro di voler eliminare il tuo Appuntamento telefonico?</p></div></div><div class="row buttons"><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greyButton col-md-12 col-sm-12 col-xs-12" type="button" ng-click="$dismiss()" style="float:left">NO, ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="customBtn greenBackground col-md-12 col-sm-12 col-xs-12" type="button" ng-click="eliminaApptCtrl.eliminaAppt()" style="float:right">SI, ELIMINA</button></div></div></div><div ng-if="!eliminaApptCtrl.firstStep && !eliminaApptCtrl.error"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24" style="margin-bottom: 15px"><label class="labelNeraGrande">IL TUO APPUNTAMENTO È STATO CANCELLATO</label></div></div><div class="row"><div class="div-esito-ok col-md-5 col-sm-5 col-xs-24"><span class="icona-ok ico-cf-face-good-n"></span></div><div class="esito-ok scritte col-md-offset-1 col-sm-offset-1 col-xs-offset-0 col-md-18 col-sm-18 col-xs-24"><p>Il tuo appuntamento &egrave; stato eliminato con successo.</p></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="$dismiss()">CHIUDI</button></div></div></div><div ng-if="!eliminaApptCtrl.firstStep && eliminaApptCtrl.error"><div class="row"><div class="text-center col-md-24 col-sm-24 col-xs-24" style="margin-bottom: 15px"><label class="labelNeraGrande">ERRORE DURANTE LA CANCELLAZIONE DEL TUO APPUNTAMENTO</label></div></div><div class="row"><div class="div-esito-ko col-md-5 col-sm-5 col-xs-24"><span class="icona-ko ico-cf-face-bad-n"></span></div><div class="esito-ko scritte col-md-offset-1 col-sm-offset-1 col-xs-offset-0 col-md-18 col-sm-18 col-xs-24"><p>Ci scusiamo ma, per un problema tecnico, la cancellazione del tuo appuntamento non è andato a buon fine. Per favore, riprova più tardi. Per maggiori informazioni contattaci.</p></div></div><div class="row buttons"><div class="col-md-24 col-sm-24 col-xs-24"><button class="customBtn greenBackground col-md-12 col-md-offset-6 col-sm-12 col-sm-offset-6 col-xs-12 col-xs-offset-6" type="button" ng-click="$dismiss()">CHIUDI</button></div></div></div></div>'),e.put("app/tools/callmeback/widgets/cmbContacts/cmbContacts.html",'<div id="cmbContacts" style="margin-top:30px" ng-if="!ctrl.fromgalleggiante"><div class="row text-center"><div class="col-md-11 col-sm-11 col-xs-10 col-height"><hr></div><div class="col-md-2 col-sm-2 col-xs-4 col-height"><span class="icon ico-ops-personafisica" style="font-size:40px;color:#C1C1C1"></span></div><div class="col-md-11 col-sm-11 col-xs-10 col-height"><hr></div></div><div class="row text-center"><p class="cmbTitoloParagrafo">Informazioni personali</p></div><div class="row text-center"><img src="/ib/public/guestarea/assets/infinito.png"></div><!-- <div class="row text-center">\r\n        <p class="cmbSottotitoloParagrafo col-xs-22 col-xs-offset-1">Inserisci il tuo nome e cognome e il cellulare su cui ricevere la nostra chiamata.</p>\r\n    </div> --><div class="row" ng-init="ctrl.checkStringLength()"><div class="col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><!-- nome/cognome --><div class="row"><div class="col-md-12 col-sm-12 col-xs-24"><p class="labelOverInput">Nome*</p><input type="text" maxlength="50" ng-model="ctrl.nome" class="visible-xs hidden-md hidden-sm col-xs-24 inputTextContacts" ng-blur="ctrl.checkNome()" ng-class="{\'inputTextContactsError\': ctrl.errors.nome || ctrl.errors.nomeVuoto}" required><div class="col-xs-12 visible-xs hidden-md hidden-sm"><div ng-show="ctrl.errors.nome === true"><span class="cmbErrore">Il nome può contenere solo caratteri alfabetici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errors.nomeVuoto === true"><span class="cmbErrore">Campo obbligatorio: compila per proseguire</span></div></div></div><div class="col-md-12 col-sm-12 col-xs-24"><p class="labelOverInput">Cognome*</p><input type="text" maxlength="50" ng-model="ctrl.cognome" class="visible-xs hidden-md hidden-sm col-xs-24 inputTextContacts" ng-blur="ctrl.checkCognome()" ng-class="{\'inputTextContactsError\': ctrl.errors.cognome || ctrl.errors.cognomeVuoto}" required><div class="col-xs-12 visible-xs hidden-md hidden-sm"><div ng-show="ctrl.errors.cognome === true"><span class="cmbErrore">Il cognome può contenere solo caratteri alfabetici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errors.cognomeVuoto === true"><span class="cmbErrore">Campo obbligatorio: compila per proseguire</span></div></div></div></div><div class="row hidden-xs"><div class="col-md-12 col-sm-12"><input type="text" maxlength="50" class="col-md-11 col-sm-11 inputTextContacts" style="margin-right:30px;text-transform: capitalize" ng-model="ctrl.nome" ng-blur="ctrl.checkNome()" ng-class="{\'inputTextContactsError\': ctrl.errors.nome || ctrl.errors.nomeVuoto}" required>&nbsp;</div><div class="col-md-12 col-sm-12 col-xs-24"><input type="text" maxlength="50" class="col-md-11 col-sm-11 inputTextContacts" style="text-transform: capitalize" ng-model="ctrl.cognome" ng-blur="ctrl.checkCognome()" ng-class="{\'inputTextContactsError\': ctrl.errors.cognome || ctrl.errors.cognomeVuoto}" required>&nbsp;</div></div><div class="row"><div class="col-md-12 col-sm-12 hidden-xs"><div ng-show="ctrl.errors.nome === true"><span class="cmbErrore">Il nome può contenere solo caratteri alfabetici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errors.nomeVuoto === true"><span class="cmbErrore">Campo obbligatorio: compila per proseguire</span></div></div><div class="col-md-12 col-sm-12 hidden-xs"><div ng-show="ctrl.errors.cognome === true"><span class="cmbErrore">Il cognome può contenere solo caratteri alfabetici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errors.cognomeVuoto === true"><span class="cmbErrore">Campo obbligatorio: compila per proseguire</span></div></div></div><!-- numero cellulare/email --><div class="row"><div class="col-md-12 col-sm-12 col-xs-24"><p class="labelOverInput">Cellulare*</p><input type="tel" ng-model="ctrl.cellulare" maxlength="10" class="visible-xs hidden-md hidden-sm col-xs-24 inputTextContacts" ng-blur="ctrl.checkCellulare()" ng-class="{\'inputTextContactsError\': ctrl.errors.cellulare || ctrl.errors.cellulareVuoto}" required><div class="col-xs-24 visible-xs hidden-md hidden-sm"><div ng-show="ctrl.errors.cellulare === true"><span class="cmbErrore">Il numero di cellulare deve essere composto da 9 a 10 caratteri numerici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errors.cellulareVuoto === true"><span class="cmbErrore">Campo obbligatorio: compila per proseguire</span></div></div></div><div class="col-md-12 col-sm-12 col-xs-24"><p class="labelOverInput">Email<span class="help ico-comuni-c-help-n"></span></p><div class="visible-xs hidden-md hidden-sm col-xs-24"><p style="float: left;margin-top: 15px;margin-left: 5px;margin-bottom: 10px">{{ctrl.email}}</p></div><div class="col-xs-24 visible-xs hidden-md hidden-sm"><div class="col-md-22 col-sm-22 col-xs-22"><div ng-show="ctrl.errors.email === true"><span class="cmbErrore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div></div></div></div></div><div class="row hidden-xs"><div class="col-md-12 col-sm-12"><input type="tel" maxlength="10" class="col-md-11 col-sm-11 inputTextContacts" style="margin-right:30px" ng-model="ctrl.cellulare" ng-blur="ctrl.checkCellulare()" ng-class="{\'inputTextContactsError\': ctrl.errors.cellulare || ctrl.errors.cellulareVuoto}" required>&nbsp;</div><div class="col-md-12 col-sm-12"><div class="col-md-24 col-sm-24"><p style="float: left;margin-top: 15px;margin-left: 5px" title="{{ctrl.email}}">{{ctrl.email_truncate}}</p></div></div></div><div class="row"><div class="col-md-12 col-sm-12 hidden-xs"><div ng-show="ctrl.errors.cellulare == true"><span class="cmbErrore">Il numero di cellulare deve essere composto da 9 a 10 caratteri numerici. Per favore, verifica e riprova.</span></div><div ng-show="ctrl.errors.cellulareVuoto == true"><span class="cmbErrore">Campo obbligatorio: compila per proseguire</span></div></div><div class="col-md-12 col-sm-12 hidden-xs"><div ng-show="ctrl.errors.email == true"><span class="cmbErrore">L\'email deve contenere un indirizzo di posta elettronica valido. Per favore, verifica e riprova.</span></div></div></div><div class="row" style="margin-top:10px"></div><div class="row" style="margin-top:10px"><div class="hr"></div></div><!-- nuova gestione promemoria --><div ng-if="!ctrl.istoday"><div class="row text-center"><p class="cmbTitoloParagrafo">Promemoria</p></div><div class="row text-center"><img src="/ib/public/guestarea/assets/infinito.png"></div><div class="row" style="margin-bottom: 10px;margin-left:5px"><p class="cmbTestoParagrafo" title="{{ctrl.cellulare_tip}}"><b>Riceverai il promemoria dell\'appuntamento via SMS al numero {{ctrl.cellulare}}</b></p></div></div><!-- fine nuova gestione promemoria --><!-- vecchia gestione promemoria \r\n            <div class="row text-center">\r\n                <p class="cmbTitoloParagrafo">Vuoi essere sicuro di non dimenticare l\'appuntamento? Scegli come ricevere il tuo promemoria</p>\r\n            </div>\r\n            <div class="row text-center"><img src="/ib/public/guestarea/assets/infinito.png"></div>\r\n            <div class="row" style="margin-bottom: 10px;margin-left:5px;">\r\n                <div class="col-md-11 col-sm-11 col-xs-24">\r\n                    <input style="float:left;" id="flagSmsId" type="checkbox" name="1" value="false" ng-click="ctrl.checkFlagSmsEmail()"/>\r\n                    <p class="cmbTestoParagrafoCheckbox" title="{{ctrl.cellulare_tip}}"><b>{{ctrl.cellulare_truncate}}</b></p>\r\n                </div>\r\n                <div class="col-md-11 col-md-offset-2 col-sm-11 col-sm-offset-2 col-xs-24">\r\n                    <input style="float:left;" id="flagEmailId" type="checkbox" name="2" value="false" ng-click="ctrl.checkFlagSmsEmail()"/>\r\n                    <p class="cmbTestoParagrafoCheckbox" title="{{ctrl.email_tip}}">\r\n                        <b>{{ctrl.email_tip_truncate}}</b>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div class="row" ng-show="ctrl.errors.flagSmsEmail" style="float:left">\r\n                <span class="cmbErrore">Seleziona almeno un valore</span>\r\n            </div>\r\n            --><div class="row visible-xs" style="margin-top:10px"></div><div class="col-md-24 col-sm-24 col-xs-24"><hr></div><div class="row"><p class="col-md-24 col-xs-24 cmbTestoParagrafo">* Campi obbligatori</p></div><div class="row" style="margin-top:-10px"></div><div class="row col-md-24 col-sm-24 col-xs-24" style="margin-bottom: 10px;margin-left:5px"><input style="float:left" id="flagPrivacyId" type="checkbox" name="3" value="3" ng-click="ctrl.checkPrivacy()"><p class="col-md-22 col-sm-22 col-xs-21 cmbTestoParagrafoCheckbox">Confermo di aver preso visione dell\'<a href="/content/dam/vetrina/documenti/privacy/informativa_intesa_sanpaolo.pdf" target="_blank" class="linkInformativa"><b>INFORMATIVA SULLA PRIVACY</b></a></p></div><div class="row" ng-show="ctrl.errors.privacy" style="float:left"><span class="cmbErrore">Conferma la presa visione</span></div></div></div></div><div id="cmbGalleggianteContacts" ng-if="ctrl.fromgalleggiante" ng-init="ctrl.checkStringLength()"><div class="row text-center"><p class="cmbGalleggianteTitoloParagrafo">TI RICHIAMIAMO NOI</p></div><div class="row text-center"><p class="cmbGalleggianteSottotitoloParagrafo">{{ctrl.sottotitoloGalleggiante}}</p></div><div class="row"><div class="col-md-3 col-sm-3 col-xs-3"><p class="cmbGalleggianteTestoParagrafoCheckbox"><input type="checkbox" ng-model="ctrl.flagsms" id="flagSmsId" ng-click="ctrl.checkFlagSmsEmail()"></p></div><div class="col-md-21 col-sm-21 col-xs-21"><p class="cmbGalleggianteTestoParagrafoCheckbox"></p><p class="cmbGalleggiantePromem" ng-class="{\'changeColor\': ctrl.flagsms,\'pull-left\':true}" title="{{ctrl.cellulare_tip}}">{{ctrl.cellulare_truncate}}</p><p></p></div></div><div class="row"><div class="col-md-3 col-sm-3 col-xs-3"><p class="cmbGalleggianteTestoParagrafoCheckbox"><input type="checkbox" ng-model="ctrl.flagemail" id="flagEmailId" ng-click="ctrl.checkFlagSmsEmail()"></p></div><div class="col-md-21 col-sm-21 col-xs-21" style="word-wrap:normal"><p class="cmbGalleggianteTestoParagrafoCheckbox"></p><p class="cmbGalleggiantePromem" title="{{ctrl.email_tip}}" ng-class="{\'changeColor\': ctrl.flagemail,\'pull-left\':true}">{{ctrl.email_tip_truncate}}</p><p></p></div></div><div class="row" ng-show="ctrl.errors.flagSmsEmail"><div style="margin: 0px 0px 30px 0px"><span class="cmbErroreGalleggiante">Seleziona almeno un valore</span></div></div></div>'),e.put("app/tools/callmeback/widgets/cmbArguments/cmbArguments.html",'<div id="cmbArguments" ng-if="!ctrl.fromgalleggiante"><div class="row text-center"><p class="cmbTitoloParagrafo">Ti richiamiamo noi</p></div><div class="row text-center"><img src="/ib/public/guestarea/assets/infinito.png"></div><div class="row visible-xs" style="margin-top:20px"></div><div class="row text-center"><p class="col-xs-22 col-xs-offset-1 cmbTitoloParagrafo">Scegli l\'argomento di cui vuoi parlare e quando preferisci ricevere la nostra chiamata</p></div><!-- rimosso defect 13933\r\n    <div class="row text-center">\r\n        <p class="cmbTitoloParagrafo col-xs-22 col-xs-offset-1">Seleziona gli argomenti di cui vuoi parlare</p>\r\n    </div> --><div class="row text-center"><img src="/ib/public/guestarea/assets/infinito.png"></div><div class="row"><div class="col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2"><div class="row" style="margin: 40px 0px 15px 0px"><div class="row"><div class="col-md-24 col-sm-24 col-xs-24"><div class="col-md-4 col-sm-4 col-xs-8" style="margin-top:10px"><span class="icona icon cmb-ico-callmeback-conti-carte" style="cursor:pointer" ng-class="{\'deselected\': !ctrl.argomenti[0].selezionato, \'selected\': ctrl.argomenti[0].selezionato}" ng-click="ctrl.toSelect(0)"></span><div class="row textUnderArgument" ng-class="{\'testoVerde\': ctrl.argomenti[0].selezionato}">{{ctrl.argomenti[0].argomento | uppercase}}</div></div><div class="col-md-4 col-sm-4 col-xs-8" style="margin-top:10px"><span class="icona icon cmb-ico-callmeback-assicurazioni" style="cursor:pointer" ng-class="{\'deselected\': !ctrl.argomenti[1].selezionato, \'selected\': ctrl.argomenti[1].selezionato}" ng-click="ctrl.toSelect(1)"></span><div class="row textUnderArgument" ng-class="{\'testoVerde\': ctrl.argomenti[1].selezionato}">{{ctrl.argomenti[1].argomento | uppercase}}</div></div><div class="col-md-4 col-sm-4 col-xs-8" style="margin-top:10px"><span class="icona icon cmb-ico-callmeback-finanziamenti" style="cursor:pointer" ng-class="{\'deselected\': !ctrl.argomenti[2].selezionato, \'selected\': ctrl.argomenti[2].selezionato}" ng-click="ctrl.toSelect(2)"></span><div class="row textUnderArgument" ng-class="{\'testoVerde\': ctrl.argomenti[2].selezionato}">{{ctrl.argomenti[2].argomento | uppercase}}</div></div><div class="col-md-4 col-sm-4 col-xs-8" style="margin-top:10px"><span class="icona icon cmb-ico-callmeback-investimenti" style="cursor:pointer" ng-class="{\'deselected\': !ctrl.argomenti[3].selezionato, \'selected\': ctrl.argomenti[3].selezionato}" ng-click="ctrl.toSelect(3)"></span><div class="row textUnderArgument" ng-class="{\'testoVerde\': ctrl.argomenti[3].selezionato}">{{ctrl.argomenti[3].argomento | uppercase}}</div></div><div class="col-md-4 col-sm-4 col-xs-8" style="margin-top:10px"><span class="icona icon cmb-ico-callmeback-previdenza" style="cursor:pointer" ng-class="{\'deselected\': !ctrl.argomenti[4].selezionato, \'selected\': ctrl.argomenti[4].selezionato}" ng-click="ctrl.toSelect(4)"></span><div class="row textUnderArgument" ng-class="{\'testoVerde\': ctrl.argomenti[4].selezionato}">{{ctrl.argomenti[4].argomento | uppercase}}</div></div><div class="col-md-4 col-sm-4 col-xs-8" style="margin-top:10px"><span class="icona icon cmb-ico-callmeback-altro" style="cursor:pointer" ng-class="{\'deselected\': !ctrl.argomenti[5].selezionato, \'selected\': ctrl.argomenti[5].selezionato}" ng-click="ctrl.toSelect(5)"></span><div class="row textUnderArgument" ng-class="{\'testoVerde\': ctrl.argomenti[5].selezionato}">{{ctrl.argomenti[5].argomento | uppercase}}</div></div></div></div></div></div></div><div class="row text-center"><div ng-show="ctrl.errors.argumentsVuoto == true"><span class="cmbErrore">Selezionare almeno un argomento.</span></div><div ng-show="ctrl.errors.argumentsMaxNumber == true"><span class="cmbErrore">Puoi selezionare massimo 5 argomenti.</span></div></div><!-- commentato\r\n    <div class="row">\r\n        <div class="col-md-14 col-md-offset-5 col-sm-14 col-sm-offset-5 col-xs-20 col-xs-offset-2">\r\n            <div class="row">\r\n                <p class="labelOverInput">Se lo desideri, aggiungi una nota</p>\r\n            </div>\r\n            <input type="text" class="inputTextArgomento" ng-model="ctrl.notaargomenti" />\r\n        </div>\r\n    </div> --></div><!--********** Galleggiante step1 ********** --><div id="cmbGalleggianteArguments" ng-if="ctrl.fromgalleggiante"><div class="row text-center"><p class="cmbGalleggianteTitoloParagrafo">TI RICHIAMIAMO NOI</p></div><div class="row text-center"><p class="cmbGalleggianteSottotitoloParagrafo">Di quale argomento desideri parlare?</p></div><div class="row" ng-repeat="argomenti in ctrl.galleggianteArguments"><div class="col-md-12 col-sm-12 col-xs-12"><p class="cmbGalleggianteTestoParagrafoCheckbox" ng-class="{\'changeColor\': argomenti.right.selezionato}"><input type="checkbox" ng-click="ctrl.toSelectGalleggiante(argomenti.right)" ng-checked="argomenti.right.selezionato">{{argomenti.right.argomento}}</p></div><div class="col-md-12 col-sm-12 col-xs-12"><p class="cmbGalleggianteTestoParagrafoCheckbox" ng-class="{\'changeColor\': argomenti.left.selezionato}">{{argomenti.left.argomento}} <input style="float:left" type="checkbox" ng-click="ctrl.toSelectGalleggiante(argomenti.left)" ng-checked="argomenti.left.selezionato"></p></div></div><div class="col-md-24 col-sm-24 col-xs-24"><div ng-show="ctrl.errors.argumentsVuotoGalleggiante == true"><span class="cmbErroreGalleggiante pull-left">Selezionare almeno un argomento.</span></div><div ng-show="ctrl.errors.argumentsMaxNumber == true"><span class="cmbErroreGalleggiante pull-left">Puoi selezionare massimo 5 argomenti.</span></div></div><div class="col-md-24 col-sm-24 col-xs-24" style="margin-bottom:22px"></div></div><!--**********Fine Galleggiante step1 ********** -->'),e.put("app/tools/callmeback/widgets/cmbEsito/cmbEsito.html",'<div id="cmbEsito" style="margin-top:30px" ng-if="!ctrl.fromgalleggiante"><div class="row text-center containerCmb" style="margin-top: 20px"><div class="col-lg-12 col-lg-offset-6 col-md-16 col-md-offset-4 col-sm-20 col-sm-offset-2 col-xs-20 col-xs-offset-2"><!-- esito positivo --><div ng-if="ctrl.esitook == true"><div class="row text-center" style="margin-top:50px"><span class="esito-ok ico-cf-face-good-n"></span></div><div class="row text-center col-xs-20 col-xs-offset-2"><p class="cmbTitoloParagrafoEsito">{{ctrl.txtEsito}}</p></div><div class="row text-left box col-md-22 col-md-offset-1 col-sm-22 col-sm-offset-1 col-xs-20 col-xs-offset-2"><p class="cmbSottotitoloParagrafoEsito" style="margin-bottom: 10px">Ti richiameremo <b>{{ctrl.dataselected}}</b> tra le <b>{{ctrl.fasciaselected[0]}}</b> e le <b>{{ctrl.fasciaselected[1]}}</b> al numero <b>{{ctrl.cellulare}}</b> per parlare di <b>{{ctrl.argomentiformat}}</b>.<br></p><p class="cmbSottotitoloParagrafoEsito">Abbiamo salvato il tuo appuntamento nella sezione <a ng-click="ctrl.btnAppuntamenti()"><b>PROMEMORIA</b></a> dove lo puoi consultare, modificare o eliminare in ogni momento.<!-- inizio nuova gestione promemoria --></p><p ng-if="!ctrl.istoday">Ti invieremo un promemoria <b>via SMS</b> qualche giorno prima.</p><!-- fine gestione promemoria --><!-- vecchia gestione promemoria \r\n                        <p ng-if="ctrl.flagsms || ctrl.flagemail">Ti invieremo un promemoria\r\n                            <b ng-if="ctrl.flagsms"> via SMS</b>\r\n                            <span ng-if="ctrl.flagsms && ctrl.flagemail"> e</span>\r\n                            <b ng-if="ctrl.flagemail"> tramite email</b> qualche giorno prima.\r\n                        </p>\r\n                        --><p></p></div><!-- commentato come richiesto dal defect 38762\r\n                <div class="row text-center">\r\n                    <button class="col-md-10 col-md-offset-7 col-sm-10 col-sm-offset-7 col-xs-10 col-xs-offset-7 text-center customBtn greenBackground"\r\n                            ng-click="ctrl.btnEditAppt()"> MODIFICA APPUNTAMENTO </button>\r\n                </div>\r\n              --></div><!-- esito negativo --><div ng-if="ctrl.esitook == false"><div class="row text-center" style="margin-top:50px"><span class="esito-ko ico-cf-face-bad-n"></span></div><div class="row text-center col-xs-20 col-xs-offset-2"><p class="cmbTitoloParagrafoEsito">Ci scusiamo ma, per un problema tecnico, l\'appuntamento telefonico non e&grave; stato fissato.<br>Per favore, riprova.</p></div><div class="row text-center"><button class="col-md-6 col-md-offset-9 col-sm-6 col-sm-offset-9 col-xs-10 col-xs-offset-7 text-center customBtn greenBackground" style="margin-top: 20px" ng-click="ctrl.btnRiprova()">RIPROVA</button></div></div></div></div><div class="row text-center"><div class="jumbotronEsito col-md-24 col-sm-24 col-xs-24"><div class="row text-center"><button class="col-md-6 col-md-offset-9 col-sm-6 col-sm-offset-9 col-xs-10 col-xs-offset-7 text-center customBtn whiteBackgroundBtn" ng-click="ctrl.btnHomePage()">CHIUDI</button></div></div></div></div><div id="cmbEsitoGalleggiante" ng-if="ctrl.fromgalleggiante"><div class="row text-center"><div class="col-md-24 col-sm-24 col-xs-24"><!-- esito positivo --><div ng-if="ctrl.esitook"><div ng-if="!ctrl.callmebackpersonal"><div class="row text-center"><p class="cmbTitoloParagrafoEsitoGalleggiante">TI RICHIAMIAMO NOI</p></div><div class="row text-center" style="margin-top:15px"><span class="icona ico ico-comuni-esito-face-ok iconaEsitoGalleggiante"></span></div><div class="row text-center"><p class="cmbTitoloParagrafoEsitoGalleggiante">Appuntamento telefonico confermato</p></div><div class="row text-center box col-md-24 col-sm-24 col-xs-24"><div class="cmbSottotitoloParagrafoEsitoGalleggiante"><p>Ti richiameremo il <b>{{ctrl.fasciagalleggiante[3]}}</b> tra le ore <b>{{ctrl.fasciagalleggiante[0]}}</b> e le <b>{{ctrl.fasciagalleggiante[1]}}</b> al numero <b>{{ctrl.cellulare}}</b> per parlare di <b>{{ctrl.riepilogo}}</b>.</p><p>Abbiamo salvato il tuo appuntamento nella sezione <a class="linkAppuntamenti" ng-click="ctrl.btnAppuntamenti()">PROMEMORIA</a> dove lo puoi consultare, modificare o eliminare in ogni momento.</p><!-- inizio nuova gestione promemoria --><p ng-if="!ctrl.istoday">Ti invieremo un promemoria <b>via SMS</b> qualche giorno prima.</p><!-- fine gestione promemoria --><!-- vecchia gestione promemoria \r\n                        <p ng-if="ctrl.flagsms || ctrl.flagemail">Ti invieremo un promemoria\r\n                            <b ng-if="ctrl.flagsms"> via SMS</b>\r\n                            <span ng-if="ctrl.flagsms && ctrl.flagemail"> e</span>\r\n                            <b ng-if="ctrl.flagemail"> tramite email</b> qualche giorno prima.\r\n                        </p>\r\n                    --></div></div></div><div ng-if="ctrl.callmebackpersonal"><div class="row text-center"><p class="cmbTitoloParagrafoEsitoGalleggiante">TI RICHIAMIAMO NOI</p></div><div class="row text-center" style="margin-top: 15px; margin-bottom: -15px"><span class="icona ico ico-comuni-esito-face-ok iconaEsitoGalleggiante"></span></div><div class="row text-center"><p class="cmbTitoloParagrafoEsitoGalleggiante"></p></div><div class="row text-center box col-md-24 col-sm-24 col-xs-24"><div class="cmbSottotitoloParagrafoEsitoGalleggiante"><p>Ti richiameremo nel corso della prossima ora al numero <b>{{ctrl.cellulare}}</b> per parlare di <b>{{ctrl.riepilogo}}</b>.</p><p>Abbiamo salvato il tuo appuntamento nella sezione <a class="linkAppuntamenti" ng-click="ctrl.btnAppuntamenti()">PROMEMORIA</a> dove lo puoi consultare, modificare o eliminare in ogni momento.</p></div></div></div></div><div ng-if="!ctrl.esitook"><div ng-if="ctrl.errhouravailable"><div class="row text-center"><p class="cmbTitoloParagrafoEsitoGalleggiante">TI RICHIAMIAMO NOI</p></div><div class="row text-center" style="margin-top: 15px"><span class="icona ico ico-comuni-esito-face-ko iconaEsitoGalleggiante"></span></div><div class="row text-center col-md-24 col-sm-24 col-xs-24"><p class="cmbSottotitoloParagrafoEsitoGalleggiante">Ci scusiamo ma, tutti i nostri gestori sono già impegnati nella prossima ora.<br>Per favore, scegli una data e un orario tra quelli proposti.</p></div><div class="row text-center col-md-24 col-sm-24 col-xs-24"><button class="col-md-22 col-md-offset-1 col-sm-22 col-sm-offset-1 col-xs-24 customBtnGallegianteOK" ng-click="ctrl.riprovaCb()">RIPROVA</button></div></div><div ng-if="ctrl.errelimina || ctrl.errstorico"><div class="row text-center"><p class="cmbTitoloParagrafoEsitoGalleggiante">TI RICHIAMIAMO NOI</p></div><div class="row text-center" style="margin-top: 15px"><span class="icona ico ico-comuni-esito-face-ko iconaEsitoGalleggiante"></span></div><div class="row text-center col-md-24 col-sm-24 col-xs-24"><p class="cmbSottotitoloParagrafoEsitoGalleggiante" ng-if="!ctrl.errstorico && !ctrl.errelimina">Ci scusiamo ma, per un problema tecnico, l\'appuntamento telefonico non &egrave; stato fissato. Per favore, riprova.</p><p class="cmbSottotitoloParagrafoEsitoGalleggiante" ng-if="ctrl.errstorico && !ctrl.errelimina">Ci scusiamo ma, per un problema tecnico, il servizio non &egrave; al momento disponibile. Per favore, riprova.</p><p class="cmbSottotitoloParagrafoEsitoGalleggiante" ng-if="!ctrl.errstorico && ctrl.errelimina">Ci scusiamo ma, per un problema tecnico, non &egrave; stato possibile eliminare l\'appuntamento telefonico. Per favore, riprova.</p></div></div></div></div></div></div>'),
e.put("app/tools/callmeback/widgets/cmbPhoneNumber/cmbPhoneNumber.html",'<div id="cmbPhoneNumber" ng-if="ctrl.fromgalleggiante"><div ng-if="!ctrl.modalpersonalclient"><div class="row text-center"><p class="cmbPhoneNumberTitoloParagrafo">TI RICHIAMIAMO NOI</p></div><div class="row text-center"><p class="cmbPhoneNumberSottotitoloParagrafo">{{ctrl.textPhone}}</p></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24" ng-if="!ctrl.modificaNumero"><input type="tel" maxlength="10" ng-model="ctrl.cellulare" class="inputPhoneNumber" ng-blur="ctrl.checkError()" ng-change="ctrl.changeStyle()" ng-class="{\'inputPhoneNumberError\': ctrl.errors.cellulare || ctrl.errors.cellulareVuoto}" required></div><!-- commentato defect 13947\r\n            <div class="col-md-24 col-sm-24 col-xs-24" ng-if="ctrl.modificaNumero">\r\n                <div class="col-md-12 col-sm-12 col-xs-12">\r\n                    <p class="pull-left testoCellulare">{{ctrl.cellulare}}</p>\r\n                </div>\r\n                <div class="col-md-12 col-sm-12 col-xs-12">\r\n                    <b><a class="linkTelefono pull-left" ng-click="ctrl.modificaNumero = false">MODIFICA NUMERO</a></b>\r\n                </div>\r\n            </div> --></div><div class="row" class="col-xs-24" style="margin-top: 10px"><div ng-if="ctrl.errors.cellulare && !ctrl.errors.cellulareVuoto" class="containerError"><span class="cmbErrorePhoneNumber">{{ctrl.numberWrong}}</span></div><div ng-if="ctrl.errors.cellulareVuoto && !ctrl.errors.cellulare"><span class="cmbErrorePhoneNumber">{{ctrl.numberEmpty}}</span></div></div></div><!--──────────────────────────────────MODALE CLIENTE PERSONAL───────────────────────────────--><div ng-if="ctrl.modalpersonalclient"><div class="row text-center"><p class="cmbPhoneNumberTitoloParagrafo">TI RICHIMIAMO NOI SUBITO</p></div><div class="row text-center"><p class="cmbPhoneNumberSottotitoloParagrafo" style="margin-bottom: 108px">Con "chiamami subito" ti richiameremo nel corso della prossima ora</p></div><div class="row" id="button_Gall"><div class="col-md-12 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteAnnulla" ng-click="ctrl.clientPersonalEvManager(\'back\')">ANNULLA</button></div><div class="col-md-12 col-sm-12 col-xs-12"><button class="col-md-24 col-sm-24 col-xs-24 customBtnGallegianteOK" ng-click="ctrl.clientPersonalEvManager(\'next\')">CONFERMA</button></div></div></div><!--──────────────────────────────────FINE MODALE CLIENTE PERSONAL───────────────────────────────--></div>'),e.put("app/tools/callmeback/widgets/cmbFasce/cmbFasce.html",'<div id="cmbFasce" style="margin-top:30px" ng-if="!ctrl.fromgalleggiante"><div class="row text-center"><div class="col-md-11 col-sm-11 col-xs-10 col-height"><hr></div><div class="col-md-2 col-sm-2 col-xs-4 col-height"><span class="icon ico-comuni-orologio" style="font-size:40px;color:#C1C1C1"></span></div><div class="col-md-11 col-sm-11 col-xs-10 col-height"><hr></div></div><div class="row text-center"><p class="cmbTitoloParagrafo">Scegli data e orario</p></div><div class="row text-center"><img src="/ib/public/guestarea/assets/infinito.png"></div><div ng-if="ctrl.fasce.length > 0"><!-- versione desktop e tablet --><div class="hidden-xs"><div class="row text-center"><p class="cmbSottotitoloParagrafo">Usa le frecce per spostarti tra i giorni e scegli una fascia oraria tra quelle disponibili</p></div><div class="row text-center"><div class="col-md-1 col-sm-1 col-xs-24" ng-click="ctrl.setPrevDays()" style="margin-top:195px"><img ng-hide="ctrl.indiceSx == 0" src="/ib/public/guestarea/assets/sliderSx.png" style="cursor: pointer;width: 15px;height: 30px"></div><div class="col-md-9 col-md-offset-1 col-sm-9 col-sm-offset-1 col-xs-24"><p class="cmbSottotitoloParagrafo text-center">{{ctrl.firstColumnSplit[0]}} <b>{{ctrl.firstColumnSplit[1]}} {{ctrl.firstColumnSplit[2]}}</b> {{ctrl.firstColumnSplit[3]}}</p><hr><div ng-repeat="ore in ctrl.orari1"><button class="col-md-5 col-sm-5 col-xs-5" ng-click="ctrl.checkFascia(ore,$index)" ng-disabled="ore[2] == false" ng-class="{\'btn btn-normal\': ore[2] == true, \'btn btn-grey\': ore[2] == false, \'btn btn-selected\': ore[4] == true || ctrl.fasciaselected == ore}"><p class="textCell">{{ore[0]}}<br><span class="icona ico ico-comuni-freccia-accordion-apri" style="font-size:10px"></span><br>{{ore[1]}}</p></button></div></div><div class="col-md-2 col-sm-2"></div><div class="col-md-9 col-sm-9 col-xs-24" ng-show="ctrl.indiceDx <= ctrl.maxIndice"><p class="cmbSottotitoloParagrafo text-center">{{ctrl.secondColumnSplit[0]}} <b>{{ctrl.secondColumnSplit[1]}} {{ctrl.secondColumnSplit[2]}}</b> {{ctrl.secondColumnSplit[3]}}</p><hr><div ng-repeat="ore in ctrl.orari2"><button class="col-md-5 col-sm-5 col-xs-5" ng-click="ctrl.checkFascia(ore,$index)" ng-disabled="ore[2] == false" ng-class="{\'btn btn-normal\': ore[2] == true, \'btn btn-grey\': ore[2] == false, \'btn btn-selected\':  ore[4] == true || ctrl.fasciaselected == ore}"><p class="textCell">{{ore[0]}}<br><span class="icona ico ico-comuni-freccia-accordion-apri" style="font-size:10px"></span><br>{{ore[1]}}</p></button></div></div><div class="col-md-1 col-md-offset-1 col-sm-1 col-sm-offset-1 col-xs-24" ng-click="ctrl.setNextDays()" style="margin-top:195px"><img ng-hide="ctrl.indiceDx >= ctrl.maxIndice" src="/ib/public/guestarea/assets/sliderDx.png" style="cursor: pointer;width: 15px;height: 30px"></div></div><div class="row text-center" style="margin-top:10px"><div ng-show="ctrl.errors.fasceVuoto == true"><span class="cmbErrore">Selezionare almeno una fascia oraria.</span></div></div><div class="row text-center" style="margin-top:10px"><div ng-show="ctrl.errors.fasciaNonDisponibile == true"><span class="cmbErrore">La fascia che avevi selezionato non è più disponibile.</span></div></div><div ng-if="ctrl.giorniScrollAutomaticaRiga1.length > 0" class="row text-center" style="margin-top:10px; margin-bottom: -10px"><div class="col-md-16 col-md-offset-4 col-sm-18 col-sm-offset-3 col-xs-22 col-xs-offset-1"><div ng-repeat="days in ctrl.giorniScrollAutomaticaRiga1" class="col-md-3 col-sm-3 col-xs-3" style="cursor: pointer" ng-click="ctrl.showClickedDays($index,0)" ng-class="{\'contenitoreActive\': $index == ctrl.indiceSx || $index == ctrl.indiceDx,\r\n                                        \'contenitore\': $index !== ctrl.indiceSx && $index !== ctrl.indiceDx}"><div><p class="labelOverInput"><b>{{days}}</b></p></div></div></div></div><div ng-if="ctrl.giorniScrollAutomaticaRiga1.length > 0" class="col-md-20 col-md-offset-2 col-sm-20 col-sm-offset-2 col-xs-22 col-xs-offset-1" style="margin-top: -10px"><hr></div><div ng-if="ctrl.giorniScrollAutomaticaRiga2.length > 0" class="row text-center" style="margin-top:10px; margin-bottom: -10px"><div class="col-md-16 col-md-offset-4 col-sm-18 col-sm-offset-3 col-xs-22 col-xs-offset-1"><div ng-repeat="days in ctrl.giorniScrollAutomaticaRiga2" class="col-md-3 col-sm-3 col-xs-3" style="cursor: pointer" ng-click="ctrl.showClickedDays($index,8)" ng-class="{\'contenitoreActive\': $index+8 == ctrl.indiceSx || $index+8 == ctrl.indiceDx,\r\n                                        \'contenitore\': $index+8 !== ctrl.indiceSx && $index+8 !== ctrl.indiceDx}"><div><p class="labelOverInput"><b>{{days}}</b></p></div></div></div></div><div ng-if="ctrl.giorniScrollAutomaticaRiga2.length > 0" class="col-md-20 col-md-offset-2 col-sm-20 col-sm-offset-2 col-xs-22 col-xs-offset-1" style="margin-top: -10px"><hr></div><div ng-if="ctrl.giorniScrollAutomaticaRiga3.length > 0" class="row text-center" style="margin-top:10px; margin-bottom: -10px"><div class="col-md-16 col-md-offset-4 col-sm-18 col-sm-offset-3 col-xs-22 col-xs-offset-1"><div ng-repeat="days in ctrl.giorniScrollAutomaticaRiga3" class="col-md-3 col-sm-3 col-xs-3" style="cursor: pointer" ng-click="ctrl.showClickedDays($index,16)" ng-class="{\'contenitoreActive\': $index+16 == ctrl.indiceSx || $index+16 == ctrl.indiceDx,\r\n                                        \'contenitore\': $index+16 !== ctrl.indiceSx && $index+16 !== ctrl.indiceDx}"><div><p class="labelOverInput"><b>{{days}}</b></p></div></div></div></div><div ng-if="ctrl.giorniScrollAutomaticaRiga3.length > 0" class="col-md-20 col-md-offset-2 col-sm-20 col-sm-offset-2 col-xs-22 col-xs-offset-1" style="margin-top: -10px"><hr></div></div><!-- versione mobile --><div class="visible-xs"><div class="row text-center" style="margin-top: 30px"><p class="cmbGalleggianteSottotitoloParagrafo">Scegli la data e la fascia oraria nella quale preferisci essere richiamato.</p></div><div class="row"><div class="col-xs-20 col-xs-offset-2 dropdown"><button class="btn-dropdown btn-default dropdown-toggle" type="button" data-toggle="dropdown" ng-model="value"><span>{{ctrl.giornoSelezionato | uppercase}}</span> <img class="freccia" src="/ib/public/guestarea/assets/freccia_dropdown.png"></button><ul class="col-xs-20 col-xs-offset-2 dropdown-menu" role="menu"><li role="presentation"><a ng-repeat="giorni in ctrl.giorniFasceGallegiante" ng-click="ctrl.setGiorniFasce($index)" class="text-center menuItem" role="menuitem" required><p>{{giorni | uppercase}}</p></a></li></ul></div><div class="col-xs-20 col-xs-offset-2" style="margin-bottom: 10px;padding-left: 10px"><div ng-repeat="ore in ctrl.informazioniOrari"><button class="col-xs-4" ng-click="ctrl.checkFasciaGalleggiante(ore)" ng-disabled="ore[2] == false" ng-class="{\'btn btn-normal\': ore[2] == true, \'btn btn-grey\': ore[2] == false, \'btn btn-selected\': ore[4] == true || ctrl.fasciagalleggiante == ore}"><p class="textCell">{{ore[0]}}<br><span class="icona ico ico-comuni-freccia-accordion-apri"></span><br>{{ore[1]}}</p></button></div></div></div><div class="row text-center" style="margin-top:10px"><div ng-show="ctrl.errors.fasceVuoto == true"><span class="cmbErrore">Selezionare almeno una fascia oraria.</span></div></div><div class="row text-center" style="margin-top:10px"><div ng-show="ctrl.errors.fasciaNonDisponibile == true"><span class="cmbErrore">La fascia che avevi selezionato non è più disponibile.</span></div></div></div></div><div ng-if="ctrl.fasce.length <= 0"><p class="cmbSottotitoloParagrafo">Seleziona almeno un argomento per visualizzare le fasce orarie</p></div></div><div id="cmbFasceGallegiante" ng-if="ctrl.fromgalleggiante"><div class="row text-center"><p class="cmbGalleggianteTitoloParagrafo">TI RICHIAMIAMO NOI</p></div><div class="row text-center"><p class="cmbGalleggianteSottotitoloParagrafo">{{ctrl.sottotitoloFasce}}</p></div><div class="row"><div class="col-md-24 col-sm-24 col-xs-24 dropdown"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" ng-model="value" ng-click="ctrl.openAccordionFunction()"><span>{{ctrl.giornoSelezionato | uppercase}}</span> <span ng-show="ctrl.openAccordion == false" class="icona ico ico-comuni-freccia-accordion-apri pull-right" style="color:#fc9700"></span> <span ng-show="ctrl.openAccordion == true" class="icona ico ico-comuni-freccia-accordion-chiudi pull-right" style="color:#fc9700"></span></button><ul class="dropdown-menu" id="scrollbar-custom" role="menu"><li role="presentation"><a ng-repeat="giorni in ctrl.giorniFasceGallegiante" ng-click="ctrl.setGiorniFasce($index)" class="text-center menuItem" role="menuitem" required><p>{{giorni | uppercase}}</p></a></li></ul></div><div class="col-md-24 col-sm-24 col-xs-24" style="margin-bottom: 10px;padding-left: 10px"><div ng-repeat="ore in ctrl.informazioniOrari"><button class="col-md-4 col-sm-4 col-xs-4" ng-click="ctrl.checkFasciaGalleggiante(ore)" ng-disabled="ore[2] == false" ng-class="{\'btnGallegiante btnGallegiante-normal\': ore[2] == true,\r\n                    \'btnGallegiante btnGallegiante-grey\': ore[2] == false,\r\n                    \'btnGallegiante btnGallegiante-selected\': ore[4] == true || ctrl.fasciagalleggiante == ore}"><p class="textCell">{{ore[0]}}<br><span class="icona ico ico-comuni-freccia-accordion-apri"></span><br>{{ore[1]}}</p></button></div></div><div class="row text-center pull-left" style="margin: 10px 0px 20px 10px"><div ng-show="ctrl.errors.fasceVuoto == true"><span class="cmbErroreGalleggiante">Selezionare almeno una fascia oraria.</span></div></div><div class="row text-center pull-left" style="margin: 10px 0px 20px 10px"><div ng-show="ctrl.errors.fasciaNonDisponibile == true"><span class="cmbErroreGalleggiante">La fascia che avevi selezionato non è più disponibile.</span></div></div></div></div>'),e.put("app/tools/carrello/widgets/toastmessage/html/toastMessageTemplate.html",'<style>#snackbar {\r\n    visibility: hidden;\r\n    min-width: 100%;\r\n    background-color: #333;\r\n    color: #fff;\r\n    border-radius: 2px;\r\n    padding: 16px;\r\n    position: fixed;\r\n    min-height: 70px;\r\n    /*bottom: 55px;*/\r\n    z-index:99999999;\r\n    font-size: 17px;\r\n    display: flex !important;\r\n    align-items: center;\r\n}\r\n\r\n#snackbar.show {\r\n    visibility: visible;\r\n    \r\n}\r\n\r\n@-webkit-keyframes fadein {\r\n    from {bottom: 0; opacity: 0;} \r\n    to {bottom: 30px; opacity: 1;}\r\n}\r\n\r\n@keyframes fadein {\r\n    from {bottom: 0; opacity: 0;}\r\n    to {bottom: 30px; opacity: 1;}\r\n}\r\n\r\n@-webkit-keyframes fadeout {\r\n    from {bottom: 30px; opacity: 1;} \r\n    to {bottom: 0; opacity: 0;}\r\n}\r\n\r\n@keyframes fadeout {\r\n    from {bottom: 30px; opacity: 1;}\r\n    to {bottom: 0; opacity: 0;}\r\n}</style><div id="snackbar"></div>')}]);
//# sourceMappingURL=../maps/scripts/app.js.map
